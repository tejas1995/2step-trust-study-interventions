(()=>{"use strict";var t={d:(n,i)=>{for(var e in i)t.o(i,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:i[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)};t.d({},{o:()=>l});let n="https://tejassrinivasan.pythonanywhere.com/";async function i(t){if(l)console.log("logged (mock)",t);else{t.url_data=globalThis.url_data,console.log("Data"),"study_id"in t.url_data||(t.url_data.study_id="trialrun_studies"),t.url_data.queue_id=globalThis.uid,console.log("logged",t),console.log("Logging to",n+"log");try{return await $.ajax(n+"log",{data:JSON.stringify({project:"2step-trust-study-interventions/"+t.url_data.study_id,uid:globalThis.uid.replace("/","_")+"_"+t.url_data.prolific_id,payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"})}catch(t){console.log(t)}}}let e=null;function o(t,n,i,o,a,l=!0){e&&(clearInterval(e),e=null),i.forEach((t=>t.setAttribute("disabled","true")));let r=document.createElement("div");r.id=`timer_${n.id}`,r.style.fontWeight="bold",r.style.marginTop="10px",n.appendChild(r);let _=t;r.textContent=l?a+` You can make your selection in ${_} second(s).`:a,e=setInterval((()=>{_--,_>=0?r.textContent=l?a+` You can make your selection in ${_} second(s).`:a:(null!==e&&(clearInterval(e),e=null),e=null,n.removeChild(r),i.forEach((t=>t.removeAttribute("disabled"))),o&&o())}),1e3)}const a=t=>new Promise((n=>setTimeout(n,t)));var l=!1;var r=[];let _,s,c,d,u,p=-1,v=null,f=-1,g=-1,b=-1,m=-1,h=0,y=5,x=-1,A=1,w=0,I=0,k=0;var T={},E={};let B,S=-1,N=-1;function O(t,n){if(!t)throw n||"Assertion failed"}function P(t){w+=t,Z&&5==w&&(w+=t),0==w?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),w>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==w&&($("#main_box_instructions").hide(),$("#pre_study_survey").show()),8==w&&($("#pre_study_survey").hide(),$("#main_box_experiment").show(),L()),$("#main_box_instructions").children(":not(input)").each(((t,n)=>{$(n).hide()})),$(`#instructions_${w}`).show()}function C(t){d=Date.now(),f=t,O(1==t||2==t,"Invalid option!"),1==t?($("#button_initial_decision_option1").attr("activedecision","true"),$("#button_initial_decision_option2").removeAttr("activedecision")):($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").attr("activedecision","true")),$("#initial_user_confidence_div").show(),$("#button_initial_decision_option1").attr("disabled","true"),$("#button_initial_decision_option2").attr("disabled","true"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled")}async function D(t){s=Date.now(),b=t,O(1==t||2==t||3==t,"Invalid option!"),1==t?($("#button_initial_confidence_option1").attr("activedecision","true"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision")):2==t?($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").attr("activedecision","true"),$("#button_initial_confidence_option3").removeAttr("activedecision")):($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").attr("activedecision","true")),$("#button_initial_confidence_option1").attr("disabled","true"),$("#button_initial_confidence_option2").attr("disabled","true"),$("#button_initial_confidence_option3").attr("disabled","true"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),async function(){console.log("Getting AI assistance..."),1==tt&&($("#ai_prediction_span").html("The AI is thinking..."),$("#ai_prediction_span").show(),$("#ai_confidence_span").html(""),await async function(){console.log("Preparing LLM assistance...");let t={question:v.question,option1:v.option1,option2:v.option2,correct_option:v.correct_option};try{B=await $.ajax("https://tejassrinivasan.pythonanywhere.com/get_llm_prediction",{data:JSON.stringify({project:"2step-trust-study",model_name:"user_acceptance_model-logisticregression-0.9347testf1",payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"})}catch(t){console.log("ERROR!"),console.log(t)}return v.ai_prediction=B.llm_predicted_option,v.ai_confidence=B.llm_confidence,v.llm_answer=B.llm_answer,v.ai_explanation=B.llm_explanation,v.ai_contrastive_explanation=B.llm_counterexplanation,v.ai_is_correct=B.llm_is_correct,v.llm_input=B.llm_input,v.llm_output=B.llm_output,console.log("LLM prediction result: ",B),B}());let t=v.ai_confidence,n=k;if("user_reported"==V&&(n=(y-5)/2.5,console.log("Using user reported trust value: ",y)),T={intervention_applied:!1,trust_level_at_start_of_interaction:n},"none"==U||f==v.ai_prediction)console.log("Not applying any intervention."),t=v.ai_confidence;else if("confidence_manip"==U)if("none"==R||"mitigate_undertrust"==R&&n<H||"mitigate_overtrust"==R&&n>H){if(console.log("Applying AI confidence manipulation intervention."),"fixed"==F){let n=Number(v.ai_confidence.replace("%",""))/100,i=Math.min(1,n+z);i=Math.max(.5,i),t=String((100*i).toFixed(0))+"%";let e=(i-n).toFixed(2);console.log("Actual AI confidence: ",v.ai_confidence,", Confidence shown to user: ",t),T.conf_actual=v.ai_confidence,T.conf_displayed=t,T.conf_change=e,T.intervention_applied=!0}}else console.log("Conditions for applying 'confidence manipulation' intervention not satisfied.");else if("ai_explanation"==U)if("none"==R||"mitigate_undertrust"==R&&n<H||"mitigate_overtrust"==R&&n>H){if(console.log("Applying AI explanation intervention."),"fixed"==F){console.log("Showing explanation");let t=v.ai_explanation?v.ai_explanation:"No explanation provided";$("#ai_explanation_span").html(t),$("#ai_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,o(15,document.getElementById("ai_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else console.log("Conditions for applying 'AI explanation' intervention not satisfied.");else if("ai_contrastive_explanation"==U)if("none"==R||"mitigate_undertrust"==R&&n<H||"mitigate_overtrust"==R&&n>H){if(console.log("Applying AI explanation intervention."),"fixed"==F){console.log("Showing explanation");let t=v.ai_contrastive_explanation?v.ai_contrastive_explanation:"No explanation provided";$("#ai_contrastive_explanation_span").html(t),$("#ai_contrastive_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,o(10,document.getElementById("ai_contrastive_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else console.log("Conditions for applying 'AI explanation' intervention not satisfied.");else if("both_explanation_types"==U){if(O("mitigate_underandovertrust"==R,"Goal for 'both explanation types' intervention should be 'mitigate_underandovertrust'"),n<K){console.log("Applying explanation intervention for undertrust"),console.log("Showing explanation");let t=v.ai_explanation?v.ai_explanation:"No explanation provided";$("#ai_explanation_span").html(t),$("#ai_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,o(15,document.getElementById("ai_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}else if(n>Q){console.log("Applying contrastive explanation intervention for overtrust");let t=v.ai_contrastive_explanation?v.ai_contrastive_explanation:"No explanation provided";$("#ai_contrastive_explanation_span").html(t),$("#ai_contrastive_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,o(10,document.getElementById("ai_contrastive_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else"ai_thinking"==U?("none"==R||"mitigate_undertrust"==R&&n<H||"mitigate_overtrust"==R&&n>H)&&(console.log("Applying AI thinking intervention."),"fixed"==F&&(console.log("Showing AI thinking"),T.intervention_applied=!0,$("#ai_thinking_div").show(),await a(1e4),$("#ai_thinking_div").hide())):"ai_forced_pause"==U?("none"==R||"mitigate_undertrust"==R&&n<H||"mitigate_overtrust"==R&&n>H)&&(console.log("Applying AI forced pause intervention."),"fixed"==F)&&(console.log("Showing AI forced pause"),T.intervention_applied=!0,o(10,document.getElementById("ai_assistance_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please take some time to carefully consider the AI's suggestion.")):"both_pause_types"==U&&(O("mitigate_underandovertrust"==R,"Goal for 'both pause types' intervention should be 'mitigate_underandovertrust'"),n<K?(console.log("Applying AI thinking intervention for undertrust"),console.log("Showing AI thinking"),T.intervention_applied=!0,$("#ai_thinking_div").show(),await a(1e4),$("#ai_thinking_div").hide()):n>Q&&(console.log("Applying AI forced pause intervention for overtrust"),console.log("Showing AI forced pause"),T.intervention_applied=!0,o(10,document.getElementById("ai_assistance_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please take some time to carefully consider the AI's suggestion.")));console.log("AI Assistance Intervention Details: ",T),$("#ai_prediction_span").html("Option "+v.ai_prediction),$("#ai_confidence_span").html(t),$("#ai_assistance_div").show(),$("#final_user_decision_div").show()}()}function j(t){u=Date.now(),g=t,O(1==t||2==t,"Invalid option!"),1==t?($("#button_final_decision_option1").attr("activedecision","true"),$("#button_final_decision_option2").removeAttr("activedecision")):($("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").attr("activedecision","true")),$("#final_user_confidence_div").show(),$("#button_final_decision_option1").attr("disabled","true"),$("#button_final_decision_option2").attr("disabled","true"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled")}function q(t){c=Date.now(),m=t,O(1==t||2==t||3==t,"Invalid option!"),1==t?($("#button_final_confidence_option1").attr("activedecision","true"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision")):2==t?($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").attr("activedecision","true"),$("#button_final_confidence_option3").removeAttr("activedecision")):($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").attr("activedecision","true")),$("#button_final_confidence_option1").attr("disabled","true"),$("#button_final_confidence_option2").attr("disabled","true"),$("#button_final_confidence_option3").attr("disabled","true"),async function(){let t=v.correct_option,n=t==g,i=v.ai_is_correct,e="Correct answer: <b>Option "+t+"</b>.<br>";e+=n?"You picked Option "+g+", which was <span class='color_correct'><b>correct</b></span>.<br>":"You picked Option "+g+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",e+=i?"The AI picked Option "+v.ai_prediction+", which was <span class='color_correct'><b>correct<b></span>.<br>":"The AI picked Option "+v.ai_prediction+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",n?(e+="<span class='color_correct'><b>You receive a reward of $0.10.</b></span>",h+=.1):e+="<span class='color_incorrect'><b>You do not receive any reward.</b></span>",e+="<br>",$("#balance").text(`Balance: $${h.toFixed(2)} + $1.0`),$("#result_span").html(e),$("#result_span").show(),Z?$("#button_next").show():$("#user_trust_report_div").show(),function(){if("smoothed_confweighted_trust"==V){let t=Number(v.ai_confidence.replace("%",""))/100,n=v.ai_prediction==v.correct_option?t:-t,i=k;k=X*n+(1-X)*k,E={prev_estimated_trust_level:i,trust_effect:n,new_estimated_trust_level:k},console.log("Old estimated trust level: "+i+", trust effect: "+n+", new estimated trust level: "+k)}}()}()}function L(){if($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").removeAttr("activedecision"),$("#button_initial_decision_option1").removeAttr("disabled"),$("#button_initial_decision_option2").removeAttr("disabled"),$("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled"),$("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").removeAttr("activedecision"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),$("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled"),$("#ai_assistance_div").hide(),$("#ai_prediction_div").show(),$("#ai_explanation_div").hide(),$("#ai_contrastive_explanation_div").hide(),$("#ai_thinking_div").hide(),$("#initial_user_confidence_div").hide(),$("#final_user_decision_div").hide(),$("#final_user_confidence_div").hide(),$("#range_val").removeAttr("disabled"),$("#user_trust_report_div").hide(),$("#button_place_bet").hide(),$("#button_next").hide(),$("#result_span").hide(),-1==p?$("#range_text").text("-"):$("#range_text").text(`Before this interaction, your trust in the AI: ${10*y} / 100.`),$("#range_val").val(y),x=y,p+=1,p>=r.length)return $("#main_box_experiment").hide(),void(l?$("#main_box_end_mock").show():$("#main_box_end").show());if(v=r[p],$("#question_span").html(v.question),$("#option1_span").html(v.option1),$("#option2_span").html(v.option2),v.hasOwnProperty("reward_ratio")){let[t,n]=v.reward_ratio;t=Number(t),n=Number(n),A=t/n}else A=1;_=Date.now(),$("#progress").text(`Progress: ${p+1} / ${r.length}`),o(10,document.getElementById("initial_user_decision_div"),[document.getElementById("button_initial_decision_option1"),document.getElementById("button_initial_decision_option2")],null,"Please read the question and options closely.")}$("#button_instructions_next").on("click",(()=>P(1))),$("#button_instructions_prev").on("click",(()=>P(-1))),$("#button_start_study").on("click",(()=>{-1==S||-1==N?$("#error_message_survey").show():(i({type:"pre_study_survey",pre_survey_answer1:S,pre_survey_answer2:N}),P(1))})),$("#ai_familiarity_1").on("click",(()=>S=1)),$("#ai_familiarity_2").on("click",(()=>S=2)),$("#ai_familiarity_3").on("click",(()=>S=3)),$("#ai_familiarity_4").on("click",(()=>S=4)),$("#ai_usage_1").on("click",(()=>N=1)),$("#ai_usage_2").on("click",(()=>N=2)),$("#ai_usage_3").on("click",(()=>N=3)),$("#button_next").on("click",(()=>{if(-1!=p){let t={question_i:p,user_balance_post_interaction:h,user_trust_val_before:x,user_trust_val_after:y,initial_user_decision:f,final_user_decision:g,initial_user_confidence:b,final_user_confidence:m};t.times={initial_decision:d-_,initial_confidence:s-d,final_decision:u-s,final_confidence:c-u,trust_decision:Date.now()-c},t.question=v,t.count_exited_page=I,t.intervention_details=T,t.trust_effect_prediction_data=E,i(t),I=0}L()})),$("#range_val").on("input change",(function(){y=$(this).val(),$("#range_text").text(`After this interaction, your current trust in the AI: ${10*y} / 100.`),$("#button_next").show()})),$("#button_initial_decision_option1").on("click",(()=>C(1))),$("#button_initial_decision_option2").on("click",(()=>C(2))),$("#button_initial_confidence_option1").on("click",(async()=>await D(1))),$("#button_initial_confidence_option2").on("click",(async()=>await D(2))),$("#button_initial_confidence_option3").on("click",(async()=>await D(3))),$("#button_final_decision_option1").on("click",(()=>j(1))),$("#button_final_decision_option2").on("click",(()=>j(2))),$("#button_final_confidence_option1").on("click",(()=>q(1))),$("#button_final_confidence_option2").on("click",(()=>q(2))),$("#button_final_confidence_option3").on("click",(()=>q(3)));const M=new URLSearchParams(window.location.search),Y=M.get("start"),G=M.get("uid");if(globalThis.url_data=function(t){const n={};for(const[i,e]of t)n[i]=e;return n}(M.entries()),null!=G){if(globalThis.uid=G,"prolific_random"==globalThis.uid){let t=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${M.get("prolific_queue_name")}/${t}`}}else{let t=null;for(;null==t;)t=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=t}let J=null;globalThis.uid.includes("343")||globalThis.uid.includes("434")?J=[7,8,9,17,18,19,27,28,29]:globalThis.uid.includes("735")&&(J=[10,11,12,13,14,25,26,27,28,29]);let R=M.get("intervention_goal");if(null==R&&(R="none"),!["none","mitigate_undertrust","mitigate_overtrust","mitigate_underandovertrust"].includes(R))throw new Error("Invalid AI Assistance Intervention Goal: "+R);let U=M.get("intervention_type");if(null==U&&(U="none"),!["none","dummy","confidence_manip","ai_explanation","ai_contrastive_explanation","both_explanation_types","ai_thinking","ai_forced_pause","both_pause_types"].includes(U))throw new Error("Invalid AI Assistance Intervention: "+U);let F=M.get("intervention_strategy");if(null==F&&(F="dummy"),!["dummy","fixed","adaptive"].includes(F))throw new Error("Invalid AI Assistance Intervention Strategy: "+F);let W=Number(M.get("intervention_threshold"));null==W&&(W=-1);let H=Number(M.get("intervention_trust_threshold"));null==H&&(H=0);let z=Number(M.get("intervention_fixedconfchange"));null==z&&(z=0);let K=Number(M.get("intervention_undertrust_threshold"));null==K&&(K=H);let Q=Number(M.get("intervention_overtrust_threshold"));null==Q&&(Q=H);let V=M.get("user_trust_heuristic");null==V&&(V="user_reported");let X=Number(M.get("smoothing_param"));null==X&&(X=1);let Z="true"==M.get("skip_trust_reporting");null==Z&&(Z=!1);let tt="true"==M.get("use_llm_assistant");null==tt&&(tt=!1),console.log("AIInterventionGoal: ",R),console.log("AIInterventionType: ",U),console.log("AIInterventionStrategy: ",F),console.log("InterventionALDiffThreshold: ",W),console.log("InterventionTrustThreshold: ",H),console.log("InterventionUndertrustThreshold: ",K),console.log("InterventionOvertrustThreshold: ",Q),console.log("InterventionFixedConfChange: ",z),console.log("userTrustHeuristic: ",V),console.log("skip_trust_reporting: ",Z),console.log("useLLMAssistant: ",tt),"mitigate_undertrust"==R?(O(H<=0,"Trust threshold for mitigating undertrust cannot be positive."),O(z>=0,"Confidence change for mitigating undertrust cannot be negative.")):"mitigate_overtrust"==R&&(O(H>=0,"Trust threshold for mitigating overtrust cannot be negative."),O(z<=0,"Confidence change for mitigating overtrust cannot be positive.")),globalThis.url_data.intervention_goal=R,globalThis.url_data.intervention_type=U,globalThis.url_data.intervention_strategy=F,globalThis.url_data.intervention_threshold=W,globalThis.url_data.intervention_fixedconfchange=z,globalThis.url_data.user_trust_heuristic=V,globalThis.url_data.skip_trust_reporting=Z,globalThis.url_data.smoothing_param=X,globalThis.url_data.use_llm_assistant=tt,globalThis.uid.startsWith("demo_paper")&&(l=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((t=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((t=>{r=t,null!=Y&&(p=parseInt(Y)-1,console.log("Starting from",p)),P(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let nt=!1;document.onvisibilitychange=()=>{nt||(I+=1,nt=!0,globalThis.uid.startsWith("demo")||alert("Please don't leave the page. If you do so again, we may restrict paying you."),nt=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE9BQU9DLElBRWYvSixRQUFRQyxJQUFJLG9CQUNaRCxRQUFRQyxJQUFJQyxXQUFXRSxLQUN2Qm9JLE9BQU9DLFNBQVN1QixRQUFRLElBRTFCQyxNQUFNQyxJQUNKcEssRUFBT29LLEVBQ2MsTUFBakJ2QixJQUNBekYsRUFBYWlILFNBQVN4QixHQUFpQixFQUN2QzNJLFFBQVFDLElBQUksZ0JBQWlCaUQsSUFHakNvQixFQUFrQixHQUNsQmpFLEVBQUUsMEJBQTBCc0UsT0FDNUJ0RSxFQUFFLGlDQUFpQ3dFLE1BQU0sSUFHN0M3RSxRQUFRQyxJQUFJLDZCQUE4QkMsV0FBV0UsS0FFckQsSUFBSWdLLElBQWUsRUFDbkJ4SSxTQUFTeUksbUJBQXFCLEtBQ3JCRCxLQUNEdkcsR0FBcUIsRUFDckJ1RyxJQUFlLEVBQ1RsSyxXQUFXRSxJQUFLdUosV0FBVyxTQUM3QlcsTUFBTSxnRkFFVkYsSUFBZSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nvbm5lY3Rvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBERVZNT0RFIH0gZnJvbSAnLi9nbG9iYWxzJ1xuaW1wb3J0IHsgTU9DS01PREUgfSBmcm9tICcuL21haW4nXG5cbmxldCBTRVJWRVJfTE9HX1JPT1QgPSBERVZNT0RFID8gXCJodHRwOi8vMTI3LjAuMC4xOjUwMDAvXCIgOiBcImh0dHBzOi8vdGVqYXNzcmluaXZhc2FuLnB5dGhvbmFueXdoZXJlLmNvbS9cIlxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZF9kYXRhKCk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gaW5jbHVkZSB0aW1lc3RhbXAgc28gdGhhdCB0aGluZ3MgZG9uJ3QgZ2V0IGNhY2hlZFxuICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmdldEpTT04oXG4gICAgICAgIGBiYWtlZF9xdWV1ZXMvJHtnbG9iYWxUaGlzLnVpZH0uanNvbj90PSR7RGF0ZS5ub3coKX1gLFxuICAgIClcbiAgICByZXR1cm4gcmVzdWx0XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nX2RhdGEoZGF0YSk6IFByb21pc2U8YW55PiB7XG4gICAgaWYgKE1PQ0tNT0RFKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibG9nZ2VkIChtb2NrKVwiLCBkYXRhKVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBkYXRhW1widXJsX2RhdGFcIl0gPSBnbG9iYWxUaGlzLnVybF9kYXRhXG4gICAgY29uc29sZS5sb2coXCJEYXRhXCIpXG4gICAgaWYgKCEoXCJzdHVkeV9pZFwiIGluIGRhdGFbJ3VybF9kYXRhJ10pKSB7XG4gICAgICAgIGRhdGFbJ3VybF9kYXRhJ11bXCJzdHVkeV9pZFwiXSA9IFwidHJpYWxydW5fc3R1ZGllc1wiXG4gICAgfVxuICAgIGRhdGFbXCJ1cmxfZGF0YVwiXVtcInF1ZXVlX2lkXCJdID0gZ2xvYmFsVGhpcy51aWRcbiAgICBjb25zb2xlLmxvZyhcImxvZ2dlZFwiLCBkYXRhKVxuICAgIGNvbnNvbGUubG9nKFwiTG9nZ2luZyB0b1wiLCBTRVJWRVJfTE9HX1JPT1QgKyBcImxvZ1wiKVxuXG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFNFUlZFUl9MT0dfUk9PVCArIFwibG9nXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5LWludGVydmVudGlvbnMvXCIgKyBkYXRhWyd1cmxfZGF0YSddWydzdHVkeV9pZCddLFxuICAgICAgICAgICAgICAgICAgICB1aWQ6IGdsb2JhbFRoaXMudWlkLnJlcGxhY2UoXCIvXCIsIFwiX1wiKSArIFwiX1wiICsgZGF0YVsndXJsX2RhdGEnXVsncHJvbGlmaWNfaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG59IiwiaW1wb3J0IHsgRU5BQkxFX1RJTUVSIH0gZnJvbSAnLi9nbG9iYWxzJztcblxuZnVuY3Rpb24gcGFyYW1zVG9PYmplY3QoZW50cmllcykge1xuICBjb25zdCByZXN1bHQgPSB7fVxuICAvLyBlYWNoICdlbnRyeScgaXMgYSBba2V5LCB2YWx1ZV0gdHVwcGxlXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmxldCBhY3RpdmVUaW1lcjogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0SW50ZXJ2YWw+IHwgbnVsbCA9IG51bGw7IC8vIFRpbWVyIGludGVydmFsXG5cbmZ1bmN0aW9uIHN0YXJ0VGltZXIoZHVyYXRpb24sIHN0ZXBEaXYsIGJ1dHRvbnMsIGNhbGxiYWNrLCBtZXNzYWdlLCBzaG93VGltZVJlbWFpbmluZyA9IHRydWUpIHtcbiAgaWYgKCFFTkFCTEVfVElNRVIpIHtcbiAgICAgIC8vIElmIHRoZSB0aW1lciBpcyBkaXNhYmxlZCwgZW5hYmxlIHRoZSBidXR0b25zIGltbWVkaWF0ZWx5XG4gICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSk7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gIH1cblxuICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZXIgdG8gcHJldmVudCBtdWx0aXBsZSBpbnRlcnZhbHNcbiAgaWYgKGFjdGl2ZVRpbWVyKSB7XG4gICAgICBjbGVhckludGVydmFsKGFjdGl2ZVRpbWVyKTtcbiAgICAgIGFjdGl2ZVRpbWVyID0gbnVsbDtcbiAgfVxuXG4gIC8vIERpc2FibGUgYnV0dG9uc1xuICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIikpO1xuICBcbiAgLy8gU2hvdyB0aW1lciB2aXN1YWxseVxuICBsZXQgdGltZXJEaXNwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRpbWVyRGlzcGxheS5pZCA9IGB0aW1lcl8ke3N0ZXBEaXYuaWR9YDtcbiAgdGltZXJEaXNwbGF5LnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG4gIHRpbWVyRGlzcGxheS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG4gIHN0ZXBEaXYuYXBwZW5kQ2hpbGQodGltZXJEaXNwbGF5KTtcblxuICBsZXQgcmVtYWluaW5nVGltZSA9IGR1cmF0aW9uO1xuXG4gIC8vIEluaXRpYWwgZGlzcGxheVxuICBpZiAoc2hvd1RpbWVSZW1haW5pbmcpe1xuICAgIHRpbWVyRGlzcGxheS50ZXh0Q29udGVudCA9IG1lc3NhZ2UgKyBgIFlvdSBjYW4gbWFrZSB5b3VyIHNlbGVjdGlvbiBpbiAke3JlbWFpbmluZ1RpbWV9IHNlY29uZChzKS5gO1xuICB9IGVsc2Uge1xuICAgIHRpbWVyRGlzcGxheS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gIH1cblxuICBhY3RpdmVUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHJlbWFpbmluZ1RpbWUtLTtcbiAgICAgIGlmIChyZW1haW5pbmdUaW1lID49IDApIHtcbiAgICAgICAgICBpZiAoc2hvd1RpbWVSZW1haW5pbmcpIHtcbiAgICAgICAgICAgIHRpbWVyRGlzcGxheS50ZXh0Q29udGVudCA9IG1lc3NhZ2UgKyBgIFlvdSBjYW4gbWFrZSB5b3VyIHNlbGVjdGlvbiBpbiAke3JlbWFpbmluZ1RpbWV9IHNlY29uZChzKS5gO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aW1lckRpc3BsYXkudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIGlmIChhY3RpdmVUaW1lciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBjbGVhckludGVydmFsKGFjdGl2ZVRpbWVyKTsgLy8gU3RvcCB0aGUgdGltZXJcbiAgICAgICAgICAgICAgYWN0aXZlVGltZXIgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhY3RpdmVUaW1lciA9IG51bGw7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgdGltZXIgZGlzcGxheVxuICAgICAgICAgIHN0ZXBEaXYucmVtb3ZlQ2hpbGQodGltZXJEaXNwbGF5KTtcblxuICAgICAgICAgIC8vIEVuYWJsZSBidXR0b25zXG4gICAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpO1xuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuICAgICAgfVxuICB9LCAxMDAwKTtcbn1cblxuY29uc3Qgd2FpdCA9IChtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn07XG5cbmV4cG9ydCB7IHBhcmFtc1RvT2JqZWN0LCBzdGFydFRpbWVyLCB3YWl0IH07IiwiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gXCIuL2dsb2JhbHNcIlxuZXhwb3J0IHZhciBVSUQ6IHN0cmluZ1xuZXhwb3J0IHZhciBNT0NLTU9ERTogYm9vbGVhbiA9IGZhbHNlXG5pbXBvcnQgeyBsb2FkX2RhdGEsIGxvZ19kYXRhIH0gZnJvbSAnLi9jb25uZWN0b3InXG5pbXBvcnQgeyBwYXJhbXNUb09iamVjdCwgc3RhcnRUaW1lciwgd2FpdCB9IGZyb20gXCIuL3V0aWxzXCJcbmltcG9ydCB7IHBhcnNlSlNPTiB9IGZyb20gXCJqcXVlcnlcIlxuLy9pbXBvcnQgeyBnZXRfdXNlcl90cnVzdF9lZmZlY3QsIGdldF9hZGp1c3RlZF9haV9jb25maWRlbmNlfSBmcm9tIFwiLi9ydW5fdXNlcl9tb2RlbHNcIlxuXG5sZXQgVVNFUl9NT0RFTFNfUk9PVCA9IFwiaHR0cHM6Ly90ZWphc3NyaW5pdmFzYW4ucHl0aG9uYW55d2hlcmUuY29tL1wiXG5sZXQgdXNlcl9kZWNpc2lvbl9tb2RlbCA9IFwidXNlcl9hY2NlcHRhbmNlX21vZGVsLWxvZ2lzdGljcmVncmVzc2lvbi0wLjkzNDd0ZXN0ZjFcIlxubGV0IHRydXN0X2VmZmVjdF9tb2RlbCA9IFwidHJ1c3RfZWZmZWN0X21vZGVsLXN2bV9saW5lYXItMC40NjQ0dGVzdG1hZS0wLjkwOTV0ZXN0dGVkYVwiXG5cbnZhciBkYXRhOiBhbnlbXSA9IFtdXG5sZXQgcXVlc3Rpb25faSA9IC0xXG5sZXQgcXVlc3Rpb246IGFueSA9IG51bGxcbmxldCBpbml0aWFsX3VzZXJfZGVjaXNpb246IG51bWJlciA9IC0xXG5sZXQgZmluYWxfdXNlcl9kZWNpc2lvbjogbnVtYmVyID0gLTFcbmxldCBpbml0aWFsX3VzZXJfY29uZmlkZW5jZTogbnVtYmVyID0gLTFcbmxldCBmaW5hbF91c2VyX2NvbmZpZGVuY2U6IG51bWJlciA9IC0xXG5sZXQgYmFsYW5jZSA9IDBcblxubGV0IHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWw6IG51bWJlciA9IDVcbmxldCBwcmV2X3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWw6IG51bWJlciA9IC0xXG5cbmxldCBiZXRfdmFsX3JhdGlvOiBudW1iZXIgPSAxXG5sZXQgdGltZV9xdWVzdGlvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV90cnVzdF9kZWNpc2lvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydDogbnVtYmVyXG5sZXQgaW5zdHJ1Y3Rpb25faTogbnVtYmVyID0gMFxubGV0IGNvdW50X2V4aXRlZF9wYWdlOiBudW1iZXIgPSAwXG5cbmxldCBpbnRlcnZlbnRpb25fY29uZGl0aW9uX3NhdGlzZmllZDogYm9vbGVhbiA9IGZhbHNlXG5sZXQgaW50ZXJ2ZW50aW9uX2FwcGxpZWQ6IGJvb2xlYW4gPSBmYWxzZVxuXG5sZXQgdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbDogbnVtYmVyID0gMFxuXG52YXIgYWxsX3VzZXJfaW50ZXJhY3Rpb25zID0gW11cbnZhciBpbnRlcnZlbnRpb25fZGV0YWlscyA9IHt9XG52YXIgdHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YSA9IHt9XG5sZXQgZmluZG5ld2NvbmZfcmVzdWx0OiBhbnlcbmxldCBsbG1fcHJlZGljdGlvbl9yZXN1bHQ6IGFueVxuXG5sZXQgcHJlX3N1cnZleV9hbnN3ZXIxID0gLTFcbmxldCBwcmVfc3VydmV5X2Fuc3dlcjIgPSAtMVxuXG5mdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbWVzc2FnZSB8fCBcIkFzc2VydGlvbiBmYWlsZWRcIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5leHRfaW5zdHJ1Y3Rpb25zKGluY3JlbWVudDogbnVtYmVyKSB7XG4gICAgaW5zdHJ1Y3Rpb25faSArPSBpbmNyZW1lbnRcbiAgICBpZiAoc2tpcF90cnVzdF9yZXBvcnRpbmcgJiYgaW5zdHJ1Y3Rpb25faSA9PSA1KSB7XG4gICAgICAgIGluc3RydWN0aW9uX2kgKz0gaW5jcmVtZW50XG4gICAgfVxuXG4gICAgaWYgKGluc3RydWN0aW9uX2kgPT0gMCkge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfcHJldlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgfVxuICAgIGlmIChpbnN0cnVjdGlvbl9pID49IDYpIHtcbiAgICAgICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLnNob3coKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS52YWwoXCJTdGFydCBzdHVkeVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikudmFsKFwiTmV4dFwiKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA9PSA3KSB7XG4gICAgICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLmhpZGUoKVxuICAgICAgICAkKFwiI3ByZV9zdHVkeV9zdXJ2ZXlcIikuc2hvdygpXG4gICAgfVxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDgpIHtcbiAgICAgICAgJChcIiNwcmVfc3R1ZHlfc3VydmV5XCIpLmhpZGUoKVxuICAgICAgICAkKFwiI21haW5fYm94X2V4cGVyaW1lbnRcIikuc2hvdygpXG4gICAgICAgIG5leHRfcXVlc3Rpb24oKVxuICAgIH1cblxuICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLmNoaWxkcmVuKFwiOm5vdChpbnB1dClcIikuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgICAgJChlbCkuaGlkZSgpXG4gICAgfSlcbiAgICAkKGAjaW5zdHJ1Y3Rpb25zXyR7aW5zdHJ1Y3Rpb25faX1gKS5zaG93KClcbn1cbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoKzEpKVxuJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikub24oXCJjbGlja1wiLCAoKSA9PiBuZXh0X2luc3RydWN0aW9ucygtMSkpXG4kKFwiI2J1dHRvbl9zdGFydF9zdHVkeVwiKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICBpZiAocHJlX3N1cnZleV9hbnN3ZXIxID09IC0xIHx8IHByZV9zdXJ2ZXlfYW5zd2VyMiA9PSAtMSkge1xuICAgICAgICAkKFwiI2Vycm9yX21lc3NhZ2Vfc3VydmV5XCIpLnNob3coKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IGxvZ2dpbmdfZGF0YSA9IHtcbiAgICAgICAgICAgIFwidHlwZVwiOiBcInByZV9zdHVkeV9zdXJ2ZXlcIixcbiAgICAgICAgICAgIFwicHJlX3N1cnZleV9hbnN3ZXIxXCI6IHByZV9zdXJ2ZXlfYW5zd2VyMSxcbiAgICAgICAgICAgIFwicHJlX3N1cnZleV9hbnN3ZXIyXCI6IHByZV9zdXJ2ZXlfYW5zd2VyMlxuICAgICAgICB9XG4gICAgICAgIGxvZ19kYXRhKGxvZ2dpbmdfZGF0YSlcbiAgICAgICAgbmV4dF9pbnN0cnVjdGlvbnMoKzEpXG4gICAgfVxufSlcblxuJChcIiNhaV9mYW1pbGlhcml0eV8xXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gcHJlX3N1cnZleV9hbnN3ZXIxID0gMSlcbiQoXCIjYWlfZmFtaWxpYXJpdHlfMlwiKS5vbihcImNsaWNrXCIsICgpID0+IHByZV9zdXJ2ZXlfYW5zd2VyMSA9IDIpXG4kKFwiI2FpX2ZhbWlsaWFyaXR5XzNcIikub24oXCJjbGlja1wiLCAoKSA9PiBwcmVfc3VydmV5X2Fuc3dlcjEgPSAzKVxuJChcIiNhaV9mYW1pbGlhcml0eV80XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gcHJlX3N1cnZleV9hbnN3ZXIxID0gNClcbiQoXCIjYWlfdXNhZ2VfMVwiKS5vbihcImNsaWNrXCIsICgpID0+IHByZV9zdXJ2ZXlfYW5zd2VyMiA9IDEpXG4kKFwiI2FpX3VzYWdlXzJcIikub24oXCJjbGlja1wiLCAoKSA9PiBwcmVfc3VydmV5X2Fuc3dlcjIgPSAyKVxuJChcIiNhaV91c2FnZV8zXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gcHJlX3N1cnZleV9hbnN3ZXIyID0gMylcblxuJChcIiNidXR0b25fbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICBpZiAocXVlc3Rpb25faSAhPSAtMSkge1xuICAgICAgICBsZXQgbG9nZ2VkX2RhdGEgPSB7XG4gICAgICAgICAgICBcInF1ZXN0aW9uX2lcIjogcXVlc3Rpb25faSxcbiAgICAgICAgICAgIFwidXNlcl9iYWxhbmNlX3Bvc3RfaW50ZXJhY3Rpb25cIjogYmFsYW5jZSxcbiAgICAgICAgICAgIFwidXNlcl90cnVzdF92YWxfYmVmb3JlXCI6IHByZXZfdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCxcbiAgICAgICAgICAgIFwidXNlcl90cnVzdF92YWxfYWZ0ZXJcIjogdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCxcbiAgICAgICAgICAgIFwiaW5pdGlhbF91c2VyX2RlY2lzaW9uXCI6IGluaXRpYWxfdXNlcl9kZWNpc2lvbixcbiAgICAgICAgICAgIFwiZmluYWxfdXNlcl9kZWNpc2lvblwiOiBmaW5hbF91c2VyX2RlY2lzaW9uLFxuICAgICAgICAgICAgXCJpbml0aWFsX3VzZXJfY29uZmlkZW5jZVwiOiBpbml0aWFsX3VzZXJfY29uZmlkZW5jZSxcbiAgICAgICAgICAgIFwiZmluYWxfdXNlcl9jb25maWRlbmNlXCI6IGZpbmFsX3VzZXJfY29uZmlkZW5jZSxcbiAgICAgICAgfVxuXG4gICAgICAgIGxvZ2dlZF9kYXRhWyd0aW1lcyddID0ge1xuICAgICAgICAgICAgXCJpbml0aWFsX2RlY2lzaW9uXCI6IHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0IC0gdGltZV9xdWVzdGlvbl9zdGFydCxcbiAgICAgICAgICAgIFwiaW5pdGlhbF9jb25maWRlbmNlXCI6IHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQgLSB0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCxcbiAgICAgICAgICAgIFwiZmluYWxfZGVjaXNpb25cIjogdGltZV9maW5hbF9jb25maWRlbmNlX3N0YXJ0IC0gdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCxcbiAgICAgICAgICAgIFwiZmluYWxfY29uZmlkZW5jZVwiOiB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0IC0gdGltZV9maW5hbF9jb25maWRlbmNlX3N0YXJ0LFxuICAgICAgICAgICAgXCJ0cnVzdF9kZWNpc2lvblwiOiBEYXRlLm5vdygpIC0gdGltZV90cnVzdF9kZWNpc2lvbl9zdGFydCxcbiAgICAgICAgfVxuICAgICAgICBsb2dnZWRfZGF0YVsncXVlc3Rpb24nXSA9IHF1ZXN0aW9uXG4gICAgICAgIGxvZ2dlZF9kYXRhWydjb3VudF9leGl0ZWRfcGFnZSddID0gY291bnRfZXhpdGVkX3BhZ2VcbiAgICAgICAgbG9nZ2VkX2RhdGFbJ2ludGVydmVudGlvbl9kZXRhaWxzJ10gPSBpbnRlcnZlbnRpb25fZGV0YWlsc1xuICAgICAgICBsb2dnZWRfZGF0YVsndHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YSddID0gdHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YVxuICAgICAgICBsb2dfZGF0YShsb2dnZWRfZGF0YSlcbiAgICAgICAgY291bnRfZXhpdGVkX3BhZ2UgPSAwXG5cbiAgICB9XG4gICAgbmV4dF9xdWVzdGlvbigpXG59KTtcblxuJCgnI3JhbmdlX3ZhbCcpLm9uKCdpbnB1dCBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCA9ICgkKHRoaXMpLnZhbCgpISBhcyBudW1iZXIpXG4gICAgJChcIiNyYW5nZV90ZXh0XCIpLnRleHQoYEFmdGVyIHRoaXMgaW50ZXJhY3Rpb24sIHlvdXIgY3VycmVudCB0cnVzdCBpbiB0aGUgQUk6ICR7dXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAqIDEwfSAvIDEwMC5gKVxuICAgICQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG59KTtcblxuZnVuY3Rpb24gbWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24ob3B0aW9uKSB7XG4gICAgdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgaW5pdGlhbF91c2VyX2RlY2lzaW9uID0gb3B0aW9uXG4gICAgYXNzZXJ0KG9wdGlvbiA9PSAxIHx8IG9wdGlvbiA9PSAyLCBcIkludmFsaWQgb3B0aW9uIVwiKVxuICAgIGlmIChvcHRpb24gPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgIH1cbiAgICAkKFwiI2luaXRpYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG59XG4kKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbigxKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKDIpKVxuXG5hc3luYyBmdW5jdGlvbiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoY29uZl9sZXZlbCkge1xuICAgIHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UgPSBjb25mX2xldmVsXG4gICAgYXNzZXJ0KGNvbmZfbGV2ZWwgPT0gMSB8fCBjb25mX2xldmVsID09IDIgfHwgY29uZl9sZXZlbCA9PSAzLCBcIkludmFsaWQgb3B0aW9uIVwiKVxuICAgIGlmIChjb25mX2xldmVsID09IDEpIHtcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIGlmIChjb25mX2xldmVsID09IDIpIHtcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfVxuXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKSAgICBcblxuICAgIGdldF9haV9hc3Npc3RhbmNlKClcbn1cbiQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLm9uKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4gYXdhaXQgZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKDEpKVxuJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikub24oXCJjbGlja1wiLCBhc3luYyAoKSA9PiBhd2FpdCBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoMikpXG4kKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5vbihcImNsaWNrXCIsIGFzeW5jICgpID0+IGF3YWl0IGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSgzKSlcblxuXG5cbmFzeW5jIGZ1bmN0aW9uIGdldF91c2VyX2RlY2lzaW9uX3Byb2IoKSB7XG4gICAgLy8gUHJlcGFyZSBpbnB1dHMgZm9yIHRoZSB1c2VyIGRlY2lzaW9uIG1vZGVsXG4gICAgbGV0IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgbGV0IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlID0gaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZXJUcnVzdEhldXJpc3RpYyA9PSBcInVzZXJfcmVwb3J0ZWRcIikge1xuICAgICAgICB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSAodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAtIDUpIC8gMi41XG4gICAgfVxuICAgIGxldCB1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cyA9IHtcbiAgICAgICAgXCJ1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50XCI6IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQsXG4gICAgICAgIFwidXNlcl9pbml0aWFsX2NvbmZpZGVuY2VcIjogdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UsXG4gICAgICAgIFwiYWlfY29uZmlkZW5jZVwiOiBhaV9jb25maWRlbmNlLFxuICAgICAgICBcInVzZXJfY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJnZXRfdXNlcl9kZWNpc2lvbl9wcm9iXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHVzZXJfZGVjaXNpb25fbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0c1wiOiB1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cywgXG4gICAgICAgIFwidXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RcIjogcmVzdWx0W1wicHJlZF9wcm9ic1wiXVswXVsxXVxuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZXhhbWluZV9lZmZlY3Rfb2ZfdHJ1c3Rfb25fZGVjaXNpb25fbWFraW5nKCkge1xuICAgIC8vIFByZXBhcmUgaW5wdXQgdmFyaWFibGVzIGZvciB1c2VyIGRlY2lzaW9uIG1vZGVsXG4gICAgbGV0IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgbGV0IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlID0gaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZXJUcnVzdEhldXJpc3RpYyA9PSBcInVzZXJfcmVwb3J0ZWRcIikge1xuICAgICAgICB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSAodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAtIDUpIC8gMi41XG4gICAgfVxuICAgIGxldCB1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cyA9IHtcbiAgICAgICAgXCJ1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50XCI6IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQsXG4gICAgICAgIFwidXNlcl9pbml0aWFsX2NvbmZpZGVuY2VcIjogdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UsXG4gICAgICAgIFwiYWlfY29uZmlkZW5jZVwiOiBhaV9jb25maWRlbmNlLFxuICAgICAgICBcInVzZXJfY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJVc2VyIGRlY2lzaW9uIG1vZGVsIGlucHV0czogXCIsIHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzKVxuXG4gICAgbGV0IGFsZGlmZl9yZXN1bHQ6IGFueVxuICAgIHRyeSB7XG4gICAgICAgIGFsZGlmZl9yZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJleGFtaW5lX2VmZmVjdF9vZl90cnVzdF9vbl9kZWNpc2lvbl9tYWtpbmdcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwiMnN0ZXAtdHJ1c3Qtc3R1ZHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxfbmFtZTogdXNlcl9kZWNpc2lvbl9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkodXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cblxuICAgIHJldHVybiBhbGRpZmZfcmVzdWx0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZpbmRfYmVzdF9haWNvbmZfdG9fZGlzcGxheSh1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0KSB7XG4gICAgLy8gUHJlcGFyZSBpbnB1dCB2YXJpYWJsZXMgZm9yIHVzZXIgZGVjaXNpb24gbW9kZWxcbiAgICBsZXQgdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCA9IE51bWJlcihpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICBsZXQgdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UgPSBpbml0aWFsX3VzZXJfY29uZmlkZW5jZVxuICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgbGV0IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICBpZiAodXNlclRydXN0SGV1cmlzdGljID09IFwidXNlcl9yZXBvcnRlZFwiKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IGZpbmRuZXdjb25mX2lucHV0X3ZhcmlhYmxlcyA9IHtcbiAgICAgICAgXCJ1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50XCI6IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQsXG4gICAgICAgIFwidXNlcl9pbml0aWFsX2NvbmZpZGVuY2VcIjogdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgICAgICBcInVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3RcIjogdXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RfbmV1dHJhbF90cnVzdCxcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgZmluZG5ld2NvbmZfcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgVVNFUl9NT0RFTFNfUk9PVCArIFwiZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHVzZXJfZGVjaXNpb25fbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGZpbmRuZXdjb25mX2lucHV0X3ZhcmlhYmxlcyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGZpbmRuZXdjb25mX3Jlc3VsdFxufVxuXG5hc3luYyBmdW5jdGlvbiBwcmVwYXJlX2xsbV9hc3Npc3RhbmNlKCkge1xuICAgIGNvbnNvbGUubG9nKFwiUHJlcGFyaW5nIExMTSBhc3Npc3RhbmNlLi4uXCIpXG4gICAgbGV0IGxsbV9pbnB1dHMgPSB7XG4gICAgICAgIFwicXVlc3Rpb25cIjogcXVlc3Rpb24hW1wicXVlc3Rpb25cIl0sXG4gICAgICAgIFwib3B0aW9uMVwiOiBxdWVzdGlvbiFbXCJvcHRpb24xXCJdLFxuICAgICAgICBcIm9wdGlvbjJcIjogcXVlc3Rpb24hW1wib3B0aW9uMlwiXSxcbiAgICAgICAgXCJjb3JyZWN0X29wdGlvblwiOiBxdWVzdGlvbiFbXCJjb3JyZWN0X29wdGlvblwiXSxcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgbGxtX3ByZWRpY3Rpb25fcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgVVNFUl9NT0RFTFNfUk9PVCArIFwiZ2V0X2xsbV9wcmVkaWN0aW9uXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHVzZXJfZGVjaXNpb25fbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGxsbV9pbnB1dHMpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbiAgICBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdID0gbGxtX3ByZWRpY3Rpb25fcmVzdWx0W1wibGxtX3ByZWRpY3RlZF9vcHRpb25cIl1cbiAgICBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdID0gbGxtX3ByZWRpY3Rpb25fcmVzdWx0W1wibGxtX2NvbmZpZGVuY2VcIl1cbiAgICBxdWVzdGlvbiFbXCJsbG1fYW5zd2VyXCJdID0gbGxtX3ByZWRpY3Rpb25fcmVzdWx0W1wibGxtX2Fuc3dlclwiXVxuICAgIHF1ZXN0aW9uIVtcImFpX2V4cGxhbmF0aW9uXCJdID0gbGxtX3ByZWRpY3Rpb25fcmVzdWx0W1wibGxtX2V4cGxhbmF0aW9uXCJdXG4gICAgcXVlc3Rpb24hW1wiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIl0gPSBsbG1fcHJlZGljdGlvbl9yZXN1bHRbXCJsbG1fY291bnRlcmV4cGxhbmF0aW9uXCJdXG4gICAgcXVlc3Rpb24hW1wiYWlfaXNfY29ycmVjdFwiXSA9IGxsbV9wcmVkaWN0aW9uX3Jlc3VsdFtcImxsbV9pc19jb3JyZWN0XCJdXG4gICAgcXVlc3Rpb24hW1wibGxtX2lucHV0XCJdID0gbGxtX3ByZWRpY3Rpb25fcmVzdWx0W1wibGxtX2lucHV0XCJdXG4gICAgcXVlc3Rpb24hW1wibGxtX291dHB1dFwiXSA9IGxsbV9wcmVkaWN0aW9uX3Jlc3VsdFtcImxsbV9vdXRwdXRcIl1cbiAgICBjb25zb2xlLmxvZyhcIkxMTSBwcmVkaWN0aW9uIHJlc3VsdDogXCIsIGxsbV9wcmVkaWN0aW9uX3Jlc3VsdClcbiAgICByZXR1cm4gbGxtX3ByZWRpY3Rpb25fcmVzdWx0XG59XG4gICAgXG5cbmFzeW5jIGZ1bmN0aW9uIGdldF9haV9hc3Npc3RhbmNlKCkge1xuICAgIGNvbnNvbGUubG9nKFwiR2V0dGluZyBBSSBhc3Npc3RhbmNlLi4uXCIpXG4gICAgaWYgKHVzZUxMTUFzc2lzdGFudCA9PSB0cnVlKSB7XG4gICAgICAgICQoXCIjYWlfcHJlZGljdGlvbl9zcGFuXCIpLmh0bWwoXCJUaGUgQUkgaXMgdGhpbmtpbmcuLi5cIilcbiAgICAgICAgJChcIiNhaV9wcmVkaWN0aW9uX3NwYW5cIikuc2hvdygpXG4gICAgICAgICQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwoXCJcIilcbiAgICAgICAgYXdhaXQgcHJlcGFyZV9sbG1fYXNzaXN0YW5jZSgpXG4gICAgfVxuXG4gICAgbGV0IGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZXJUcnVzdEhldXJpc3RpYyA9PSBcInVzZXJfcmVwb3J0ZWRcIikge1xuICAgICAgICB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSAodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAtIDUpIC8gMi41XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgdXNlciByZXBvcnRlZCB0cnVzdCB2YWx1ZTogXCIsIHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwpXG4gICAgfVxuICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge1xuICAgICAgICBcImludGVydmVudGlvbl9hcHBsaWVkXCI6IGZhbHNlLCBcbiAgICAgICAgXCJ0cnVzdF9sZXZlbF9hdF9zdGFydF9vZl9pbnRlcmFjdGlvblwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWxcbiAgICBcbiAgICB9XG5cbiAgICBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwibm9uZVwiIHx8IChpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSkpIHtcbiAgICAgICAgLy8gTm8gaW50ZXJ2ZW50aW9uLCBqdXN0IHNob3cgdGhlIEFJIGFzc2lzdGFuY2UgdGhhdCBpcyBhbHJlYWR5IHBvcHVsYXRlZCBpbiB0aGUgc3BhblxuICAgICAgICBjb25zb2xlLmxvZyhcIk5vdCBhcHBseWluZyBhbnkgaW50ZXJ2ZW50aW9uLlwiKVxuICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICB9XG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiY29uZmlkZW5jZV9tYW5pcFwiKSB7XG4gICAgICAgIC8vIE1vZGlmeSBBSSBjb25maWRlbmNlXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm5vbmVcIikgfHwgXG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHlpbmcgQUkgY29uZmlkZW5jZSBtYW5pcHVsYXRpb24gaW50ZXJ2ZW50aW9uLlwiKVxuICAgICAgICAgICAgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJmaXhlZFwiKSB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSB0byBBSSdzIGNvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICAvLyAoSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlIGNhbiBiZSBuZWdhdGl2ZSlcbiAgICAgICAgICAgICAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgICAgICAgICAgICAgIGxldCBuZXdfY29uZmlkZW5jZSA9IE1hdGgubWluKDEsIGFpX2NvbmZpZGVuY2UgKyBJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UpXG4gICAgICAgICAgICAgICAgbmV3X2NvbmZpZGVuY2UgPSBNYXRoLm1heCgwLjUsIG5ld19jb25maWRlbmNlKVxuICAgICAgICAgICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gU3RyaW5nKCggbmV3X2NvbmZpZGVuY2UgKiAxMDApLnRvRml4ZWQoMCkpICsgXCIlXCJcbiAgICAgICAgICAgICAgICBsZXQgY29uZmlkZW5jZV9jaGFuZ2UgPSAobmV3X2NvbmZpZGVuY2UgLSBhaV9jb25maWRlbmNlKS50b0ZpeGVkKDIpXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBY3R1YWwgQUkgY29uZmlkZW5jZTogXCIsIHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0sIFwiLCBDb25maWRlbmNlIHNob3duIHRvIHVzZXI6IFwiLCBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSlcblxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiY29uZl9hY3R1YWxcIl0gPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2Rpc3BsYXllZFwiXSA9IGRpc3BsYXllZF9haV9jb25maWRlbmNlXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2NoYW5nZVwiXSA9IGNvbmZpZGVuY2VfY2hhbmdlXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJpbnRlcnZlbnRpb25fYXBwbGllZFwiXSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJhZGFwdGl2ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGFkYXB0aXZlIHN0cmF0ZWd5XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbmRpdGlvbnMgZm9yIGFwcGx5aW5nICdjb25maWRlbmNlIG1hbmlwdWxhdGlvbicgaW50ZXJ2ZW50aW9uIG5vdCBzYXRpc2ZpZWQuXCIpXG4gICAgICAgIH1cblxuICAgIH0gXG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYWlfZXhwbGFuYXRpb25cIikge1xuICAgICAgICAvLyBBZGQgQUkgZXhwbGFuYXRpb25cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibm9uZVwiKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX3VuZGVydHJ1c3RcIiAmJiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCkgfHxcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV9vdmVydHJ1c3RcIiAmJiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPiBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIEFJIGV4cGxhbmF0aW9uIGludGVydmVudGlvbi5cIilcbiAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiZml4ZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBleHBsYW5hdGlvblwiKVxuICAgICAgICAgICAgICAgIGxldCBleHBsYW5hdGlvbl9zaG93bjogc3RyaW5nID0gIXF1ZXN0aW9uIVtcImFpX2V4cGxhbmF0aW9uXCJdID8gXCJObyBleHBsYW5hdGlvbiBwcm92aWRlZFwiIDogcXVlc3Rpb24hW1wiYWlfZXhwbGFuYXRpb25cIl1cbiAgICAgICAgICAgICAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3NwYW5cIikuaHRtbChleHBsYW5hdGlvbl9zaG93bilcbiAgICAgICAgICAgICAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX2RpdlwiKS5zaG93KClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImV4cGxhbmF0aW9uX3Nob3duXCJdID0gZXhwbGFuYXRpb25fc2hvd25cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgY29uc3QgYWlfZXhwbGFuYXRpb25fZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaV9leHBsYW5hdGlvbl9kaXZcIilcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICBzdGFydFRpbWVyKDE1LCBhaV9leHBsYW5hdGlvbl9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHJlYWQgdGhlIGV4cGxhbmF0aW9uLlwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImFkYXB0aXZlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb25kaXRpb25zIGZvciBhcHBseWluZyAnQUkgZXhwbGFuYXRpb24nIGludGVydmVudGlvbiBub3Qgc2F0aXNmaWVkLlwiKVxuICAgICAgICB9XG5cbiAgICB9XG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIikge1xuICAgICAgICAvLyBBZGQgQUkgZXhwbGFuYXRpb25cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibm9uZVwiKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX3VuZGVydHJ1c3RcIiAmJiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCkgfHxcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV9vdmVydHJ1c3RcIiAmJiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPiBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIEFJIGV4cGxhbmF0aW9uIGludGVydmVudGlvbi5cIilcbiAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiZml4ZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBleHBsYW5hdGlvblwiKVxuICAgICAgICAgICAgICAgIGxldCBleHBsYW5hdGlvbl9zaG93bjogc3RyaW5nID0gIXF1ZXN0aW9uIVtcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uXCJdID8gXCJObyBleHBsYW5hdGlvbiBwcm92aWRlZFwiIDogcXVlc3Rpb24hW1wiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIl1cbiAgICAgICAgICAgICAgICAkKFwiI2FpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX3NwYW5cIikuaHRtbChleHBsYW5hdGlvbl9zaG93bilcbiAgICAgICAgICAgICAgICAkKFwiI2FpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdlwiKS5zaG93KClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImV4cGxhbmF0aW9uX3Nob3duXCJdID0gZXhwbGFuYXRpb25fc2hvd25cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgY29uc3QgYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXZcIilcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICBzdGFydFRpbWVyKDEwLCBhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHJlYWQgdGhlIGV4cGxhbmF0aW9uLlwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImFkYXB0aXZlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb25kaXRpb25zIGZvciBhcHBseWluZyAnQUkgZXhwbGFuYXRpb24nIGludGVydmVudGlvbiBub3Qgc2F0aXNmaWVkLlwiKVxuICAgICAgICB9XG5cbiAgICB9IFxuICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcImJvdGhfZXhwbGFuYXRpb25fdHlwZXNcIikge1xuICAgICAgICBhc3NlcnQgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX3VuZGVyYW5kb3ZlcnRydXN0XCIsIFwiR29hbCBmb3IgJ2JvdGggZXhwbGFuYXRpb24gdHlwZXMnIGludGVydmVudGlvbiBzaG91bGQgYmUgJ21pdGlnYXRlX3VuZGVyYW5kb3ZlcnRydXN0J1wiKVxuICAgICAgICBpZiAodXNlcl9jdXJyZW50X3RydXN0X2xldmVsIDwgSW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBleHBsYW5hdGlvbiBpbnRlcnZlbnRpb24gZm9yIHVuZGVydHJ1c3RcIilcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBleHBsYW5hdGlvblwiKVxuICAgICAgICAgICAgbGV0IGV4cGxhbmF0aW9uX3Nob3duOiBzdHJpbmcgPSAhcXVlc3Rpb24hW1wiYWlfZXhwbGFuYXRpb25cIl0gPyBcIk5vIGV4cGxhbmF0aW9uIHByb3ZpZGVkXCIgOiBxdWVzdGlvbiFbXCJhaV9leHBsYW5hdGlvblwiXVxuICAgICAgICAgICAgJChcIiNhaV9leHBsYW5hdGlvbl9zcGFuXCIpLmh0bWwoZXhwbGFuYXRpb25fc2hvd24pXG4gICAgICAgICAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX2RpdlwiKS5zaG93KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJleHBsYW5hdGlvbl9zaG93blwiXSA9IGV4cGxhbmF0aW9uX3Nob3duXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICBjb25zdCBhaV9leHBsYW5hdGlvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2V4cGxhbmF0aW9uX2RpdlwiKVxuICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICBzdGFydFRpbWVyKDE1LCBhaV9leHBsYW5hdGlvbl9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHJlYWQgdGhlIGV4cGxhbmF0aW9uLlwiKVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvbk92ZXJ0cnVzdFRocmVzaG9sZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBjb250cmFzdGl2ZSBleHBsYW5hdGlvbiBpbnRlcnZlbnRpb24gZm9yIG92ZXJ0cnVzdFwiKVxuICAgICAgICAgICAgbGV0IGV4cGxhbmF0aW9uX3Nob3duOiBzdHJpbmcgPSAhcXVlc3Rpb24hW1wiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIl0gPyBcIk5vIGV4cGxhbmF0aW9uIHByb3ZpZGVkXCIgOiBxdWVzdGlvbiFbXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvblwiXVxuICAgICAgICAgICAgJChcIiNhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9zcGFuXCIpLmh0bWwoZXhwbGFuYXRpb25fc2hvd24pXG4gICAgICAgICAgICAkKFwiI2FpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdlwiKS5zaG93KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJleHBsYW5hdGlvbl9zaG93blwiXSA9IGV4cGxhbmF0aW9uX3Nob3duXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICBjb25zdCBhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdlwiKVxuICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICBzdGFydFRpbWVyKDEwLCBhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHJlYWQgdGhlIGV4cGxhbmF0aW9uLlwiKVxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYWlfdGhpbmtpbmdcIikge1xuICAgICAgICAvLyBBZGQgQUkgdGhpbmtpbmdcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm5vbmVcIikgfHxcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV91bmRlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsIDwgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfb3ZlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBBSSB0aGlua2luZyBpbnRlcnZlbnRpb24uXCIpXG4gICAgICAgICAgICBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImZpeGVkXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNob3dpbmcgQUkgdGhpbmtpbmdcIilcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgJChcIiNhaV90aGlua2luZ19kaXZcIikuc2hvdygpXG4gICAgICAgICAgICAgICAgYXdhaXQgd2FpdCgxMDAwMClcbiAgICAgICAgICAgICAgICAkKFwiI2FpX3RoaW5raW5nX2RpdlwiKS5oaWRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJhZGFwdGl2ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJhaV9mb3JjZWRfcGF1c2VcIikge1xuICAgICAgICAvLyBBZGQgQUkgZm9yY2VkIHBhdXNlXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJub25lXCIpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHlpbmcgQUkgZm9yY2VkIHBhdXNlIGludGVydmVudGlvbi5cIilcbiAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiZml4ZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBBSSBmb3JjZWQgcGF1c2VcIilcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgY29uc3QgYWlfYXNzaXN0YW5jZV9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2Fzc2lzdGFuY2VfZGl2XCIpXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKSxcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKSxcbiAgICAgICAgICAgICAgICBdICAgIFxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZXIoMTAsIGFpX2Fzc2lzdGFuY2VfZGl2LCBidXR0b25zLCBudWxsLCBcIlBsZWFzZSB0YWtlIHNvbWUgdGltZSB0byBjYXJlZnVsbHkgY29uc2lkZXIgdGhlIEFJJ3Mgc3VnZ2VzdGlvbi5cIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJhZGFwdGl2ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gXG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYm90aF9wYXVzZV90eXBlc1wiKSB7XG4gICAgICAgIGFzc2VydCAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJhbmRvdmVydHJ1c3RcIiwgXCJHb2FsIGZvciAnYm90aCBwYXVzZSB0eXBlcycgaW50ZXJ2ZW50aW9uIHNob3VsZCBiZSAnbWl0aWdhdGVfdW5kZXJhbmRvdmVydHJ1c3QnXCIpXG4gICAgICAgIGlmICh1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCBJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIEFJIHRoaW5raW5nIGludGVydmVudGlvbiBmb3IgdW5kZXJ0cnVzdFwiKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIEFJIHRoaW5raW5nXCIpXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuICAgICAgICAgICAgJChcIiNhaV90aGlua2luZ19kaXZcIikuc2hvdygpXG4gICAgICAgICAgICBhd2FpdCB3YWl0KDEwMDAwKVxuICAgICAgICAgICAgJChcIiNhaV90aGlua2luZ19kaXZcIikuaGlkZSgpXG4gICAgICAgIH0gXG4gICAgICAgIGVsc2UgaWYgKHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvbk92ZXJ0cnVzdFRocmVzaG9sZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBBSSBmb3JjZWQgcGF1c2UgaW50ZXJ2ZW50aW9uIGZvciBvdmVydHJ1c3RcIilcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBBSSBmb3JjZWQgcGF1c2VcIilcbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgIGNvbnN0IGFpX2Fzc2lzdGFuY2VfZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaV9hc3Npc3RhbmNlX2RpdlwiKVxuICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgICAgICAgICBdICAgIFxuICAgICAgICAgICAgc3RhcnRUaW1lcigxMCwgYWlfYXNzaXN0YW5jZV9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHRha2Ugc29tZSB0aW1lIHRvIGNhcmVmdWxseSBjb25zaWRlciB0aGUgQUkncyBzdWdnZXN0aW9uLlwiKVxuICAgICAgICB9XG4gICAgfVxuXG5cblxuXG4gICAgLy9pbnRlcnZlbnRpb25fZGV0YWlsc1snYWN0dWFsX2FpX2NvbmZpZGVuY2UnXSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAvL2ludGVydmVudGlvbl9kZXRhaWxzWydkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSddID0gZGlzcGxheWVkX2FpX2NvbmZpZGVuY2VcbiAgICBjb25zb2xlLmxvZyhcIkFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uIERldGFpbHM6IFwiLCBpbnRlcnZlbnRpb25fZGV0YWlscylcblxuICAgICQoXCIjYWlfcHJlZGljdGlvbl9zcGFuXCIpLmh0bWwoXCJPcHRpb24gXCIgKyBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgICQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwoZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UpXG5cbiAgICAkKFwiI2FpX2Fzc2lzdGFuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjZmluYWxfdXNlcl9kZWNpc2lvbl9kaXZcIikuc2hvdygpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldF90cnVzdF9lZmZlY3QoKSB7XG4gICAgLy8gR2V0IHRydXN0IGVmZmVjdCBmb3IgdGhpcyBpbnRlcmFjdGlvblxuICAgIGxldCBpbml0aWFsX3VzZXJfY29ycmVjdG5lc3MgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBhaV9jb3JyZWN0bmVzcyA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBmaW5hbF91c2VyX2NvcnJlY3RuZXNzID0gTnVtYmVyKGZpbmFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0pXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdHJ1c3RfZWZmZWN0X2lucHV0cyA9IHtcbiAgICAgICAgXCJpbml0aWFsX3VzZXJfY29ycmVjdG5lc3NcIjogaW5pdGlhbF91c2VyX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImFpX2NvcnJlY3RuZXNzXCI6IGFpX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImZpbmFsX3VzZXJfY29ycmVjdG5lc3NcIjogZmluYWxfdXNlcl9jb3JyZWN0bmVzcyxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJUcnVzdCBlZmZlY3QgaW5wdXRzOiBcIiwgdHJ1c3RfZWZmZWN0X2lucHV0cylcbiAgICAvL2xldCB0cnVzdF9lZmZlY3QgPSBnZXRfdXNlcl90cnVzdF9lZmZlY3QodHJ1c3RfZWZmZWN0X2lucHV0cylcbiAgICBsZXQgcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJnZXRfdHJ1c3RfZWZmZWN0XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHRydXN0X2VmZmVjdF9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkodHJ1c3RfZWZmZWN0X2lucHV0cyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJUcnVzdCBlZmZlY3QgcHJlZGljdGlvbiByZXN1bHQ6IFwiLCByZXN1bHQpXG4gICAgbGV0IHRydXN0X2VmZmVjdCA9IGF3YWl0IHJlc3VsdFtcInRydXN0X2VmZmVjdFwiXVxuXG4gICAgdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwgKyB0cnVzdF9lZmZlY3RcbiAgICB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0ge1xuICAgICAgICBcIm1vZGVsX2lucHV0c1wiOiB0cnVzdF9lZmZlY3RfaW5wdXRzLFxuICAgICAgICBcInByZWRpY3RlZF90cnVzdF9lZmZlY3RcIjogdHJ1c3RfZWZmZWN0LFxuICAgICAgICBcInVzZXJfbmV3X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgfVxuICAgIHJldHVybiB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhXG59XG5cbmZ1bmN0aW9uIG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbihvcHRpb24pIHtcbiAgICB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgZmluYWxfdXNlcl9kZWNpc2lvbiA9IG9wdGlvblxuICAgIGFzc2VydChvcHRpb24gPT0gMSB8fCBvcHRpb24gPT0gMiwgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICBpZiAob3B0aW9uID09IDEpIHtcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgICQoXCIjZmluYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbn1cbiQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24oMSkpXG4kKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9maW5hbF91c2VyX2RlY2lzaW9uKDIpKVxuXG5mdW5jdGlvbiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKGNvbmZfbGV2ZWwpIHtcbiAgICB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIGZpbmFsX3VzZXJfY29uZmlkZW5jZSA9IGNvbmZfbGV2ZWxcbiAgICBhc3NlcnQoY29uZl9sZXZlbCA9PSAxIHx8IGNvbmZfbGV2ZWwgPT0gMiB8fCBjb25mX2xldmVsID09IDMsIFwiSW52YWxpZCBvcHRpb24hXCIpXG4gICAgaWYgKGNvbmZfbGV2ZWwgPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2UgaWYgKGNvbmZfbGV2ZWwgPT0gMikge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG5cbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICBzaG93X3Jlc3VsdCgpXG59XG4kKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKDEpKVxuJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSgyKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoMykpXG5cblxuYXN5bmMgZnVuY3Rpb24gc2hvd19yZXN1bHQoKSB7XG5cbiAgICBsZXQgY29ycmVjdF9vcHRpb246IG51bWJlciA9IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdXG4gICAgbGV0IHVzZXJfaXNfY29ycmVjdDogYm9vbGVhbiA9IGNvcnJlY3Rfb3B0aW9uID09IGZpbmFsX3VzZXJfZGVjaXNpb25cblxuICAgIGxldCBhaV9pc19jb3JyZWN0OiBib29sZWFuID0gcXVlc3Rpb24hW1wiYWlfaXNfY29ycmVjdFwiXVxuICAgIGxldCBtZXNzYWdlID0gXCJDb3JyZWN0IGFuc3dlcjogPGI+T3B0aW9uIFwiICsgY29ycmVjdF9vcHRpb24gKyBcIjwvYj4uPGJyPlwiXG4gICAgaWYgKHVzZXJfaXNfY29ycmVjdCkge1xuICAgICAgICBtZXNzYWdlICs9IFwiWW91IHBpY2tlZCBPcHRpb24gXCIgKyBmaW5hbF91c2VyX2RlY2lzaW9uICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+Y29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIllvdSBwaWNrZWQgT3B0aW9uIFwiICsgZmluYWxfdXNlcl9kZWNpc2lvbiArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+aW5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGlmIChhaV9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5jb3JyZWN0PGI+PC9zcGFuPi48YnI+XCJcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPmluY29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+WW91IHJlY2VpdmUgYSByZXdhcmQgb2YgJDAuMTAuPC9iPjwvc3Bhbj5cIlxuICAgICAgICBiYWxhbmNlICs9IDAuMVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIjxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPllvdSBkbyBub3QgcmVjZWl2ZSBhbnkgcmV3YXJkLjwvYj48L3NwYW4+XCJcbiAgICB9XG5cbiAgICBtZXNzYWdlICs9IFwiPGJyPlwiXG4gICAgLy9pZiAoc3VjY2Vzcykge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gYFlvdSBnYWluICQkeyhiZXRfdmFsKmJldF92YWxfcmF0aW8pLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlICs9IGJldF92YWwqYmV0X3ZhbF9yYXRpb1xuICAgIC8vfSBlbHNlIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IGBZb3UgbG9zZSAkJHsoYmV0X3ZhbC8xLjApLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlIC09IGJldF92YWwvMS4wXG4gICAgLy8gICAgYmFsYW5jZSA9IE1hdGgubWF4KDAsIGJhbGFuY2UpXG4gICAgLy99XG4gICAgJChcIiNiYWxhbmNlXCIpLnRleHQoYEJhbGFuY2U6ICQke2JhbGFuY2UudG9GaXhlZCgyKX0gKyAkMS4wYClcbiAgICAkKFwiI3Jlc3VsdF9zcGFuXCIpLmh0bWwobWVzc2FnZSlcbiAgICAvLyQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5zaG93KClcbiAgICAvLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICBpZiAoc2tpcF90cnVzdF9yZXBvcnRpbmcpICAge1xuICAgICAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLnNob3coKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgJChcIiN1c2VyX3RydXN0X3JlcG9ydF9kaXZcIikuc2hvdygpXG4gICAgfVxuXG4gICAgLy90cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0gYXdhaXQgZ2V0X3RydXN0X2VmZmVjdCgpXG4gICAgdXBkYXRlX3VzZXJfdHJ1c3RfbGV2ZWxfZXN0aW1hdGUoKVxuXG4gICAgLy8kKCcjcmFuZ2VfdmFsJykuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxufVxuXG5mdW5jdGlvbiB1cGRhdGVfdXNlcl90cnVzdF9sZXZlbF9lc3RpbWF0ZSgpIHtcbiAgICBpZiAodXNlclRydXN0SGV1cmlzdGljID09IFwic21vb3RoZWRfY29uZndlaWdodGVkX3RydXN0XCIpIHtcbiAgICAgICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICAgICAgbGV0IHRydXN0X2VmZmVjdCA9IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0gPyBhaV9jb25maWRlbmNlIDogLWFpX2NvbmZpZGVuY2VcbiAgICAgICAgbGV0IHByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgICAgICB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsID0gc21vb3RoaW5nUGFyYW0gKiB0cnVzdF9lZmZlY3QgKyAoMS1zbW9vdGhpbmdQYXJhbSkgKiB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgICAgIHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEgPSB7XG4gICAgICAgICAgICBcInByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsXCI6IHByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsLFxuICAgICAgICAgICAgXCJ0cnVzdF9lZmZlY3RcIjogdHJ1c3RfZWZmZWN0LFxuICAgICAgICAgICAgXCJuZXdfZXN0aW1hdGVkX3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJPbGQgZXN0aW1hdGVkIHRydXN0IGxldmVsOiBcIiArIHByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsICsgXCIsIHRydXN0IGVmZmVjdDogXCIgKyB0cnVzdF9lZmZlY3QgKyBcIiwgbmV3IGVzdGltYXRlZCB0cnVzdCBsZXZlbDogXCIgKyB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsKVxuICAgIH1cbn1cblxuLy8kKFwiI2J1dHRvbl9wbGFjZV9iZXRcIikub24oXCJjbGlja1wiLCBzaG93X3Jlc3VsdClcblxuZnVuY3Rpb24gc3RhcnRfdGltZXJfZm9yX2luaXRpYWxfZGVjaXNpb24oKSB7XG4gICAgY29uc3QgaW5pdGlhbF91c2VyX2RlY2lzaW9uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5pdGlhbF91c2VyX2RlY2lzaW9uX2RpdlwiKVxuICAgIGNvbnN0IGJ1dHRvbnMgPSBbXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKSxcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLFxuICAgIF1cbiAgICBzdGFydFRpbWVyKDEwLCBpbml0aWFsX3VzZXJfZGVjaXNpb25fZGl2LCBidXR0b25zLCBudWxsLCBcIlBsZWFzZSByZWFkIHRoZSBxdWVzdGlvbiBhbmQgb3B0aW9ucyBjbG9zZWx5LlwiKVxufVxuXG5mdW5jdGlvbiBuZXh0X3F1ZXN0aW9uKCkge1xuICAgIC8vIHJlc3RvcmUgcHJldmlvdXMgc3RhdGUgb2YgVUlcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG5cbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG5cbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYWlfYXNzaXN0YW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNhaV9wcmVkaWN0aW9uX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2FpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2FpX3RoaW5raW5nX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2luaXRpYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2ZpbmFsX3VzZXJfZGVjaXNpb25fZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjZmluYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKCcjcmFuZ2VfdmFsJykucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiN1c2VyX3RydXN0X3JlcG9ydF9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNidXR0b25fcGxhY2VfYmV0XCIpLmhpZGUoKVxuICAgICQoXCIjYnV0dG9uX25leHRcIikuaGlkZSgpXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5oaWRlKClcbiAgICBpZiAocXVlc3Rpb25faSA9PSAtMSkge1xuICAgICAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChcIi1cIilcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgICQoXCIjcmFuZ2VfdGV4dFwiKS50ZXh0KGBCZWZvcmUgdGhpcyBpbnRlcmFjdGlvbiwgeW91ciB0cnVzdCBpbiB0aGUgQUk6ICR7dXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAqIDEwfSAvIDEwMC5gKVxuICAgIH1cbiAgICAkKFwiI3JhbmdlX3ZhbFwiKS52YWwodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbClcbiAgICBwcmV2X3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgPSB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsXG4gICAgXG4gICAgcXVlc3Rpb25faSArPSAxXG4gICAgaWYgKHF1ZXN0aW9uX2kgPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLmhpZGUoKVxuICAgICAgICBpZiAoTU9DS01PREUpIHtcbiAgICAgICAgICAgICQoXCIjbWFpbl9ib3hfZW5kX21vY2tcIikuc2hvdygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiI21haW5fYm94X2VuZFwiKS5zaG93KClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgcXVlc3Rpb24gPSBkYXRhW3F1ZXN0aW9uX2ldXG4gICAgXG4gICAgJChcIiNxdWVzdGlvbl9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wicXVlc3Rpb25cIl0pXG4gICAgJChcIiNvcHRpb24xX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJvcHRpb24xXCJdKVxuICAgICQoXCIjb3B0aW9uMl9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wib3B0aW9uMlwiXSlcbiAgICAvLyQoXCIjYWlfcHJlZGljdGlvbl9zcGFuXCIpLmh0bWwoXCJPcHRpb24gXCIgKyBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgIC8vJChcIiNhaV9jb25maWRlbmNlX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdKVxuXG4gICAgLy8gc2V0IGJldCB2YWx1ZSByYXRpb1xuICAgIGlmKHF1ZXN0aW9uLmhhc093blByb3BlcnR5KFwicmV3YXJkX3JhdGlvXCIpKSB7XG4gICAgICAgIGxldCBbcmF0aW8xLCByYXRpbzJdID0gcXVlc3Rpb25bXCJyZXdhcmRfcmF0aW9cIl1cbiAgICAgICAgcmF0aW8xID0gTnVtYmVyKHJhdGlvMSlcbiAgICAgICAgcmF0aW8yID0gTnVtYmVyKHJhdGlvMilcbiAgICAgICAgYmV0X3ZhbF9yYXRpbyA9IHJhdGlvMS9yYXRpbzJcbiAgICB9IGVsc2Uge1xuICAgICAgICBiZXRfdmFsX3JhdGlvID0gMVxuICAgIH1cblxuICAgIHRpbWVfcXVlc3Rpb25fc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgJChcIiNwcm9ncmVzc1wiKS50ZXh0KGBQcm9ncmVzczogJHtxdWVzdGlvbl9pICsgMX0gLyAke2RhdGEubGVuZ3RofWApXG5cbiAgICBzdGFydF90aW1lcl9mb3JfaW5pdGlhbF9kZWNpc2lvbigpXG59XG5cbi8vIGdldCB1c2VyIGlkIGFuZCBsb2FkIHF1ZXVlXG4vLyB0cnkgdG8gc2VlIGlmIHN0YXJ0IG92ZXJyaWRlIHdhcyBwYXNzZWRcbmNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG5jb25zdCBzdGFydE92ZXJyaWRlID0gdXJsUGFyYW1zLmdldCgnc3RhcnQnKTtcbmNvbnN0IFVJREZyb21VUkwgPSB1cmxQYXJhbXMuZ2V0KFwidWlkXCIpXG5nbG9iYWxUaGlzLnVybF9kYXRhID0gcGFyYW1zVG9PYmplY3QodXJsUGFyYW1zLmVudHJpZXMoKSlcblxuaWYgKFVJREZyb21VUkwgIT0gbnVsbCkge1xuICAgIGdsb2JhbFRoaXMudWlkID0gVUlERnJvbVVSTCBhcyBzdHJpbmdcbiAgICBpZiAoZ2xvYmFsVGhpcy51aWQgPT0gXCJwcm9saWZpY19yYW5kb21cIikge1xuICAgICAgICBsZXQgcXVldWVfaWQgPSBgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCl9YC5wYWRTdGFydCgzLCBcIjBcIilcbiAgICAgICAgZ2xvYmFsVGhpcy51aWQgPSBgJHt1cmxQYXJhbXMuZ2V0KFwicHJvbGlmaWNfcXVldWVfbmFtZVwiKX0vJHtxdWV1ZV9pZH1gXG4gICAgfVxufSBlbHNlIGlmIChERVZNT0RFKSB7XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBcImRlbW9cIlxufSBlbHNlIHtcbiAgICBsZXQgVUlEX21heWJlOiBhbnkgPSBudWxsXG4gICAgd2hpbGUgKFVJRF9tYXliZSA9PSBudWxsKSB7XG4gICAgICAgIFVJRF9tYXliZSA9IHByb21wdChcIkVudGVyIHlvdXIgdXNlciBpZC4gUGxlYXNlIGdldCBpbiB0b3VjaCBpZiB5b3Ugd2VyZSBub3QgYXNzaWduZWQgYW4gaWQgYnV0IHdpc2ggdG8gcGFydGljaXBhdGUgaW4gdGhpcyBleHBlcmltZW50LlwiKVxuICAgIH1cbiAgICBnbG9iYWxUaGlzLnVpZCA9IFVJRF9tYXliZSFcbn1cblxubGV0IGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwczogbnVtYmVyW10gPSBbXVxuaWYgKGdsb2JhbFRoaXMudWlkLmluY2x1ZGVzKFwiMzQzXCIpKSB7XG4gICAgaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzID0gWzcsIDgsIDksIDE3LCAxOCwgMTksIDI3LCAyOCwgMjldXG59IGVsc2UgaWYgKGdsb2JhbFRoaXMudWlkLmluY2x1ZGVzKFwiNDM0XCIpKSB7XG4gICAgaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzID0gWzcsIDgsIDksIDE3LCAxOCwgMTksIDI3LCAyOCwgMjldXG59IGVsc2UgaWYgKGdsb2JhbFRoaXMudWlkLmluY2x1ZGVzKFwiNzM1XCIpKSB7XG4gICAgaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzID0gWzEwLCAxMSwgMTIsIDEzLCAxNCwgMjUsIDI2LCAyNywgMjgsIDI5XVxufVxuXG4vL2NvbnN0IHZhbGlkQUlJbnRlcnZlbnRpb25zID0gW1wibm9uZVwiLCBcImR1bW15XCIsIFwiY29uZmlkZW5jZV9pbmZsYXRpb25cIiwgXCJjb25maWRlbmNlX2luZmxhdGlvbl9maXhlZFwiLCBcImNvbmZpZGVuY2VfZGVmbGF0aW9uXCJdXG4vL2xldCBBSUludGVydmVudGlvblR5cGUgPSB1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3R5cGVcIilcbi8vbGV0IEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3RocmVzaG9sZFwiKSlcbi8vbGV0IEludGVydmVudGlvbkZpeGVkQ29uZkluY3JlYXNlID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fZml4ZWRjb25maW5jcmVhc2VcIikpXG5jb25zdCB2YWxpZEludGVydmVudGlvbkdvYWxzID0gW1wibm9uZVwiLCBcIm1pdGlnYXRlX3VuZGVydHJ1c3RcIiwgXCJtaXRpZ2F0ZV9vdmVydHJ1c3RcIiwgXCJtaXRpZ2F0ZV91bmRlcmFuZG92ZXJ0cnVzdFwiXVxubGV0IEFJSW50ZXJ2ZW50aW9uR29hbCA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fZ29hbFwiKVxuaWYgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBudWxsKSB7QUlJbnRlcnZlbnRpb25Hb2FsID0gXCJub25lXCJ9XG5pZiAoIXZhbGlkSW50ZXJ2ZW50aW9uR29hbHMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25Hb2FsISkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uIEdvYWw6IFwiICsgQUlJbnRlcnZlbnRpb25Hb2FsKVxufVxuXG5jb25zdCB2YWxpZEludGVydmVudGlvblR5cGVzID0gW1wibm9uZVwiLCBcImR1bW15XCIsIFwiY29uZmlkZW5jZV9tYW5pcFwiLCBcImFpX2V4cGxhbmF0aW9uXCIsIFwiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIiwgXCJib3RoX2V4cGxhbmF0aW9uX3R5cGVzXCIsIFwiYWlfdGhpbmtpbmdcIiwgXCJhaV9mb3JjZWRfcGF1c2VcIiwgXCJib3RoX3BhdXNlX3R5cGVzXCJdXG5sZXQgQUlJbnRlcnZlbnRpb25UeXBlID0gdXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90eXBlXCIpXG5pZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IG51bGwpIHtBSUludGVydmVudGlvblR5cGUgPSBcIm5vbmVcIn0gXG5pZiAoIXZhbGlkSW50ZXJ2ZW50aW9uVHlwZXMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25UeXBlISkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uOiBcIiArIEFJSW50ZXJ2ZW50aW9uVHlwZSlcbn1cblxuY29uc3QgdmFsaWRJbnRlcnZlbnRpb25TdHJhdGVnaWVzID0gW1wiZHVtbXlcIiwgXCJmaXhlZFwiLCBcImFkYXB0aXZlXCJdXG5sZXQgQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fc3RyYXRlZ3lcIilcbmlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IG51bGwpIHtBSUludGVydmVudGlvblN0cmF0ZWd5ID0gXCJkdW1teVwifVxuaWYgKCF2YWxpZEludGVydmVudGlvblN0cmF0ZWdpZXMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25TdHJhdGVneSEpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBSSBBc3Npc3RhbmNlIEludGVydmVudGlvbiBTdHJhdGVneTogXCIgKyBBSUludGVydmVudGlvblN0cmF0ZWd5KVxufVxuXG4vLyBJbnRlcnZlbnRpb24tc3BlY2lmaWMgcGFyYW1ldGVyc1xubGV0IEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3RocmVzaG9sZFwiKSlcbmlmIChJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPT0gbnVsbCkge0ludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCA9IC0xfVxubGV0IEludGVydmVudGlvblRydXN0VGhyZXNob2xkID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdHJ1c3RfdGhyZXNob2xkXCIpKVxuaWYgKEludGVydmVudGlvblRydXN0VGhyZXNob2xkID09IG51bGwpIHtJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCA9IDB9XG5sZXQgSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fZml4ZWRjb25mY2hhbmdlXCIpKVxuaWYgKEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA9PSBudWxsKSB7SW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlID0gMH1cbmxldCBJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdW5kZXJ0cnVzdF90aHJlc2hvbGRcIikpXG5pZiAoSW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZCA9PSBudWxsKSB7SW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZCA9IEludGVydmVudGlvblRydXN0VGhyZXNob2xkfVxubGV0IEludGVydmVudGlvbk92ZXJ0cnVzdFRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX292ZXJ0cnVzdF90aHJlc2hvbGRcIikpXG5pZiAoSW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkID09IG51bGwpIHtJbnRlcnZlbnRpb25PdmVydHJ1c3RUaHJlc2hvbGQgPSBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZH1cblxubGV0IHVzZXJUcnVzdEhldXJpc3RpYyA9IHVybFBhcmFtcy5nZXQoXCJ1c2VyX3RydXN0X2hldXJpc3RpY1wiKVxuaWYgKHVzZXJUcnVzdEhldXJpc3RpYyA9PSBudWxsKSB7dXNlclRydXN0SGV1cmlzdGljID0gXCJ1c2VyX3JlcG9ydGVkXCJ9XG5sZXQgc21vb3RoaW5nUGFyYW0gPSBOdW1iZXIodXJsUGFyYW1zLmdldChcInNtb290aGluZ19wYXJhbVwiKSlcbmlmIChzbW9vdGhpbmdQYXJhbSA9PSBudWxsKSB7c21vb3RoaW5nUGFyYW0gPSAxfVxuXG5sZXQgc2tpcF90cnVzdF9yZXBvcnRpbmcgPSB1cmxQYXJhbXMuZ2V0KFwic2tpcF90cnVzdF9yZXBvcnRpbmdcIikgPT0gXCJ0cnVlXCJcbmlmIChza2lwX3RydXN0X3JlcG9ydGluZyA9PSBudWxsKSB7c2tpcF90cnVzdF9yZXBvcnRpbmcgPSBmYWxzZX1cblxubGV0IHVzZUxMTUFzc2lzdGFudCA9IHVybFBhcmFtcy5nZXQoXCJ1c2VfbGxtX2Fzc2lzdGFudFwiKSA9PSBcInRydWVcIlxuaWYgKHVzZUxMTUFzc2lzdGFudCA9PSBudWxsKSB7dXNlTExNQXNzaXN0YW50ID0gZmFsc2V9XG5cbmNvbnNvbGUubG9nKFwiQUlJbnRlcnZlbnRpb25Hb2FsOiBcIiwgQUlJbnRlcnZlbnRpb25Hb2FsKVxuY29uc29sZS5sb2coXCJBSUludGVydmVudGlvblR5cGU6IFwiLCBBSUludGVydmVudGlvblR5cGUpXG5jb25zb2xlLmxvZyhcIkFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3k6IFwiLCBBSUludGVydmVudGlvblN0cmF0ZWd5KVxuY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQ6IFwiLCBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQpXG5jb25zb2xlLmxvZyhcIkludGVydmVudGlvblRydXN0VGhyZXNob2xkOiBcIiwgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpXG5jb25zb2xlLmxvZyhcIkludGVydmVudGlvblVuZGVydHJ1c3RUaHJlc2hvbGQ6IFwiLCBJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkKVxuY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb25PdmVydHJ1c3RUaHJlc2hvbGQ6IFwiLCBJbnRlcnZlbnRpb25PdmVydHJ1c3RUaHJlc2hvbGQpXG5jb25zb2xlLmxvZyhcIkludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZTogXCIsIEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSlcbmNvbnNvbGUubG9nKFwidXNlclRydXN0SGV1cmlzdGljOiBcIiwgdXNlclRydXN0SGV1cmlzdGljKVxuY29uc29sZS5sb2coXCJza2lwX3RydXN0X3JlcG9ydGluZzogXCIsIHNraXBfdHJ1c3RfcmVwb3J0aW5nKVxuY29uc29sZS5sb2coXCJ1c2VMTE1Bc3Npc3RhbnQ6IFwiLCB1c2VMTE1Bc3Npc3RhbnQpXG5cbmlmIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV91bmRlcnRydXN0XCIpIHtcbiAgICBhc3NlcnQoSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQgPD0gMCwgXCJUcnVzdCB0aHJlc2hvbGQgZm9yIG1pdGlnYXRpbmcgdW5kZXJ0cnVzdCBjYW5ub3QgYmUgcG9zaXRpdmUuXCIpXG4gICAgYXNzZXJ0KEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA+PSAwLCBcIkNvbmZpZGVuY2UgY2hhbmdlIGZvciBtaXRpZ2F0aW5nIHVuZGVydHJ1c3QgY2Fubm90IGJlIG5lZ2F0aXZlLlwiKVxufSBlbHNlIGlmIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV9vdmVydHJ1c3RcIikge1xuICAgIGFzc2VydChJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCA+PSAwLCBcIlRydXN0IHRocmVzaG9sZCBmb3IgbWl0aWdhdGluZyBvdmVydHJ1c3QgY2Fubm90IGJlIG5lZ2F0aXZlLlwiKVxuICAgIGFzc2VydChJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgPD0gMCwgXCJDb25maWRlbmNlIGNoYW5nZSBmb3IgbWl0aWdhdGluZyBvdmVydHJ1c3QgY2Fubm90IGJlIHBvc2l0aXZlLlwiKVxufVxuXG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX2dvYWxcIl0gPSBBSUludGVydmVudGlvbkdvYWxcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fdHlwZVwiXSA9IEFJSW50ZXJ2ZW50aW9uVHlwZVxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl9zdHJhdGVneVwiXSA9IEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3lcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fdGhyZXNob2xkXCJdID0gSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkXG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX2ZpeGVkY29uZmNoYW5nZVwiXSA9IEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZVxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcInVzZXJfdHJ1c3RfaGV1cmlzdGljXCJdID0gdXNlclRydXN0SGV1cmlzdGljXG5nbG9iYWxUaGlzLnVybF9kYXRhW1wic2tpcF90cnVzdF9yZXBvcnRpbmdcIl0gPSBza2lwX3RydXN0X3JlcG9ydGluZ1xuZ2xvYmFsVGhpcy51cmxfZGF0YVtcInNtb290aGluZ19wYXJhbVwiXSA9IHNtb290aGluZ1BhcmFtXG5nbG9iYWxUaGlzLnVybF9kYXRhW1widXNlX2xsbV9hc3Npc3RhbnRcIl0gPSB1c2VMTE1Bc3Npc3RhbnRcblxuLy8gdmVyc2lvbiBmb3IgcGFwZXJcbmlmIChnbG9iYWxUaGlzLnVpZC5zdGFydHNXaXRoKFwiZGVtb19wYXBlclwiKSkge1xuICAgIE1PQ0tNT0RFID0gdHJ1ZVxufSBlbHNlIHtcblxufVxuY29uc29sZS5sb2coXCJSdW5uaW5nIHdpdGggVUlEXCIsIGdsb2JhbFRoaXMudWlkKVxubG9hZF9kYXRhKCkuY2F0Y2goKF9lcnJvcikgPT4ge1xuICAgIC8vYWxlcnQoXCJJbnZhbGlkIHVzZXIgaWQuXCIpXG4gICAgY29uc29sZS5sb2coXCJJbnZhbGlkIHVzZXIgaWQuXCIpXG4gICAgY29uc29sZS5sb2coZ2xvYmFsVGhpcy51aWQhKVxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxufVxuKS50aGVuKChuZXdfZGF0YSkgPT4ge1xuICAgIGRhdGEgPSBuZXdfZGF0YVxuICAgIGlmIChzdGFydE92ZXJyaWRlICE9IG51bGwpIHtcbiAgICAgICAgcXVlc3Rpb25faSA9IHBhcnNlSW50KHN0YXJ0T3ZlcnJpZGUpIC0gMVxuICAgICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0aW5nIGZyb21cIiwgcXVlc3Rpb25faSlcbiAgICB9XG4gICAgLy8gbmV4dF9xdWVzdGlvbigpXG4gICAgbmV4dF9pbnN0cnVjdGlvbnMoMClcbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5zaG93KClcbiAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG59KVxuXG5jb25zb2xlLmxvZyhcIlN0YXJ0aW5nIHNlc3Npb24gd2l0aCBVSUQ6XCIsIGdsb2JhbFRoaXMudWlkISlcblxubGV0IGFsZXJ0X2FjdGl2ZSA9IGZhbHNlXG5kb2N1bWVudC5vbnZpc2liaWxpdHljaGFuZ2UgPSAoKSA9PiB7XG4gICAgaWYgKCFhbGVydF9hY3RpdmUpIHtcbiAgICAgICAgY291bnRfZXhpdGVkX3BhZ2UgKz0gMVxuICAgICAgICBhbGVydF9hY3RpdmUgPSB0cnVlXG4gICAgICAgIGlmICghKGdsb2JhbFRoaXMudWlkIS5zdGFydHNXaXRoKFwiZGVtb1wiKSkgJiYgIShERVZNT0RFKSkge1xuICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2UgZG9uJ3QgbGVhdmUgdGhlIHBhZ2UuIElmIHlvdSBkbyBzbyBhZ2Fpbiwgd2UgbWF5IHJlc3RyaWN0IHBheWluZyB5b3UuXCIpXG4gICAgICAgIH1cbiAgICAgICAgYWxlcnRfYWN0aXZlID0gZmFsc2VcbiAgICB9XG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU0VSVkVSX0xPR19ST09UIiwiYXN5bmMiLCJsb2dfZGF0YSIsImRhdGEiLCJNT0NLTU9ERSIsImNvbnNvbGUiLCJsb2ciLCJnbG9iYWxUaGlzIiwidXJsX2RhdGEiLCJ1aWQiLCIkIiwiYWpheCIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9qZWN0IiwicmVwbGFjZSIsInBheWxvYWQiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJlIiwiYWN0aXZlVGltZXIiLCJzdGFydFRpbWVyIiwiZHVyYXRpb24iLCJzdGVwRGl2IiwiYnV0dG9ucyIsImNhbGxiYWNrIiwibWVzc2FnZSIsInNob3dUaW1lUmVtYWluaW5nIiwiY2xlYXJJbnRlcnZhbCIsImZvckVhY2giLCJidXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJ0aW1lckRpc3BsYXkiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpZCIsInN0eWxlIiwiZm9udFdlaWdodCIsIm1hcmdpblRvcCIsImFwcGVuZENoaWxkIiwicmVtYWluaW5nVGltZSIsInRleHRDb250ZW50Iiwic2V0SW50ZXJ2YWwiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUF0dHJpYnV0ZSIsIndhaXQiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInRpbWVfcXVlc3Rpb25fc3RhcnQiLCJ0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0IiwidGltZV90cnVzdF9kZWNpc2lvbl9zdGFydCIsInRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0IiwidGltZV9maW5hbF9jb25maWRlbmNlX3N0YXJ0IiwicXVlc3Rpb25faSIsInF1ZXN0aW9uIiwiaW5pdGlhbF91c2VyX2RlY2lzaW9uIiwiZmluYWxfdXNlcl9kZWNpc2lvbiIsImluaXRpYWxfdXNlcl9jb25maWRlbmNlIiwiZmluYWxfdXNlcl9jb25maWRlbmNlIiwiYmFsYW5jZSIsInVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwiLCJwcmV2X3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwiLCJiZXRfdmFsX3JhdGlvIiwiaW5zdHJ1Y3Rpb25faSIsImNvdW50X2V4aXRlZF9wYWdlIiwidXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCIsImludGVydmVudGlvbl9kZXRhaWxzIiwidHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YSIsImxsbV9wcmVkaWN0aW9uX3Jlc3VsdCIsInByZV9zdXJ2ZXlfYW5zd2VyMSIsInByZV9zdXJ2ZXlfYW5zd2VyMiIsImFzc2VydCIsImNvbmRpdGlvbiIsIm5leHRfaW5zdHJ1Y3Rpb25zIiwiaW5jcmVtZW50Iiwic2tpcF90cnVzdF9yZXBvcnRpbmciLCJhdHRyIiwicmVtb3ZlQXR0ciIsInNob3ciLCJ2YWwiLCJoaWRlIiwibmV4dF9xdWVzdGlvbiIsImNoaWxkcmVuIiwiZWFjaCIsIl8iLCJlbCIsIm1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uIiwib3B0aW9uIiwiRGF0ZSIsIm5vdyIsImdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSIsImNvbmZfbGV2ZWwiLCJ1c2VMTE1Bc3Npc3RhbnQiLCJodG1sIiwibGxtX2lucHV0cyIsIlVTRVJfTU9ERUxTX1JPT1QiLCJtb2RlbF9uYW1lIiwicHJlcGFyZV9sbG1fYXNzaXN0YW5jZSIsImRpc3BsYXllZF9haV9jb25maWRlbmNlIiwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsIiwidXNlclRydXN0SGV1cmlzdGljIiwiQUlJbnRlcnZlbnRpb25UeXBlIiwiQUlJbnRlcnZlbnRpb25Hb2FsIiwiSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQiLCJBSUludGVydmVudGlvblN0cmF0ZWd5IiwiYWlfY29uZmlkZW5jZSIsIk51bWJlciIsIm5ld19jb25maWRlbmNlIiwiTWF0aCIsIm1pbiIsIkludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSIsIm1heCIsIlN0cmluZyIsInRvRml4ZWQiLCJjb25maWRlbmNlX2NoYW5nZSIsImV4cGxhbmF0aW9uX3Nob3duIiwiZ2V0RWxlbWVudEJ5SWQiLCJJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkIiwiSW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkIiwiZ2V0X2FpX2Fzc2lzdGFuY2UiLCJtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24iLCJnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlIiwiY29ycmVjdF9vcHRpb24iLCJ1c2VyX2lzX2NvcnJlY3QiLCJhaV9pc19jb3JyZWN0IiwidGV4dCIsInRydXN0X2VmZmVjdCIsInByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsIiwic21vb3RoaW5nUGFyYW0iLCJ1cGRhdGVfdXNlcl90cnVzdF9sZXZlbF9lc3RpbWF0ZSIsInNob3dfcmVzdWx0IiwibGVuZ3RoIiwicmF0aW8xIiwicmF0aW8yIiwib24iLCJsb2dnZWRfZGF0YSIsInRoaXMiLCJ1cmxQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN0YXJ0T3ZlcnJpZGUiLCJVSURGcm9tVVJMIiwiZW50cmllcyIsInJlc3VsdCIsInZhbHVlIiwicGFyYW1zVG9PYmplY3QiLCJxdWV1ZV9pZCIsImZsb29yIiwicmFuZG9tIiwicGFkU3RhcnQiLCJVSURfbWF5YmUiLCJwcm9tcHQiLCJpbnRlcnZlbnRpb25fYWxsb3dlZF90aW1lc3RlcHMiLCJpbmNsdWRlcyIsIkVycm9yIiwiSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkIiwic3RhcnRzV2l0aCIsImdldEpTT04iLCJsb2FkX2RhdGEiLCJjYXRjaCIsIl9lcnJvciIsInJlbG9hZCIsInRoZW4iLCJuZXdfZGF0YSIsInBhcnNlSW50IiwiYWxlcnRfYWN0aXZlIiwib252aXNpYmlsaXR5Y2hhbmdlIiwiYWxlcnQiXSwic291cmNlUm9vdCI6IiJ9