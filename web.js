(()=>{"use strict";var t={d:(e,i)=>{for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{o:()=>i});let e="https://tejassrinivasan.pythonanywhere.com/";var i=!1;let n="https://tejassrinivasan.pythonanywhere.com/",o="user_acceptance_model-logisticregression-0.9347testf1";var a=[];let c,l,_,r,s,d=-1,u=null,p=-1,f=-1,b=-1,v=-1,h=0,g=5,m=-1,w=1,y=0,A=0,k=!1,x=0;var T={},I={};let O;function N(t,e){if(!t)throw e||"Assertion failed"}function S(t){y+=t,H&&5==y&&(y+=t),0==y?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),y>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==y&&($("#main_box_instructions").hide(),$("#main_box_experiment").show(),q()),$("#main_box_instructions").children(":not(input)").each(((t,e)=>{$(e).hide()})),$(`#instructions_${y}`).show()}function j(t){r=Date.now(),p=t,N(1==t||2==t,"Invalid option!"),1==t?($("#button_initial_decision_option1").attr("activedecision","true"),$("#button_initial_decision_option2").removeAttr("activedecision")):($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").attr("activedecision","true")),$("#initial_user_confidence_div").show(),$("#button_initial_decision_option1").attr("disabled","true"),$("#button_initial_decision_option2").attr("disabled","true"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled")}function D(t){l=Date.now(),b=t,N(1==t||2==t||3==t,"Invalid option!"),1==t?($("#button_initial_confidence_option1").attr("activedecision","true"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision")):2==t?($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").attr("activedecision","true"),$("#button_initial_confidence_option3").removeAttr("activedecision")):($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").attr("activedecision","true")),$("#button_initial_confidence_option1").attr("disabled","true"),$("#button_initial_confidence_option2").attr("disabled","true"),$("#button_initial_confidence_option3").attr("disabled","true"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),async function(){console.log("Getting AI assistance..."),T={};let t=u.ai_confidence,e=x;if(z&&(e=(g-5)/2.5,console.log("Using user reported trust value: ",g)),"none"==Y)t=u.ai_confidence,T={};else if("mitigate_undertrust"==Y)if(e<0){let e=await P(),i=e.al_diff;console.log("User's likelihood of going with the AI's prediction: ",e.actual_trust.acceptance_likelihood),console.log("User's likelihood of going with the AI's prediction with neutral trust: ",e.neutral_trust.acceptance_likelihood),console.log("Acceptance Likelihood Diff: ",i);let n=e.neutral_trust.acceptance_likelihood;if(T.acceptance_likelihood_results=e,k=!1,i>=W&&(k=!0),T.intervention_condition_satisfied=k,console.log("Intervention condition satisfied: ",k),"fixed"==G&&p!=u.ai_prediction)if(console.log("Intervention allowed:",L.includes(d)),L.includes(d))if("confidence_manip"==B){let i=Number(u.ai_confidence.replace("%",""))/100,n=Math.min(1,i+C);t=String((100*n).toFixed(0))+"%";let o=(n-i).toFixed(2);T.conf_actual=u.ai_confidence,T.conf_new=t,T.conf_inflation=o,T["acceptance_likelihood-actualconf_actualtrust"]=e.actual_trust.acceptance_likelihood,T["acceptance_likelihood-actualconf_neutraltrust"]=e.neutral_trust.acceptance_likelihood,T.intervention_applied=!0}else"ai_explanation"==B?T.intervention_applied=!0:"none"==B&&(T.intervention_applied=!1);else console.log("Intervention not allowed at this timestep"),t=u.ai_confidence;else if("adaptive"==G&&(console.log("Intervention condition satisfied: ",k),console.log("Intervention allowed:",L.includes(d)),console.log(d,L),k&&L.includes(d)))if("confidence_manip"==B){O=await R(n),t=String((100*O.new_conf_to_display).toFixed(0))+"%";let i=Number(u.ai_confidence.replace("%",""))/100,o=(O.new_conf_to_display-i).toFixed(2);T.findnewconf_results=O,T.conf_actual=u.ai_confidence,T.conf_new=t,T.conf_inflation=o,T["acceptance_likelihood-actualconf_actualtrust"]=e.actual_trust.acceptance_likelihood,T["acceptance_likelihood-actualconf_neutraltrust"]=e.neutral_trust.acceptance_likelihood,T["acceptance_likelihood-newconf_actualtrust"]=O.new_conf_acceptance_likelihood,T.intervention_applied=!0}else"ai_explanation"==B?T.intervention_applied=!0:"none"==B&&(T.intervention_applied=!1)}else t=u.ai_confidence,T.intervention_applied=!1;else if("mitigate_overtrust"==Y)if(e>0){let e=await P(),i=e.al_diff;console.log("User's likelihood of going with the AI's prediction: ",e.actual_trust.acceptance_likelihood),console.log("User's likelihood of going with the AI's prediction with neutral trust: ",e.neutral_trust.acceptance_likelihood),console.log("Acceptance Likelihood Diff: ",i);let n=e.neutral_trust.acceptance_likelihood;if(T.acceptance_likelihood_results=e,k=!1,i>=W&&(k=!0),T.intervention_condition_satisfied=k,"fixed"==G)if("confidence_manip"==B){let i=Number(u.ai_confidence.replace("%",""))/100,n=Math.max(.5,Math.min(1,i-C));t=String((100*n).toFixed(0))+"%",T.conf_actual=u.ai_confidence,T.conf_new=t,T["acceptance_likelihood-actualconf_actualtrust"]=e.actual_trust.acceptance_likelihood,T["acceptance_likelihood-actualconf_neutraltrust"]=e.neutral_trust.acceptance_likelihood,T.intervention_applied=!0}else"ai_explanation"==B?T.intervention_applied=!0:"none"==B&&(T.intervention_applied=!1);else"adaptive"==G&&k&&("confidence_manip"==B?(O=await R(n),t=String((100*O.new_conf_to_display).toFixed(0))+"%",T.findnewconf_results=O,T.conf_actual=u.ai_confidence,T.conf_new=t,T["acceptance_likelihood-actualconf_actualtrust"]=e.actual_trust.acceptance_likelihood,T["acceptance_likelihood-actualconf_neutraltrust"]=e.neutral_trust.acceptance_likelihood,T["acceptance_likelihood-newconf_actualtrust"]=O.new_conf_acceptance_likelihood,T.intervention_applied=!0):"ai_explanation"==B?T.intervention_applied=!0:"none"==B&&(T.intervention_applied=!1))}else t=u.ai_confidence,T={intervention_applied:!1};T.trust_level_at_start_of_interaction=e,T.actual_ai_confidence=u.ai_confidence,T.displayed_ai_confidence=t,console.log("AI Assistance Intervention Details: ",T),$("#ai_prediction_span").html("Option "+u.ai_prediction),$("#ai_confidence_span").html(t),$("#ai_assistance_div").show(),$("#final_user_decision_div").show()}()}async function P(){let t=Number(p==u.ai_prediction),e=b,i=Number(u.ai_confidence.replace("%",""))/100,a=x;z&&(a=(g-5)/2.5);let c,l={user_ai_initial_agreement:t,user_initial_confidence:e,ai_confidence:i,user_current_trust_level:a,timestep:d};console.log("User decision model inputs: ",l);try{c=await $.ajax(n+"examine_effect_of_trust_on_decision_making",{data:JSON.stringify({project:"2step-trust-study",model_name:o,payload:JSON.stringify(l)}),type:"POST",contentType:"application/json"})}catch(t){console.log("ERROR!"),console.log(t)}return c}async function R(t){let e=Number(p==u.ai_prediction),i=b,a=(Number(u.ai_confidence.replace("%","")),x);z&&(a=(g-5)/2.5);let c={user_ai_initial_agreement:e,user_initial_confidence:i,user_current_trust_level:a,timestep:d,user_acceptance_likelihood_neutral_trust:t};try{O=await $.ajax(n+"find_best_aiconf_to_display",{data:JSON.stringify({project:"2step-trust-study",model_name:o,payload:JSON.stringify(c)}),type:"POST",contentType:"application/json"})}catch(t){console.log("ERROR!"),console.log(t)}return O}function J(t){s=Date.now(),f=t,N(1==t||2==t,"Invalid option!"),1==t?($("#button_final_decision_option1").attr("activedecision","true"),$("#button_final_decision_option2").removeAttr("activedecision")):($("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").attr("activedecision","true")),$("#final_user_confidence_div").show(),$("#button_final_decision_option1").attr("disabled","true"),$("#button_final_decision_option2").attr("disabled","true"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled")}function U(t){_=Date.now(),v=t,N(1==t||2==t||3==t,"Invalid option!"),1==t?($("#button_final_confidence_option1").attr("activedecision","true"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision")):2==t?($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").attr("activedecision","true"),$("#button_final_confidence_option3").removeAttr("activedecision")):($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").attr("activedecision","true")),$("#button_final_confidence_option1").attr("disabled","true"),$("#button_final_confidence_option2").attr("disabled","true"),$("#button_final_confidence_option3").attr("disabled","true"),async function(){let t=u.correct_option,e=t==f,i=u.ai_is_correct,o="Correct answer: <b>Option "+t+"</b>.<br>";o+=e?"You picked Option "+f+", which was <span class='color_correct'><b>correct</b></span>.<br>":"You picked Option "+f+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",o+=i?"The AI picked Option "+u.ai_prediction+", which was <span class='color_correct'><b>correct<b></span>.<br>":"The AI picked Option "+u.ai_prediction+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",e?(o+="<span class='color_correct'><b>You receive a reward of $0.10.</b></span>",h+=.1):o+="<span class='color_incorrect'><b>You do not receive any reward.</b></span>",o+="<br>",$("#balance").text(`Balance: $${h.toFixed(2)} + $1.0`),$("#result_span").html(o),$("#result_span").show(),H?$("#button_next").show():$("#user_trust_report_div").show(),I=await async function(){let t,e={initial_user_correctness:Number(p==u.correct_option),ai_correctness:Number(u.ai_prediction==u.correct_option),final_user_correctness:Number(f==u.correct_option),ai_confidence:Number(u.ai_confidence.replace("%",""))/100,user_current_trust_level:x,timestep:d};console.log("Trust effect inputs: ",e);try{t=await $.ajax(n+"get_trust_effect",{data:JSON.stringify({project:"2step-trust-study",model_name:"trust_effect_model-svm_linear-0.4644testmae-0.9095testteda",payload:JSON.stringify(e)}),type:"POST",contentType:"application/json"})}catch(t){console.log("ERROR!"),console.log(t)}console.log("Trust effect prediction result: ",t);let i=await t.trust_effect;return x+=i,I={model_inputs:e,predicted_trust_effect:i,user_new_trust_level:x}}()}()}function q(){if($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").removeAttr("activedecision"),$("#button_initial_decision_option1").removeAttr("disabled"),$("#button_initial_decision_option2").removeAttr("disabled"),$("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled"),$("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").removeAttr("activedecision"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),$("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled"),$("#ai_assistance_div").hide(),$("#initial_user_confidence_div").hide(),$("#final_user_decision_div").hide(),$("#final_user_confidence_div").hide(),$("#range_val").removeAttr("disabled"),$("#user_trust_report_div").hide(),$("#button_place_bet").hide(),$("#button_next").hide(),$("#result_span").hide(),-1==d?$("#range_text").text("-"):$("#range_text").text(`Before this interaction, your trust in the AI: ${10*g} / 100.`),$("#range_val").val(g),m=g,d+=1,d>=a.length)return $("#main_box_experiment").hide(),void(i?$("#main_box_end_mock").show():$("#main_box_end").show());if(u=a[d],$("#question_span").html(u.question),$("#option1_span").html(u.option1),$("#option2_span").html(u.option2),u.hasOwnProperty("reward_ratio")){let[t,e]=u.reward_ratio;t=Number(t),e=Number(e),w=t/e}else w=1;c=Date.now(),$("#progress").text(`Progress: ${d+1} / ${a.length}`)}$("#button_instructions_next").on("click",(()=>S(1))),$("#button_instructions_prev").on("click",(()=>S(-1))),$("#button_next").on("click",(()=>{if(-1!=d){let t={question_i:d,user_balance_post_interaction:h,user_trust_val_before:m,user_trust_val_after:g,initial_user_decision:p,final_user_decision:f,initial_user_confidence:b,final_user_confidence:v};t.times={initial_decision:r-c,initial_confidence:l-r,final_decision:s-l,final_confidence:_-s,trust_decision:Date.now()-_},t.question=u,t.count_exited_page=A,t.intervention_details=T,t.trust_effect_prediction_data=I,async function(t){if(i)console.log("logged (mock)",t);else{t.url_data=globalThis.url_data,console.log("Data"),"study_id"in t.url_data||(t.url_data.study_id="trialrun_studies"),t.url_data.queue_id=globalThis.uid,console.log("logged",t),console.log("Logging to",e+"log");try{return await $.ajax(e+"log",{data:JSON.stringify({project:"2step-trust-study-interventions/"+t.url_data.study_id,uid:globalThis.uid.replace("/","_")+"_"+t.url_data.prolific_id,payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"})}catch(t){console.log(t)}}}(t),A=0}q()})),$("#range_val").on("input change",(function(){g=$(this).val(),$("#range_text").text(`After this interaction, your current trust in the AI: ${10*g} / 100.`),$("#button_next").show()})),$("#button_initial_decision_option1").on("click",(()=>j(1))),$("#button_initial_decision_option2").on("click",(()=>j(2))),$("#button_initial_confidence_option1").on("click",(()=>D(1))),$("#button_initial_confidence_option2").on("click",(()=>D(2))),$("#button_initial_confidence_option3").on("click",(()=>D(3))),$("#button_final_decision_option1").on("click",(()=>J(1))),$("#button_final_decision_option2").on("click",(()=>J(2))),$("#button_final_confidence_option1").on("click",(()=>U(1))),$("#button_final_confidence_option2").on("click",(()=>U(2))),$("#button_final_confidence_option3").on("click",(()=>U(3)));const E=new URLSearchParams(window.location.search),F=E.get("start"),M=E.get("uid");if(globalThis.url_data=function(t){const e={};for(const[i,n]of t)e[i]=n;return e}(E.entries()),null!=M){if(globalThis.uid=M,"prolific_random"==globalThis.uid){let t=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${E.get("prolific_queue_name")}/${t}`}}else{let t=null;for(;null==t;)t=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=t}let L=[];globalThis.uid.includes("343")||globalThis.uid.includes("434")?L=[7,8,9,17,18,19,27,28,29]:globalThis.uid.includes("735")&&(L=[10,11,12,13,14,25,26,27,28,29]);let Y=E.get("intervention_goal");if(null==Y&&(Y="none"),!["none","mitigate_undertrust","mitigate_overtrust"].includes(Y))throw new Error("Invalid AI Assistance Intervention Goal: "+Y);let B=E.get("intervention_type");if(null==B&&(B="none"),!["none","dummy","confidence_manip","ai_explanation"].includes(B))throw new Error("Invalid AI Assistance Intervention: "+B);let G=E.get("intervention_strategy");if(null==G&&(G="dummy"),!["dummy","fixed","adaptive"].includes(G))throw new Error("Invalid AI Assistance Intervention Strategy: "+G);let W=Number(E.get("intervention_threshold"));null==W&&(W=-1);let C=Number(E.get("intervention_fixedconfchange"));null==C&&(C=0);let z="true"==E.get("use_user_reported_trust_level");null==z&&(z=!1);let H="true"==E.get("skip_trust_reporting");null==H&&(H=!1),globalThis.url_data.intervention_goal=Y,globalThis.url_data.intervention_type=B,globalThis.url_data.intervention_strategy=G,globalThis.url_data.intervention_threshold=W,globalThis.url_data.intervention_fixedconfchange=C,globalThis.url_data.use_user_reported_trust_level=z,globalThis.uid.startsWith("demo_paper")&&(i=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((t=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((t=>{a=t,null!=F&&(d=parseInt(F)-1,console.log("Starting from",d)),S(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let K=!1;document.onvisibilitychange=()=>{K||(A+=1,K=!0,globalThis.uid.startsWith("demo")||alert("Please don't leave the page. If you do so again, we may restrict paying you."),K=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViLmpzIiwibWFwcGluZ3MiOiJtQkFDQSxJQUFJQSxFQUFzQixDQ0ExQkEsRUFBd0IsQ0FBQ0MsRUFBU0MsS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYRixFQUFvQkksRUFBRUYsRUFBWUMsS0FBU0gsRUFBb0JJLEVBQUVILEVBQVNFLElBQzVFRSxPQUFPQyxlQUFlTCxFQUFTRSxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsSUFFMUUsRUNOREgsRUFBd0IsQ0FBQ1MsRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsSSxrQkNHbEYsSUFBSUksRUFBdUQsOENDRnBELElBQ0lDLEdBQW9CLEVBSy9CLElBQUlDLEVBQW1CLDhDQUNuQkMsRUFBc0Isd0RBRzFCLElBQUlDLEVBQWMsR0FDbEIsSUFZSUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFoQkFDLEdBQWMsRUFDZEMsRUFBZ0IsS0FDaEJDLEdBQWlDLEVBQ2pDQyxHQUErQixFQUMvQkMsR0FBbUMsRUFDbkNDLEdBQWlDLEVBQ2pDQyxFQUFVLEVBRVZDLEVBQW9DLEVBQ3BDQyxHQUEwQyxFQUUxQ0MsRUFBd0IsRUFNeEJDLEVBQXdCLEVBQ3hCQyxFQUE0QixFQUU1QkMsR0FBNEMsRUFHNUNDLEVBQTZDLEVBRWpELElBQ0lDLEVBQXVCLENBQUMsRUFDeEJDLEVBQStCLENBQUMsRUFDcEMsSUFBSUMsRUFFSixTQUFTQyxFQUFPQyxFQUFXQyxHQUN2QixJQUFLRCxFQUNELE1BQU1DLEdBQVcsa0JBRXpCLENBRUEsU0FBU0MsRUFBa0JDLEdBQ3ZCWCxHQUFpQlcsRUFDYkMsR0FBeUMsR0FBakJaLElBQ3hCQSxHQUFpQlcsR0FHQSxHQUFqQlgsRUFDQWEsRUFBRSw2QkFBNkJDLEtBQUssV0FBWSxRQUVoREQsRUFBRSw2QkFBNkJFLFdBQVcsWUFFMUNmLEdBQWlCLEdBQ2pCYSxFQUFFLGlDQUFpQ0csT0FDbkNILEVBQUUsNkJBQTZCSSxJQUFJLGlCQUVuQ0osRUFBRSxpQ0FBaUNLLE9BQ25DTCxFQUFFLDZCQUE2QkksSUFBSSxTQUVsQixHQUFqQmpCLElBQ0FhLEVBQUUsMEJBQTBCSyxPQUM1QkwsRUFBRSx3QkFBd0JHLE9BQzFCRyxLQUdKTixFQUFFLDBCQUEwQk8sU0FBUyxlQUFlQyxNQUFLLENBQUNDLEVBQUdDLEtBQ3pEVixFQUFFVSxHQUFJTCxNQUFNLElBRWhCTCxFQUFFLGlCQUFpQmIsS0FBaUJnQixNQUN4QyxDQXlDQSxTQUFTUSxFQUEyQkMsR0FDaENyQyxFQUFnQ3NDLEtBQUtDLE1BQ3JDbkMsRUFBd0JpQyxFQUN4QmxCLEVBQWlCLEdBQVZrQixHQUF5QixHQUFWQSxFQUFhLG1CQUNyQixHQUFWQSxHQUNBWixFQUFFLG9DQUFvQ0MsS0FBSyxpQkFBa0IsUUFDN0RELEVBQUUsb0NBQW9DRSxXQUFXLG9CQUVqREYsRUFBRSxvQ0FBb0NFLFdBQVcsa0JBQ2pERixFQUFFLG9DQUFvQ0MsS0FBSyxpQkFBa0IsU0FFakVELEVBQUUsZ0NBQWdDRyxPQUNsQ0gsRUFBRSxvQ0FBb0NDLEtBQUssV0FBWSxRQUN2REQsRUFBRSxvQ0FBb0NDLEtBQUssV0FBWSxRQUN2REQsRUFBRSxzQ0FBc0NFLFdBQVcsWUFDbkRGLEVBQUUsc0NBQXNDRSxXQUFXLFlBQ25ERixFQUFFLHNDQUFzQ0UsV0FBVyxXQUN2RCxDQUlBLFNBQVNhLEVBQTRCQyxHQUNqQzNDLEVBQTRCd0MsS0FBS0MsTUFDakNqQyxFQUEwQm1DLEVBQzFCdEIsRUFBcUIsR0FBZHNCLEdBQWlDLEdBQWRBLEdBQWlDLEdBQWRBLEVBQWlCLG1CQUM1QyxHQUFkQSxHQUNBaEIsRUFBRSxzQ0FBc0NDLEtBQUssaUJBQWtCLFFBQy9ERCxFQUFFLHNDQUFzQ0UsV0FBVyxrQkFDbkRGLEVBQUUsc0NBQXNDRSxXQUFXLG1CQUM5QixHQUFkYyxHQUNQaEIsRUFBRSxzQ0FBc0NFLFdBQVcsa0JBQ25ERixFQUFFLHNDQUFzQ0MsS0FBSyxpQkFBa0IsUUFDL0RELEVBQUUsc0NBQXNDRSxXQUFXLG9CQUVuREYsRUFBRSxzQ0FBc0NFLFdBQVcsa0JBQ25ERixFQUFFLHNDQUFzQ0UsV0FBVyxrQkFDbkRGLEVBQUUsc0NBQXNDQyxLQUFLLGlCQUFrQixTQUduRUQsRUFBRSxzQ0FBc0NDLEtBQUssV0FBWSxRQUN6REQsRUFBRSxzQ0FBc0NDLEtBQUssV0FBWSxRQUN6REQsRUFBRSxzQ0FBc0NDLEtBQUssV0FBWSxRQUN6REQsRUFBRSxrQ0FBa0NFLFdBQVcsWUFDL0NGLEVBQUUsa0NBQWtDRSxXQUFXLFlBZ0luRGUsaUJBQ0lDLFFBQVFDLElBQUksNEJBRVo1QixFQUF1QixDQUFDLEVBQ3hCLElBQUk2QixFQUEwQjFDLEVBQXlCLGNBQ25EMkMsRUFBMkIvQixFQU0vQixHQUxJZ0MsSUFDQUQsR0FBNEJyQyxFQUE0QixHQUFLLElBQzdEa0MsUUFBUUMsSUFBSSxvQ0FBcUNuQyxJQUczQixRQUF0QnVDLEVBRUFILEVBQTBCMUMsRUFBeUIsY0FDbkRhLEVBQXVCLENBQUMsT0FFdkIsR0FBMEIsdUJBQXRCZ0MsRUFFTCxHQUFJRixFQUEyQixFQUFHLENBRTlCLElBQUlHLFFBQXNCQyxJQUN0QkMsRUFBVUYsRUFBdUIsUUFDckNOLFFBQVFDLElBQUksd0RBQXlESyxFQUE0QixhQUF5Qix1QkFDMUhOLFFBQVFDLElBQUksMkVBQTRFSyxFQUE2QixjQUF5Qix1QkFDOUlOLFFBQVFDLElBQUksK0JBQWdDTyxHQUM1QyxJQUFJQyxFQUEyQ0gsRUFBNkIsY0FBeUIsc0JBVXJHLEdBVEFqQyxFQUFvRCw4QkFBSWlDLEVBRXhEbkMsR0FBbUMsRUFDL0JxQyxHQUFXRSxJQUNYdkMsR0FBbUMsR0FFdkNFLEVBQXVELGlDQUFJRixFQUMzRDZCLFFBQVFDLElBQUkscUNBQXNDOUIsR0FFcEIsU0FBMUJ3QyxHQUFxQ2xELEdBQXlCRCxFQUF5QixjQUt2RixHQURBd0MsUUFBUUMsSUFBSSx3QkFBeUJXLEVBQStCQyxTQUFTdEQsSUFDdkVxRCxFQUErQkMsU0FBU3RELEdBSzFDLEdBQTBCLG9CQUF0QnVELEVBQTBDLENBRTFDLElBQUlDLEVBQWdCQyxPQUFPeEQsRUFBeUIsY0FBRXlELFFBQVEsSUFBSyxLQUFPLElBQ3RFQyxFQUFpQkMsS0FBS0MsSUFBSSxFQUFHTCxFQUFnQk0sR0FDakRuQixFQUEwQm9CLFFBQTBCLElBQWpCSixHQUFzQkssUUFBUSxJQUFNLElBQ3ZFLElBQUlDLEdBQXdCTixFQUFpQkgsR0FBZVEsUUFBUSxHQUVwRWxELEVBQWtDLFlBQUliLEVBQXlCLGNBQy9EYSxFQUErQixTQUFJNkIsRUFDbkM3QixFQUFxQyxlQUFJbUQsRUFFekNuRCxFQUFxQixnREFBa0RpQyxFQUE0QixhQUF5QixzQkFDNUhqQyxFQUFxQixpREFBbURpQyxFQUE2QixjQUF5QixzQkFDOUhqQyxFQUEyQyxzQkFBSSxDLEtBRXBCLGtCQUF0QnlDLEVBRUx6QyxFQUEyQyxzQkFBSSxFQUVwQixRQUF0QnlDLElBQ0x6QyxFQUEyQyxzQkFBSSxRQXhCbkQyQixRQUFRQyxJQUFJLDZDQUNaQyxFQUEwQjFDLEVBQXlCLG1CQTRCdEQsR0FBOEIsWUFBMUJtRCxJQUNMWCxRQUFRQyxJQUFJLHFDQUFzQzlCLEdBQ2xENkIsUUFBUUMsSUFBSSx3QkFBeUJXLEVBQStCQyxTQUFTdEQsSUFDN0V5QyxRQUFRQyxJQUFJMUMsRUFBWXFELEdBQ3BCekMsR0FBb0N5QyxFQUErQkMsU0FBU3RELElBQzVFLEdBQTBCLG9CQUF0QnVELEVBQTBDLENBRTFDdkMsUUFBMkJrRCxFQUE0QmhCLEdBQ3ZEUCxFQUEwQm9CLFFBQW9ELElBQTVDL0MsRUFBd0MscUJBQVNnRCxRQUFRLElBQU0sSUFDakcsSUFBSVIsRUFBZ0JDLE9BQU94RCxFQUF5QixjQUFFeUQsUUFBUSxJQUFLLEtBQU8sSUFDdEVPLEdBQXdCakQsRUFBd0Msb0JBQUl3QyxHQUFlUSxRQUFRLEdBRS9GbEQsRUFBMEMsb0JBQUlFLEVBQzlDRixFQUFrQyxZQUFLYixFQUF5QixjQUNoRWEsRUFBK0IsU0FBSzZCLEVBQ3BDN0IsRUFBcUMsZUFBSW1ELEVBRXpDbkQsRUFBcUIsZ0RBQW1EaUMsRUFBNEIsYUFBeUIsc0JBQzdIakMsRUFBcUIsaURBQW1EaUMsRUFBNkIsY0FBeUIsc0JBQzlIakMsRUFBcUIsNkNBQStDRSxFQUFtRCwrQkFDdkhGLEVBQTJDLHNCQUFJLEMsS0FFcEIsa0JBQXRCeUMsRUFFTHpDLEVBQTJDLHNCQUFJLEVBRXBCLFFBQXRCeUMsSUFDTHpDLEVBQTJDLHNCQUFJLEUsTUFNM0Q2QixFQUEwQjFDLEVBQXlCLGNBQ25EYSxFQUEyQyxzQkFBSSxPQUlsRCxHQUEwQixzQkFBdEJnQyxFQUVMLEdBQUlGLEVBQTJCLEVBQUcsQ0FFOUIsSUFBSUcsUUFBc0JDLElBQ3RCQyxFQUFVRixFQUF1QixRQUNyQ04sUUFBUUMsSUFBSSx3REFBeURLLEVBQTRCLGFBQXlCLHVCQUMxSE4sUUFBUUMsSUFBSSwyRUFBNEVLLEVBQTZCLGNBQXlCLHVCQUM5SU4sUUFBUUMsSUFBSSwrQkFBZ0NPLEdBQzVDLElBQUlDLEVBQTJDSCxFQUE2QixjQUF5QixzQkFTckcsR0FSQWpDLEVBQW9ELDhCQUFJaUMsRUFFeERuQyxHQUFtQyxFQUMvQnFDLEdBQVdFLElBQ1h2QyxHQUFtQyxHQUV2Q0UsRUFBdUQsaUNBQUlGLEVBRTdCLFNBQTFCd0MsRUFFQSxHQUEwQixvQkFBdEJHLEVBQTBDLENBRTFDLElBQUlDLEVBQWdCQyxPQUFPeEQsRUFBeUIsY0FBRXlELFFBQVEsSUFBSyxLQUFPLElBQ3RFQyxFQUFpQkMsS0FBS08sSUFBSSxHQUFLUCxLQUFLQyxJQUFJLEVBQUdMLEVBQWdCTSxJQUMvRG5CLEVBQTBCb0IsUUFBMEIsSUFBakJKLEdBQXNCSyxRQUFRLElBQU0sSUFFdkVsRCxFQUFrQyxZQUFJYixFQUF5QixjQUMvRGEsRUFBK0IsU0FBSTZCLEVBQ25DN0IsRUFBcUIsZ0RBQWtEaUMsRUFBNEIsYUFBeUIsc0JBQzVIakMsRUFBcUIsaURBQW1EaUMsRUFBNkIsY0FBeUIsc0JBQzlIakMsRUFBMkMsc0JBQUksQyxLQUVwQixrQkFBdEJ5QyxFQUVMekMsRUFBMkMsc0JBQUksRUFFcEIsUUFBdEJ5QyxJQUNMekMsRUFBMkMsc0JBQUksT0FHcEIsWUFBMUJzQyxHQUNEeEMsSUFDMEIsb0JBQXRCMkMsR0FFQXZDLFFBQTJCa0QsRUFBNEJoQixHQUN2RFAsRUFBMEJvQixRQUFvRCxJQUE1Qy9DLEVBQXdDLHFCQUFTZ0QsUUFBUSxJQUFNLElBRWpHbEQsRUFBMEMsb0JBQUlFLEVBQzlDRixFQUFrQyxZQUFLYixFQUF5QixjQUNoRWEsRUFBK0IsU0FBSzZCLEVBQ3BDN0IsRUFBcUIsZ0RBQW1EaUMsRUFBNEIsYUFBeUIsc0JBQzdIakMsRUFBcUIsaURBQW1EaUMsRUFBNkIsY0FBeUIsc0JBQzlIakMsRUFBcUIsNkNBQStDRSxFQUFtRCwrQkFDdkhGLEVBQTJDLHNCQUFJLEdBRXBCLGtCQUF0QnlDLEVBRUx6QyxFQUEyQyxzQkFBSSxFQUVwQixRQUF0QnlDLElBQ0x6QyxFQUEyQyxzQkFBSSxHLE1BTTNENkIsRUFBMEIxQyxFQUF5QixjQUNuRGEsRUFBdUIsQ0FBQyxzQkFBd0IsR0FLeERBLEVBQTBELG9DQUFJOEIsRUFDOUQ5QixFQUEyQyxxQkFBSWIsRUFBeUIsY0FDeEVhLEVBQThDLHdCQUFJNkIsRUFDbERGLFFBQVFDLElBQUksdUNBQXdDNUIsR0FFcERTLEVBQUUsdUJBQXVCNkMsS0FBSyxVQUFZbkUsRUFBeUIsZUFDbkVzQixFQUFFLHVCQUF1QjZDLEtBQUt6QixHQUU5QnBCLEVBQUUsc0JBQXNCRyxPQUN4QkgsRUFBRSw0QkFBNEJHLE1BQ2xDLENBNVRJMkMsRUFDSixDQWdEQTdCLGVBQWVRLElBRVgsSUFBSXNCLEVBQTRCYixPQUFPdkQsR0FBeUJELEVBQXlCLGVBQ3JGc0UsRUFBMEJuRSxFQUMxQm9ELEVBQWdCQyxPQUFPeEQsRUFBeUIsY0FBRXlELFFBQVEsSUFBSyxLQUFPLElBQ3RFZCxFQUEyQi9CLEVBQzNCZ0MsSUFDQUQsR0FBNEJyQyxFQUE0QixHQUFLLEtBRWpFLElBU0l3QyxFQVRBeUIsRUFBNkIsQ0FDN0IsMEJBQTZCRixFQUM3Qix3QkFBMkJDLEVBQzNCLGNBQWlCZixFQUNqQix5QkFBNEJaLEVBQzVCLFNBQVk1QyxHQUVoQnlDLFFBQVFDLElBQUksK0JBQWdDOEIsR0FHNUMsSUFDSXpCLFFBQXNCeEIsRUFBRWtELEtBQ3BCakYsRUFBbUIsNkNBQ25CLENBQ0lFLEtBQU1nRixLQUFLQyxVQUFVLENBQ2pCQyxRQUFTLG9CQUNUQyxXQUFZcEYsRUFDWnFGLFFBQVNKLEtBQUtDLFVBQVVILEtBRTVCTyxLQUFNLE9BQ05DLFlBQWEsb0IsQ0FHdkIsTUFBT0MsR0FDTHhDLFFBQVFDLElBQUksVUFDWkQsUUFBUUMsSUFBSXVDLEUsQ0FHaEIsT0FBT2xDLENBQ1gsQ0FFQVAsZUFBZTBCLEVBQTRCaEIsR0FFdkMsSUFBSW9CLEVBQTRCYixPQUFPdkQsR0FBeUJELEVBQXlCLGVBQ3JGc0UsRUFBMEJuRSxFQUUxQndDLEdBRGdCYSxPQUFPeEQsRUFBeUIsY0FBRXlELFFBQVEsSUFBSyxLQUNwQzdDLEdBQzNCZ0MsSUFDQUQsR0FBNEJyQyxFQUE0QixHQUFLLEtBRWpFLElBQUkyRSxFQUE4QixDQUM5QiwwQkFBNkJaLEVBQzdCLHdCQUEyQkMsRUFDM0IseUJBQTRCM0IsRUFDNUIsU0FBWTVDLEVBQ1oseUNBQTRDa0QsR0FFaEQsSUFDSWxDLFFBQTJCTyxFQUFFa0QsS0FDekJqRixFQUFtQiw4QkFDbkIsQ0FDSUUsS0FBTWdGLEtBQUtDLFVBQVUsQ0FDakJDLFFBQVMsb0JBQ1RDLFdBQVlwRixFQUNacUYsUUFBU0osS0FBS0MsVUFBVU8sS0FFNUJILEtBQU0sT0FDTkMsWUFBYSxvQixDQUd2QixNQUFPQyxHQUNMeEMsUUFBUUMsSUFBSSxVQUNaRCxRQUFRQyxJQUFJdUMsRSxDQUdoQixPQUFPakUsQ0FDWCxDQWlQQSxTQUFTbUUsRUFBeUJoRCxHQUM5QnBDLEVBQThCcUMsS0FBS0MsTUFDbkNsQyxFQUFzQmdDLEVBQ3RCbEIsRUFBaUIsR0FBVmtCLEdBQXlCLEdBQVZBLEVBQWEsbUJBQ3JCLEdBQVZBLEdBQ0FaLEVBQUUsa0NBQWtDQyxLQUFLLGlCQUFrQixRQUMzREQsRUFBRSxrQ0FBa0NFLFdBQVcsb0JBRS9DRixFQUFFLGtDQUFrQ0UsV0FBVyxrQkFDL0NGLEVBQUUsa0NBQWtDQyxLQUFLLGlCQUFrQixTQUUvREQsRUFBRSw4QkFBOEJHLE9BQ2hDSCxFQUFFLGtDQUFrQ0MsS0FBSyxXQUFZLFFBQ3JERCxFQUFFLGtDQUFrQ0MsS0FBSyxXQUFZLFFBQ3JERCxFQUFFLG9DQUFvQ0UsV0FBVyxZQUNqREYsRUFBRSxvQ0FBb0NFLFdBQVcsWUFDakRGLEVBQUUsb0NBQW9DRSxXQUFXLFdBQ3JELENBSUEsU0FBUzJELEVBQTBCN0MsR0FDL0IxQyxFQUE0QnVDLEtBQUtDLE1BQ2pDaEMsRUFBd0JrQyxFQUN4QnRCLEVBQXFCLEdBQWRzQixHQUFpQyxHQUFkQSxHQUFpQyxHQUFkQSxFQUFpQixtQkFDNUMsR0FBZEEsR0FDQWhCLEVBQUUsb0NBQW9DQyxLQUFLLGlCQUFrQixRQUM3REQsRUFBRSxvQ0FBb0NFLFdBQVcsa0JBQ2pERixFQUFFLG9DQUFvQ0UsV0FBVyxtQkFDNUIsR0FBZGMsR0FDUGhCLEVBQUUsb0NBQW9DRSxXQUFXLGtCQUNqREYsRUFBRSxvQ0FBb0NDLEtBQUssaUJBQWtCLFFBQzdERCxFQUFFLG9DQUFvQ0UsV0FBVyxvQkFFakRGLEVBQUUsb0NBQW9DRSxXQUFXLGtCQUNqREYsRUFBRSxvQ0FBb0NFLFdBQVcsa0JBQ2pERixFQUFFLG9DQUFvQ0MsS0FBSyxpQkFBa0IsU0FHakVELEVBQUUsb0NBQW9DQyxLQUFLLFdBQVksUUFDdkRELEVBQUUsb0NBQW9DQyxLQUFLLFdBQVksUUFDdkRELEVBQUUsb0NBQW9DQyxLQUFLLFdBQVksUUFRM0RnQixpQkFFSSxJQUFJNkMsRUFBeUJwRixFQUEwQixlQUNuRHFGLEVBQTJCRCxHQUFrQmxGLEVBRTdDb0YsRUFBeUJ0RixFQUF5QixjQUNsRGtCLEVBQVUsNkJBQStCa0UsRUFBaUIsWUFFMURsRSxHQURBbUUsRUFDVyxxQkFBdUJuRixFQUFzQixxRUFHN0MscUJBQXVCQSxFQUFzQix5RUFHeERnQixHQURBb0UsRUFDVyx3QkFBMEJ0RixFQUF5QixjQUFJLG9FQUd2RCx3QkFBMEJBLEVBQXlCLGNBQUkseUVBRWxFcUYsR0FDQW5FLEdBQVcsMkVBQ1hiLEdBQVcsSUFHWGEsR0FBVyw2RUFHZkEsR0FBVyxPQVNYSSxFQUFFLFlBQVlpRSxLQUFLLGFBQWFsRixFQUFRMEQsUUFBUSxhQUNoRHpDLEVBQUUsZ0JBQWdCNkMsS0FBS2pELEdBRXZCSSxFQUFFLGdCQUFnQkcsT0FFZEosRUFDQUMsRUFBRSxnQkFBZ0JHLE9BR2xCSCxFQUFFLDBCQUEwQkcsT0FHaENYLFFBaEpKeUIsaUJBRUksSUFjSWlELEVBVkFDLEVBQXNCLENBQ3RCLHlCQUwyQmpDLE9BQU92RCxHQUF5QkQsRUFBMEIsZ0JBTXJGLGVBTGlCd0QsT0FBT3hELEVBQXlCLGVBQUtBLEVBQTBCLGdCQU1oRix1QkFMeUJ3RCxPQUFPdEQsR0FBdUJGLEVBQTBCLGdCQU1qRixjQUxnQndELE9BQU94RCxFQUF5QixjQUFFeUQsUUFBUSxJQUFLLEtBQU8sSUFNdEUseUJBQTRCN0MsRUFDNUIsU0FBWWIsR0FFaEJ5QyxRQUFRQyxJQUFJLHdCQUF5QmdELEdBR3JDLElBQ0lELFFBQWVsRSxFQUFFa0QsS0FDYmpGLEVBQW1CLG1CQUNuQixDQUNJRSxLQUFNZ0YsS0FBS0MsVUFBVSxDQUNqQkMsUUFBUyxvQkFDVEMsV0E5ZUssNkRBK2VMQyxRQUFTSixLQUFLQyxVQUFVZSxLQUU1QlgsS0FBTSxPQUNOQyxZQUFhLG9CLENBR3ZCLE1BQU9DLEdBQ0x4QyxRQUFRQyxJQUFJLFVBQ1pELFFBQVFDLElBQUl1QyxFLENBR2hCeEMsUUFBUUMsSUFBSSxtQ0FBb0MrQyxHQUNoRCxJQUFJRSxRQUFxQkYsRUFBcUIsYUFROUMsT0FOQTVFLEdBQTBFOEUsRUFDMUU1RSxFQUErQixDQUMzQixhQUFnQjJFLEVBQ2hCLHVCQUEwQkMsRUFDMUIscUJBQXdCOUUsRUFHaEMsQ0FtR3lDK0UsRUFHekMsQ0ExRElDLEVBQ0osQ0E2REEsU0FBU2hFLElBNkNMLEdBM0NBTixFQUFFLG9DQUFvQ0UsV0FBVyxrQkFDakRGLEVBQUUsb0NBQW9DRSxXQUFXLGtCQUNqREYsRUFBRSxvQ0FBb0NFLFdBQVcsWUFDakRGLEVBQUUsb0NBQW9DRSxXQUFXLFlBRWpERixFQUFFLHNDQUFzQ0UsV0FBVyxrQkFDbkRGLEVBQUUsc0NBQXNDRSxXQUFXLGtCQUNuREYsRUFBRSxzQ0FBc0NFLFdBQVcsa0JBQ25ERixFQUFFLHNDQUFzQ0UsV0FBVyxZQUNuREYsRUFBRSxzQ0FBc0NFLFdBQVcsWUFDbkRGLEVBQUUsc0NBQXNDRSxXQUFXLFlBRW5ERixFQUFFLGtDQUFrQ0UsV0FBVyxrQkFDL0NGLEVBQUUsa0NBQWtDRSxXQUFXLGtCQUMvQ0YsRUFBRSxrQ0FBa0NFLFdBQVcsWUFDL0NGLEVBQUUsa0NBQWtDRSxXQUFXLFlBRS9DRixFQUFFLG9DQUFvQ0UsV0FBVyxrQkFDakRGLEVBQUUsb0NBQW9DRSxXQUFXLGtCQUNqREYsRUFBRSxvQ0FBb0NFLFdBQVcsa0JBQ2pERixFQUFFLG9DQUFvQ0UsV0FBVyxZQUNqREYsRUFBRSxvQ0FBb0NFLFdBQVcsWUFDakRGLEVBQUUsb0NBQW9DRSxXQUFXLFlBRWpERixFQUFFLHNCQUFzQkssT0FDeEJMLEVBQUUsZ0NBQWdDSyxPQUNsQ0wsRUFBRSw0QkFBNEJLLE9BQzlCTCxFQUFFLDhCQUE4QkssT0FDaENMLEVBQUUsY0FBY0UsV0FBVyxZQUMzQkYsRUFBRSwwQkFBMEJLLE9BQzVCTCxFQUFFLHFCQUFxQkssT0FDdkJMLEVBQUUsZ0JBQWdCSyxPQUNsQkwsRUFBRSxnQkFBZ0JLLFFBQ0MsR0FBZjVCLEVBQ0F1QixFQUFFLGVBQWVpRSxLQUFLLEtBR3RCakUsRUFBRSxlQUFlaUUsS0FBSyxrREFBOEUsR0FBNUJqRixZQUU1RWdCLEVBQUUsY0FBY0ksSUFBSXBCLEdBQ3BCQyxFQUFpQ0QsRUFFakNQLEdBQWMsRUFDVkEsR0FBY04sRUFBS29HLE9BT25CLE9BTkF2RSxFQUFFLHdCQUF3QkssWUFDdEJyQyxFQUNBZ0MsRUFBRSxzQkFBc0JHLE9BRXhCSCxFQUFFLGlCQUFpQkcsUUFhM0IsR0FUQXpCLEVBQVdQLEVBQUtNLEdBRWhCdUIsRUFBRSxrQkFBa0I2QyxLQUFLbkUsRUFBb0IsVUFDN0NzQixFQUFFLGlCQUFpQjZDLEtBQUtuRSxFQUFtQixTQUMzQ3NCLEVBQUUsaUJBQWlCNkMsS0FBS25FLEVBQW1CLFNBS3hDQSxFQUFTYixlQUFlLGdCQUFpQixDQUN4QyxJQUFLMkcsRUFBUUMsR0FBVS9GLEVBQXVCLGFBQzlDOEYsRUFBU3RDLE9BQU9zQyxHQUNoQkMsRUFBU3ZDLE9BQU91QyxHQUNoQnZGLEVBQWdCc0YsRUFBT0MsQyxNQUV2QnZGLEVBQWdCLEVBR3BCZCxFQUFzQnlDLEtBQUtDLE1BQzNCZCxFQUFFLGFBQWFpRSxLQUFLLGFBQWF4RixFQUFhLE9BQU9OLEVBQUtvRyxTQUM5RCxDQXBuQkF2RSxFQUFFLDZCQUE2QjBFLEdBQUcsU0FBUyxJQUFNN0UsRUFBa0IsS0FDbkVHLEVBQUUsNkJBQTZCMEUsR0FBRyxTQUFTLElBQU03RSxHQUFtQixLQUVwRUcsRUFBRSxnQkFBZ0IwRSxHQUFHLFNBQVMsS0FDMUIsSUFBbUIsR0FBZmpHLEVBQWtCLENBQ2xCLElBQUlrRyxFQUFjLENBQ2QsV0FBY2xHLEVBQ2QsOEJBQWlDTSxFQUNqQyxzQkFBeUJFLEVBQ3pCLHFCQUF3QkQsRUFDeEIsc0JBQXlCTCxFQUN6QixvQkFBdUJDLEVBQ3ZCLHdCQUEyQkMsRUFDM0Isc0JBQXlCQyxHQUc3QjZGLEVBQW1CLE1BQUksQ0FDbkIsaUJBQW9CcEcsRUFBZ0NILEVBQ3BELG1CQUFzQkMsRUFBNEJFLEVBQ2xELGVBQWtCQyxFQUE4QkgsRUFDaEQsaUJBQW9CQyxFQUE0QkUsRUFDaEQsZUFBa0JxQyxLQUFLQyxNQUFReEMsR0FFbkNxRyxFQUFzQixTQUFJakcsRUFDMUJpRyxFQUErQixrQkFBSXZGLEVBQ25DdUYsRUFBa0MscUJBQUlwRixFQUN0Q29GLEVBQTBDLDZCQUFJbkYsRUQzRi9DeUIsZUFBd0I5QyxHQUMzQixHQUFJSCxFQUNBa0QsUUFBUUMsSUFBSSxnQkFBaUJoRCxPQURqQyxDQUtBQSxFQUFlLFNBQUl5RyxXQUFXQyxTQUM5QjNELFFBQVFDLElBQUksUUFDTixhQUFjaEQsRUFBZSxXQUMvQkEsRUFBZSxTQUFZLFNBQUksb0JBRW5DQSxFQUFlLFNBQVksU0FBSXlHLFdBQVdFLElBQzFDNUQsUUFBUUMsSUFBSSxTQUFVaEQsR0FDdEIrQyxRQUFRQyxJQUFJLGFBQWNwRCxFQUFrQixPQUU1QyxJQWFJLGFBWm1CaUMsRUFBRWtELEtBQ2pCbkYsRUFBa0IsTUFDbEIsQ0FDSUksS0FBTWdGLEtBQUtDLFVBQVUsQ0FDakJDLFFBQVMsbUNBQXFDbEYsRUFBZSxTQUFZLFNBQ3pFMkcsSUFBS0YsV0FBV0UsSUFBSTNDLFFBQVEsSUFBSyxLQUFPLElBQU1oRSxFQUFlLFNBQWUsWUFDNUVvRixRQUFTSixLQUFLQyxVQUFVakYsS0FFNUJxRixLQUFNLE9BQ05DLFlBQWEsb0IsQ0FJdkIsTUFBT0MsR0FDTHhDLFFBQVFDLElBQUl1QyxFLEVBRXBCLENDNERRcUIsQ0FBU0osR0FDVHZGLEVBQW9CLEMsQ0FHeEJrQixHQUFlLElBR25CTixFQUFFLGNBQWMwRSxHQUFHLGdCQUFnQixXQUMvQjFGLEVBQTZCZ0IsRUFBRWdGLE1BQU01RSxNQUNyQ0osRUFBRSxlQUFlaUUsS0FBSyx5REFBcUYsR0FBNUJqRixZQUMvRWdCLEVBQUUsZ0JBQWdCRyxNQUN0QixJQW9CQUgsRUFBRSxvQ0FBb0MwRSxHQUFHLFNBQVMsSUFBTS9ELEVBQTJCLEtBQ25GWCxFQUFFLG9DQUFvQzBFLEdBQUcsU0FBUyxJQUFNL0QsRUFBMkIsS0E0Qm5GWCxFQUFFLHNDQUFzQzBFLEdBQUcsU0FBUyxJQUFNM0QsRUFBNEIsS0FDdEZmLEVBQUUsc0NBQXNDMEUsR0FBRyxTQUFTLElBQU0zRCxFQUE0QixLQUN0RmYsRUFBRSxzQ0FBc0MwRSxHQUFHLFNBQVMsSUFBTTNELEVBQTRCLEtBMlh0RmYsRUFBRSxrQ0FBa0MwRSxHQUFHLFNBQVMsSUFBTWQsRUFBeUIsS0FDL0U1RCxFQUFFLGtDQUFrQzBFLEdBQUcsU0FBUyxJQUFNZCxFQUF5QixLQXlCL0U1RCxFQUFFLG9DQUFvQzBFLEdBQUcsU0FBUyxJQUFNYixFQUEwQixLQUNsRjdELEVBQUUsb0NBQW9DMEUsR0FBRyxTQUFTLElBQU1iLEVBQTBCLEtBQ2xGN0QsRUFBRSxvQ0FBb0MwRSxHQUFHLFNBQVMsSUFBTWIsRUFBMEIsS0F3SWxGLE1BQU1vQixFQUFZLElBQUlDLGdCQUFnQkMsT0FBT0MsU0FBU0MsUUFDaERDLEVBQWdCTCxFQUFVeEgsSUFBSSxTQUM5QjhILEVBQWFOLEVBQVV4SCxJQUFJLE9BR2pDLEdBRkFtSCxXQUFXQyxTQ3hzQlgsU0FBd0JXLEdBQ3RCLE1BQU10QixFQUFTLENBQUMsRUFFaEIsSUFBSyxNQUFPOUcsRUFBS3FJLEtBQVVELEVBQ3pCdEIsRUFBTzlHLEdBQU9xSSxFQUVoQixPQUFPdkIsQ0FDVCxDRGlzQnNCd0IsQ0FBZVQsRUFBVU8sV0FFN0IsTUFBZEQsR0FFQSxHQURBWCxXQUFXRSxJQUFNUyxFQUNLLG1CQUFsQlgsV0FBV0UsSUFBMEIsQ0FDckMsSUFBSWEsRUFBVyxHQUFHdEQsS0FBS3VELE1BQXNCLEdBQWhCdkQsS0FBS3dELFlBQWlCQyxTQUFTLEVBQUcsS0FDL0RsQixXQUFXRSxJQUFNLEdBQUdHLEVBQVV4SCxJQUFJLDBCQUEwQmtJLEcsTUFJN0QsQ0FDSCxJQUFJSSxFQUFpQixLQUNyQixLQUFvQixNQUFiQSxHQUNIQSxFQUFZQyxPQUFPLHNIQUV2QnBCLFdBQVdFLElBQU1pQixDLENBRXJCLElBQUlqRSxFQUEyQyxHQUMzQzhDLFdBQVdFLElBQUkvQyxTQUFTLFFBRWpCNkMsV0FBV0UsSUFBSS9DLFNBQVMsT0FEL0JELEVBQWlDLENBQUMsRUFBRyxFQUFHLEVBQUcsR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLElBR3hEOEMsV0FBV0UsSUFBSS9DLFNBQVMsU0FDL0JELEVBQWlDLENBQUMsR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksS0FRMUUsSUFBSVAsRUFBcUIwRCxFQUFVeEgsSUFBSSxxQkFFdkMsR0FEMEIsTUFBdEI4RCxJQUE2QkEsRUFBcUIsU0FGdkIsQ0FBQyxPQUFRLHNCQUF1QixzQkFHbkNRLFNBQVNSLEdBQ2pDLE1BQU0sSUFBSTBFLE1BQU0sNENBQThDMUUsR0FJbEUsSUFBSVMsRUFBcUJpRCxFQUFVeEgsSUFBSSxxQkFFdkMsR0FEMEIsTUFBdEJ1RSxJQUE2QkEsRUFBcUIsU0FGdkIsQ0FBQyxPQUFRLFFBQVMsbUJBQW9CLGtCQUd6Q0QsU0FBU0MsR0FDakMsTUFBTSxJQUFJaUUsTUFBTSx1Q0FBeUNqRSxHQUk3RCxJQUFJSCxFQUF5Qm9ELEVBQVV4SCxJQUFJLHlCQUUzQyxHQUQ4QixNQUExQm9FLElBQWlDQSxFQUF5QixVQUYxQixDQUFDLFFBQVMsUUFBUyxZQUd0QkUsU0FBU0YsR0FDdEMsTUFBTSxJQUFJb0UsTUFBTSxnREFBa0RwRSxHQUl0RSxJQUFJRCxFQUE4Qk0sT0FBTytDLEVBQVV4SCxJQUFJLDJCQUNwQixNQUEvQm1FLElBQXNDQSxHQUErQixHQUN6RSxJQUFJVyxFQUE4QkwsT0FBTytDLEVBQVV4SCxJQUFJLGlDQUNwQixNQUEvQjhFLElBQXNDQSxFQUE4QixHQUV4RSxJQUFJakIsRUFBNEUsUUFBbEQyRCxFQUFVeEgsSUFBSSxpQ0FDYixNQUEzQjZELElBQWtDQSxHQUEwQixHQUVoRSxJQUFJdkIsRUFBZ0UsUUFBekNrRixFQUFVeEgsSUFBSSx3QkFDYixNQUF4QnNDLElBQStCQSxHQUF1QixHQUUxRDZFLFdBQVdDLFNBQTRCLGtCQUFJdEQsRUFDM0NxRCxXQUFXQyxTQUE0QixrQkFBSTdDLEVBQzNDNEMsV0FBV0MsU0FBZ0Msc0JBQUloRCxFQUMvQytDLFdBQVdDLFNBQWlDLHVCQUFJakQsRUFDaERnRCxXQUFXQyxTQUF1Qyw2QkFBSXRDLEVBQ3REcUMsV0FBV0MsU0FBd0MsOEJBQUl2RCxFQUduRHNELFdBQVdFLElBQUlvQixXQUFXLGdCQUMxQmxJLEdBQVcsR0FJZmtELFFBQVFDLElBQUksbUJBQW9CeUQsV0FBV0UsS0Qvd0JwQzdELGlCQUtILGFBSG1CakIsRUFBRW1HLFFBQ2pCLGdCQUFnQnZCLFdBQVdFLGNBQWNqRSxLQUFLQyxRQUd0RCxDQzB3QkFzRixHQUFZQyxPQUFPQyxJQUVmcEYsUUFBUUMsSUFBSSxvQkFDWkQsUUFBUUMsSUFBSXlELFdBQVdFLEtBQ3ZCSyxPQUFPQyxTQUFTbUIsUUFBUSxJQUUxQkMsTUFBTUMsSUFDSnRJLEVBQU9zSSxFQUNjLE1BQWpCbkIsSUFDQTdHLEVBQWFpSSxTQUFTcEIsR0FBaUIsRUFDdkNwRSxRQUFRQyxJQUFJLGdCQUFpQjFDLElBR2pDb0IsRUFBa0IsR0FDbEJHLEVBQUUsMEJBQTBCRyxPQUM1QkgsRUFBRSxpQ0FBaUNLLE1BQU0sSUFHN0NhLFFBQVFDLElBQUksNkJBQThCeUQsV0FBV0UsS0FFckQsSUFBSTZCLEdBQWUsRUFDbkJDLFNBQVNDLG1CQUFxQixLQUNyQkYsSUFDRHZILEdBQXFCLEVBQ3JCdUgsR0FBZSxFQUNUL0IsV0FBV0UsSUFBS29CLFdBQVcsU0FDN0JZLE1BQU0sZ0ZBRVZILEdBQWUsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLy8uL3NyYy9jb25uZWN0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gJy4vZ2xvYmFscydcbmltcG9ydCB7IE1PQ0tNT0RFIH0gZnJvbSAnLi9tYWluJ1xuXG5sZXQgU0VSVkVSX0xPR19ST09UID0gREVWTU9ERSA/IFwiaHR0cDovLzEyNy4wLjAuMTo1MDAwL1wiIDogXCJodHRwczovL3RlamFzc3Jpbml2YXNhbi5weXRob25hbnl3aGVyZS5jb20vXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRfZGF0YSgpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIGluY2x1ZGUgdGltZXN0YW1wIHNvIHRoYXQgdGhpbmdzIGRvbid0IGdldCBjYWNoZWRcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgJC5nZXRKU09OKFxuICAgICAgICBgYmFrZWRfcXVldWVzLyR7Z2xvYmFsVGhpcy51aWR9Lmpzb24/dD0ke0RhdGUubm93KCl9YCxcbiAgICApXG4gICAgcmV0dXJuIHJlc3VsdFxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ19kYXRhKGRhdGEpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmIChNT0NLTU9ERSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImxvZ2dlZCAobW9jaylcIiwgZGF0YSlcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZGF0YVtcInVybF9kYXRhXCJdID0gZ2xvYmFsVGhpcy51cmxfZGF0YVxuICAgIGNvbnNvbGUubG9nKFwiRGF0YVwiKVxuICAgIGlmICghKFwic3R1ZHlfaWRcIiBpbiBkYXRhWyd1cmxfZGF0YSddKSkge1xuICAgICAgICBkYXRhWyd1cmxfZGF0YSddW1wic3R1ZHlfaWRcIl0gPSBcInRyaWFscnVuX3N0dWRpZXNcIlxuICAgIH1cbiAgICBkYXRhW1widXJsX2RhdGFcIl1bXCJxdWV1ZV9pZFwiXSA9IGdsb2JhbFRoaXMudWlkXG4gICAgY29uc29sZS5sb2coXCJsb2dnZWRcIiwgZGF0YSlcbiAgICBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgdG9cIiwgU0VSVkVSX0xPR19ST09UICsgXCJsb2dcIilcblxuICAgIHRyeSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBTRVJWRVJfTE9HX1JPT1QgKyBcImxvZ1wiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCIyc3RlcC10cnVzdC1zdHVkeS1pbnRlcnZlbnRpb25zL1wiICsgZGF0YVsndXJsX2RhdGEnXVsnc3R1ZHlfaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgdWlkOiBnbG9iYWxUaGlzLnVpZC5yZXBsYWNlKFwiL1wiLCBcIl9cIikgKyBcIl9cIiArIGRhdGFbJ3VybF9kYXRhJ11bJ3Byb2xpZmljX2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxufSIsImltcG9ydCB7IERFVk1PREUgfSBmcm9tIFwiLi9nbG9iYWxzXCJcbmV4cG9ydCB2YXIgVUlEOiBzdHJpbmdcbmV4cG9ydCB2YXIgTU9DS01PREU6IGJvb2xlYW4gPSBmYWxzZVxuaW1wb3J0IHsgbG9hZF9kYXRhLCBsb2dfZGF0YSB9IGZyb20gJy4vY29ubmVjdG9yJ1xuaW1wb3J0IHsgcGFyYW1zVG9PYmplY3QgfSBmcm9tIFwiLi91dGlsc1wiXG4vL2ltcG9ydCB7IGdldF91c2VyX3RydXN0X2VmZmVjdCwgZ2V0X2FkanVzdGVkX2FpX2NvbmZpZGVuY2V9IGZyb20gXCIuL3J1bl91c2VyX21vZGVsc1wiXG5cbmxldCBVU0VSX01PREVMU19ST09UID0gXCJodHRwczovL3RlamFzc3Jpbml2YXNhbi5weXRob25hbnl3aGVyZS5jb20vXCJcbmxldCB1c2VyX2RlY2lzaW9uX21vZGVsID0gXCJ1c2VyX2FjY2VwdGFuY2VfbW9kZWwtbG9naXN0aWNyZWdyZXNzaW9uLTAuOTM0N3Rlc3RmMVwiXG5sZXQgdHJ1c3RfZWZmZWN0X21vZGVsID0gXCJ0cnVzdF9lZmZlY3RfbW9kZWwtc3ZtX2xpbmVhci0wLjQ2NDR0ZXN0bWFlLTAuOTA5NXRlc3R0ZWRhXCJcblxudmFyIGRhdGE6IGFueVtdID0gW11cbmxldCBxdWVzdGlvbl9pID0gLTFcbmxldCBxdWVzdGlvbjogYW55ID0gbnVsbFxubGV0IGluaXRpYWxfdXNlcl9kZWNpc2lvbjogbnVtYmVyID0gLTFcbmxldCBmaW5hbF91c2VyX2RlY2lzaW9uOiBudW1iZXIgPSAtMVxubGV0IGluaXRpYWxfdXNlcl9jb25maWRlbmNlOiBudW1iZXIgPSAtMVxubGV0IGZpbmFsX3VzZXJfY29uZmlkZW5jZTogbnVtYmVyID0gLTFcbmxldCBiYWxhbmNlID0gMFxuXG5sZXQgdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbDogbnVtYmVyID0gNVxubGV0IHByZXZfdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbDogbnVtYmVyID0gLTFcblxubGV0IGJldF92YWxfcmF0aW86IG51bWJlciA9IDFcbmxldCB0aW1lX3F1ZXN0aW9uX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9maW5hbF9jb25maWRlbmNlX3N0YXJ0OiBudW1iZXJcbmxldCBpbnN0cnVjdGlvbl9pOiBudW1iZXIgPSAwXG5sZXQgY291bnRfZXhpdGVkX3BhZ2U6IG51bWJlciA9IDBcblxubGV0IGludGVydmVudGlvbl9jb25kaXRpb25fc2F0aXNmaWVkOiBib29sZWFuID0gZmFsc2VcbmxldCBpbnRlcnZlbnRpb25fYXBwbGllZDogYm9vbGVhbiA9IGZhbHNlXG5cbmxldCB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsOiBudW1iZXIgPSAwXG5cbnZhciBhbGxfdXNlcl9pbnRlcmFjdGlvbnMgPSBbXVxudmFyIGludGVydmVudGlvbl9kZXRhaWxzID0ge31cbnZhciB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0ge31cbmxldCBmaW5kbmV3Y29uZl9yZXN1bHQ6IGFueVxuXG5mdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgICAgdGhyb3cgbWVzc2FnZSB8fCBcIkFzc2VydGlvbiBmYWlsZWRcIjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5leHRfaW5zdHJ1Y3Rpb25zKGluY3JlbWVudDogbnVtYmVyKSB7XG4gICAgaW5zdHJ1Y3Rpb25faSArPSBpbmNyZW1lbnRcbiAgICBpZiAoc2tpcF90cnVzdF9yZXBvcnRpbmcgJiYgaW5zdHJ1Y3Rpb25faSA9PSA1KSB7XG4gICAgICAgIGluc3RydWN0aW9uX2kgKz0gaW5jcmVtZW50XG4gICAgfVxuXG4gICAgaWYgKGluc3RydWN0aW9uX2kgPT0gMCkge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfcHJldlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgfVxuICAgIGlmIChpbnN0cnVjdGlvbl9pID49IDYpIHtcbiAgICAgICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLnNob3coKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS52YWwoXCJTdGFydCBzdHVkeVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikudmFsKFwiTmV4dFwiKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA9PSA3KSB7XG4gICAgICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLmhpZGUoKVxuICAgICAgICAkKFwiI21haW5fYm94X2V4cGVyaW1lbnRcIikuc2hvdygpXG4gICAgICAgIG5leHRfcXVlc3Rpb24oKVxuICAgIH1cblxuICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLmNoaWxkcmVuKFwiOm5vdChpbnB1dClcIikuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgICAgJChlbCkuaGlkZSgpXG4gICAgfSlcbiAgICAkKGAjaW5zdHJ1Y3Rpb25zXyR7aW5zdHJ1Y3Rpb25faX1gKS5zaG93KClcbn1cbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoKzEpKVxuJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikub24oXCJjbGlja1wiLCAoKSA9PiBuZXh0X2luc3RydWN0aW9ucygtMSkpXG5cbiQoXCIjYnV0dG9uX25leHRcIikub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaWYgKHF1ZXN0aW9uX2kgIT0gLTEpIHtcbiAgICAgICAgbGV0IGxvZ2dlZF9kYXRhID0ge1xuICAgICAgICAgICAgXCJxdWVzdGlvbl9pXCI6IHF1ZXN0aW9uX2ksXG4gICAgICAgICAgICBcInVzZXJfYmFsYW5jZV9wb3N0X2ludGVyYWN0aW9uXCI6IGJhbGFuY2UsXG4gICAgICAgICAgICBcInVzZXJfdHJ1c3RfdmFsX2JlZm9yZVwiOiBwcmV2X3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgICAgICBcInVzZXJfdHJ1c3RfdmFsX2FmdGVyXCI6IHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgICAgICBcImluaXRpYWxfdXNlcl9kZWNpc2lvblwiOiBpbml0aWFsX3VzZXJfZGVjaXNpb24sXG4gICAgICAgICAgICBcImZpbmFsX3VzZXJfZGVjaXNpb25cIjogZmluYWxfdXNlcl9kZWNpc2lvbixcbiAgICAgICAgICAgIFwiaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcIjogaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UsXG4gICAgICAgICAgICBcImZpbmFsX3VzZXJfY29uZmlkZW5jZVwiOiBmaW5hbF91c2VyX2NvbmZpZGVuY2UsXG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZWRfZGF0YVsndGltZXMnXSA9IHtcbiAgICAgICAgICAgIFwiaW5pdGlhbF9kZWNpc2lvblwiOiB0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCAtIHRpbWVfcXVlc3Rpb25fc3RhcnQsXG4gICAgICAgICAgICBcImluaXRpYWxfY29uZmlkZW5jZVwiOiB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0IC0gdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQsXG4gICAgICAgICAgICBcImZpbmFsX2RlY2lzaW9uXCI6IHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCAtIHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQsXG4gICAgICAgICAgICBcImZpbmFsX2NvbmZpZGVuY2VcIjogdGltZV90cnVzdF9kZWNpc2lvbl9zdGFydCAtIHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCxcbiAgICAgICAgICAgIFwidHJ1c3RfZGVjaXNpb25cIjogRGF0ZS5ub3coKSAtIHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQsXG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3F1ZXN0aW9uJ10gPSBxdWVzdGlvblxuICAgICAgICBsb2dnZWRfZGF0YVsnY291bnRfZXhpdGVkX3BhZ2UnXSA9IGNvdW50X2V4aXRlZF9wYWdlXG4gICAgICAgIGxvZ2dlZF9kYXRhWydpbnRlcnZlbnRpb25fZGV0YWlscyddID0gaW50ZXJ2ZW50aW9uX2RldGFpbHNcbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3RydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEnXSA9IHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGFcbiAgICAgICAgbG9nX2RhdGEobG9nZ2VkX2RhdGEpXG4gICAgICAgIGNvdW50X2V4aXRlZF9wYWdlID0gMFxuXG4gICAgfVxuICAgIG5leHRfcXVlc3Rpb24oKVxufSk7XG5cbiQoJyNyYW5nZV92YWwnKS5vbignaW5wdXQgY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgIHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgPSAoJCh0aGlzKS52YWwoKSEgYXMgbnVtYmVyKVxuICAgICQoXCIjcmFuZ2VfdGV4dFwiKS50ZXh0KGBBZnRlciB0aGlzIGludGVyYWN0aW9uLCB5b3VyIGN1cnJlbnQgdHJ1c3QgaW4gdGhlIEFJOiAke3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgKiAxMH0gLyAxMDAuYClcbiAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLnNob3coKVxufSk7XG5cbmZ1bmN0aW9uIG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKG9wdGlvbikge1xuICAgIHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9IG9wdGlvblxuICAgIGFzc2VydChvcHRpb24gPT0gMSB8fCBvcHRpb24gPT0gMiwgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICBpZiAob3B0aW9uID09IDEpIHtcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG4gICAgJChcIiNpbml0aWFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuc2hvdygpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxufVxuJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24oMSkpXG4kKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbigyKSlcblxuZnVuY3Rpb24gZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKGNvbmZfbGV2ZWwpIHtcbiAgICB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIGluaXRpYWxfdXNlcl9jb25maWRlbmNlID0gY29uZl9sZXZlbFxuICAgIGFzc2VydChjb25mX2xldmVsID09IDEgfHwgY29uZl9sZXZlbCA9PSAyIHx8IGNvbmZfbGV2ZWwgPT0gMywgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICBpZiAoY29uZl9sZXZlbCA9PSAxKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgIH0gZWxzZSBpZiAoY29uZl9sZXZlbCA9PSAyKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgIH1cblxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikgICAgXG5cbiAgICBnZXRfYWlfYXNzaXN0YW5jZSgpXG59XG4kKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSgxKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKDIpKVxuJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoMykpXG5cblxuXG5hc3luYyBmdW5jdGlvbiBnZXRfdXNlcl9kZWNpc2lvbl9wcm9iKCkge1xuICAgIC8vIFByZXBhcmUgaW5wdXRzIGZvciB0aGUgdXNlciBkZWNpc2lvbiBtb2RlbFxuICAgIGxldCB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50ID0gTnVtYmVyKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgIGxldCB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSA9IGluaXRpYWxfdXNlcl9jb25maWRlbmNlXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgIGlmICh1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCkge1xuICAgICAgICB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSAodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAtIDUpIC8gMi41XG4gICAgfVxuICAgIGxldCB1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cyA9IHtcbiAgICAgICAgXCJ1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50XCI6IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQsXG4gICAgICAgIFwidXNlcl9pbml0aWFsX2NvbmZpZGVuY2VcIjogdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UsXG4gICAgICAgIFwiYWlfY29uZmlkZW5jZVwiOiBhaV9jb25maWRlbmNlLFxuICAgICAgICBcInVzZXJfY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJnZXRfdXNlcl9kZWNpc2lvbl9wcm9iXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHVzZXJfZGVjaXNpb25fbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgXCJ1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0c1wiOiB1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cywgXG4gICAgICAgIFwidXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RcIjogcmVzdWx0W1wicHJlZF9wcm9ic1wiXVswXVsxXVxuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZXhhbWluZV9lZmZlY3Rfb2ZfdHJ1c3Rfb25fZGVjaXNpb25fbWFraW5nKCkge1xuICAgIC8vIFByZXBhcmUgaW5wdXQgdmFyaWFibGVzIGZvciB1c2VyIGRlY2lzaW9uIG1vZGVsXG4gICAgbGV0IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgbGV0IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlID0gaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzID0ge1xuICAgICAgICBcInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnRcIjogdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCxcbiAgICAgICAgXCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZVwiOiB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIlVzZXIgZGVjaXNpb24gbW9kZWwgaW5wdXRzOiBcIiwgdXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMpXG5cbiAgICBsZXQgYWxkaWZmX3Jlc3VsdDogYW55XG4gICAgdHJ5IHtcbiAgICAgICAgYWxkaWZmX3Jlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImV4YW1pbmVfZWZmZWN0X29mX3RydXN0X29uX2RlY2lzaW9uX21ha2luZ1wiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCIyc3RlcC10cnVzdC1zdHVkeVwiLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbF9uYW1lOiB1c2VyX2RlY2lzaW9uX21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeSh1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGFsZGlmZl9yZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5KHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QpIHtcbiAgICAvLyBQcmVwYXJlIGlucHV0IHZhcmlhYmxlcyBmb3IgdXNlciBkZWNpc2lvbiBtb2RlbFxuICAgIGxldCB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50ID0gTnVtYmVyKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgIGxldCB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSA9IGluaXRpYWxfdXNlcl9jb25maWRlbmNlXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgIGlmICh1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCkge1xuICAgICAgICB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSAodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAtIDUpIC8gMi41XG4gICAgfVxuICAgIGxldCBmaW5kbmV3Y29uZl9pbnB1dF92YXJpYWJsZXMgPSB7XG4gICAgICAgIFwidXNlcl9haV9pbml0aWFsX2FncmVlbWVudFwiOiB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50LFxuICAgICAgICBcInVzZXJfaW5pdGlhbF9jb25maWRlbmNlXCI6IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlLFxuICAgICAgICBcInVzZXJfY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICAgICAgXCJ1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0XCI6IHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QsXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGZpbmRuZXdjb25mX3Jlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImZpbmRfYmVzdF9haWNvbmZfdG9fZGlzcGxheVwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCIyc3RlcC10cnVzdC1zdHVkeVwiLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbF9uYW1lOiB1c2VyX2RlY2lzaW9uX21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeShmaW5kbmV3Y29uZl9pbnB1dF92YXJpYWJsZXMpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cblxuICAgIHJldHVybiBmaW5kbmV3Y29uZl9yZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0X2FpX2Fzc2lzdGFuY2UoKSB7XG4gICAgY29uc29sZS5sb2coXCJHZXR0aW5nIEFJIGFzc2lzdGFuY2UuLi5cIilcblxuICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge31cbiAgICBsZXQgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgbGV0IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICBpZiAodXNlVXNlclJlcG9ydGVkVHJ1c3RWYWwpIHtcbiAgICAgICAgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgLSA1KSAvIDIuNVxuICAgICAgICBjb25zb2xlLmxvZyhcIlVzaW5nIHVzZXIgcmVwb3J0ZWQgdHJ1c3QgdmFsdWU6IFwiLCB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsKVxuICAgIH1cblxuICAgIGlmIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJub25lXCIpIHtcbiAgICAgICAgLy8gTm8gaW50ZXJ2ZW50aW9uLCBqdXN0IHNob3cgdGhlIEFJIGFzc2lzdGFuY2UgdGhhdCBpcyBhbHJlYWR5IHBvcHVsYXRlZCBpbiB0aGUgc3BhblxuICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7fVxuICAgIH0gXG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiKSB7XG5cbiAgICAgICAgaWYgKHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IDApIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGFsZGlmZl9yZXN1bHQgPSBhd2FpdCBleGFtaW5lX2VmZmVjdF9vZl90cnVzdF9vbl9kZWNpc2lvbl9tYWtpbmcoKSAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGFsX2RpZmYgPSBhbGRpZmZfcmVzdWx0W1wiYWxfZGlmZlwiXVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyJ3MgbGlrZWxpaG9vZCBvZiBnb2luZyB3aXRoIHRoZSBBSSdzIHByZWRpY3Rpb246IFwiLCBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyJ3MgbGlrZWxpaG9vZCBvZiBnb2luZyB3aXRoIHRoZSBBSSdzIHByZWRpY3Rpb24gd2l0aCBuZXV0cmFsIHRydXN0OiBcIiwgYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFjY2VwdGFuY2UgTGlrZWxpaG9vZCBEaWZmOiBcIiwgYWxfZGlmZilcbiAgICAgICAgICAgIGxldCB1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0ID0gYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiYWNjZXB0YW5jZV9saWtlbGlob29kX3Jlc3VsdHNcIl0gPSBhbGRpZmZfcmVzdWx0XG5cbiAgICAgICAgICAgIGludGVydmVudGlvbl9jb25kaXRpb25fc2F0aXNmaWVkID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChhbF9kaWZmID49IEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9jb25kaXRpb25fc2F0aXNmaWVkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJpbnRlcnZlbnRpb25fY29uZGl0aW9uX3NhdGlzZmllZFwiXSA9IGludGVydmVudGlvbl9jb25kaXRpb25fc2F0aXNmaWVkXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkludGVydmVudGlvbiBjb25kaXRpb24gc2F0aXNmaWVkOiBcIiwgaW50ZXJ2ZW50aW9uX2NvbmRpdGlvbl9zYXRpc2ZpZWQpXG5cbiAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiZml4ZWRcIiAmJiBpbml0aWFsX3VzZXJfZGVjaXNpb24gIT0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSkge1xuICAgICAgICAgICAgICAgIC8vIEZpeGVkIGludGVydmVudGlvbiBzdHJhdGVneSBpcyBhcHBsaWVkIHdoZW5ldmVyOlxuICAgICAgICAgICAgICAgIC8vIDEuIHRoZSB1c2VyJ3MgdHJ1c3QgaXMgbmVnYXRpdmUsIGFuZFxuICAgICAgICAgICAgICAgIC8vIDIuIHRoZSB1c2VyJ3MgaW5pdGlhbCBkZWNpc2lvbiBpcyBkaWZmZXJlbnQgZnJvbSB0aGUgQUkncyBwcmVkaWN0aW9uXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb24gYWxsb3dlZDpcIiwgaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzLmluY2x1ZGVzKHF1ZXN0aW9uX2kpKVxuICAgICAgICAgICAgICAgIGlmICghKGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwcy5pbmNsdWRlcyhxdWVzdGlvbl9pKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb24gbm90IGFsbG93ZWQgYXQgdGhpcyB0aW1lc3RlcFwiKVxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJjb25maWRlbmNlX21hbmlwXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluY3JlYXNlIEFJIGNvbmZpZGVuY2UgYnkgZml4ZWQgYW1vdW50XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld19jb25maWRlbmNlID0gTWF0aC5taW4oMSwgYWlfY29uZmlkZW5jZSArIEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gU3RyaW5nKCggbmV3X2NvbmZpZGVuY2UgKiAxMDApLnRvRml4ZWQoMCkpICsgXCIlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb25maWRlbmNlX2luZmxhdGlvbiA9IChuZXdfY29uZmlkZW5jZSAtIGFpX2NvbmZpZGVuY2UpLnRvRml4ZWQoMilcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2FjdHVhbFwiXSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiY29uZl9uZXdcIl0gPSBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZVxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2luZmxhdGlvblwiXSA9IGNvbmZpZGVuY2VfaW5mbGF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiYWNjZXB0YW5jZV9saWtlbGlob29kLWFjdHVhbGNvbmZfYWN0dWFsdHJ1c3RcIl0gPSBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImFjY2VwdGFuY2VfbGlrZWxpaG9vZC1hY3R1YWxjb25mX25ldXRyYWx0cnVzdFwiXSA9IGFsZGlmZl9yZXN1bHRbXCJuZXV0cmFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJhaV9leHBsYW5hdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgQUkgZXhwbGFuYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJpbnRlcnZlbnRpb25fYXBwbGllZFwiXSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJhZGFwdGl2ZVwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb24gY29uZGl0aW9uIHNhdGlzZmllZDogXCIsIGludGVydmVudGlvbl9jb25kaXRpb25fc2F0aXNmaWVkKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW50ZXJ2ZW50aW9uIGFsbG93ZWQ6XCIsIGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwcy5pbmNsdWRlcyhxdWVzdGlvbl9pKSlcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhxdWVzdGlvbl9pLCBpbnRlcnZlbnRpb25fYWxsb3dlZF90aW1lc3RlcHMpXG4gICAgICAgICAgICAgICAgaWYgKGludGVydmVudGlvbl9jb25kaXRpb25fc2F0aXNmaWVkICYmIGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwcy5pbmNsdWRlcyhxdWVzdGlvbl9pKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiY29uZmlkZW5jZV9tYW5pcFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0ZpbmQgbmVhcmVzdCBBSSBjb25maWRlbmNlIHdpdGggbWluaW1pemluZyBBTERpZmZcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmRuZXdjb25mX3Jlc3VsdCA9IGF3YWl0IGZpbmRfYmVzdF9haWNvbmZfdG9fZGlzcGxheSh1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBTdHJpbmcoKGZpbmRuZXdjb25mX3Jlc3VsdFsnbmV3X2NvbmZfdG9fZGlzcGxheSddICogMTAwKS50b0ZpeGVkKDApKSArIFwiJVwiICAvLyBDb25maWRlbmNlIGluIEFJJ3MgcHJlZGljdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb25maWRlbmNlX2luZmxhdGlvbiA9IChmaW5kbmV3Y29uZl9yZXN1bHRbJ25ld19jb25mX3RvX2Rpc3BsYXknXSAtIGFpX2NvbmZpZGVuY2UpLnRvRml4ZWQoMilcblxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJmaW5kbmV3Y29uZl9yZXN1bHRzXCJdID0gZmluZG5ld2NvbmZfcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImNvbmZfYWN0dWFsXCJdID0gIHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiY29uZl9uZXdcIl0gPSAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiY29uZl9pbmZsYXRpb25cIl0gPSBjb25maWRlbmNlX2luZmxhdGlvblxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImFjY2VwdGFuY2VfbGlrZWxpaG9vZC1hY3R1YWxjb25mX2FjdHVhbHRydXN0XCJdID0gIGFsZGlmZl9yZXN1bHRbXCJhY3R1YWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiYWNjZXB0YW5jZV9saWtlbGlob29kLWFjdHVhbGNvbmZfbmV1dHJhbHRydXN0XCJdID0gYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiYWNjZXB0YW5jZV9saWtlbGlob29kLW5ld2NvbmZfYWN0dWFsdHJ1c3RcIl0gPSBmaW5kbmV3Y29uZl9yZXN1bHRbXCJuZXdfY29uZl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYWlfZXhwbGFuYXRpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIEFJIGV4cGxhbmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSBmYWxzZVxuICAgICAgICB9XG5cbiAgICB9XG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfb3ZlcnRydXN0XCIpIHtcblxuICAgICAgICBpZiAodXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gMCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgYWxkaWZmX3Jlc3VsdCA9IGF3YWl0IGV4YW1pbmVfZWZmZWN0X29mX3RydXN0X29uX2RlY2lzaW9uX21ha2luZygpICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgYWxfZGlmZiA9IGFsZGlmZl9yZXN1bHRbXCJhbF9kaWZmXCJdXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIncyBsaWtlbGlob29kIG9mIGdvaW5nIHdpdGggdGhlIEFJJ3MgcHJlZGljdGlvbjogXCIsIGFsZGlmZl9yZXN1bHRbXCJhY3R1YWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVzZXIncyBsaWtlbGlob29kIG9mIGdvaW5nIHdpdGggdGhlIEFJJ3MgcHJlZGljdGlvbiB3aXRoIG5ldXRyYWwgdHJ1c3Q6IFwiLCBhbGRpZmZfcmVzdWx0W1wibmV1dHJhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWNjZXB0YW5jZSBMaWtlbGlob29kIERpZmY6IFwiLCBhbF9kaWZmKVxuICAgICAgICAgICAgbGV0IHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QgPSBhbGRpZmZfcmVzdWx0W1wibmV1dHJhbF90cnVzdFwiXVtcImFjY2VwdGFuY2VfbGlrZWxpaG9vZFwiXVxuICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RfcmVzdWx0c1wiXSA9IGFsZGlmZl9yZXN1bHRcblxuICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2NvbmRpdGlvbl9zYXRpc2ZpZWQgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKGFsX2RpZmYgPj0gSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2NvbmRpdGlvbl9zYXRpc2ZpZWQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9jb25kaXRpb25fc2F0aXNmaWVkXCJdID0gaW50ZXJ2ZW50aW9uX2NvbmRpdGlvbl9zYXRpc2ZpZWRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiZml4ZWRcIikge1xuXG4gICAgICAgICAgICAgICAgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcImNvbmZpZGVuY2VfbWFuaXBcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWNyZWFzZSBBSSBjb25maWRlbmNlIGJ5IGZpeGVkIGFtb3VudFxuICAgICAgICAgICAgICAgICAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3X2NvbmZpZGVuY2UgPSBNYXRoLm1heCgwLjUsIE1hdGgubWluKDEsIGFpX2NvbmZpZGVuY2UgLSBJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UpKVxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IFN0cmluZygoIG5ld19jb25maWRlbmNlICogMTAwKS50b0ZpeGVkKDApKSArIFwiJVwiXG5cbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2FjdHVhbFwiXSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX25ld1wiXSA9IGRpc3BsYXllZF9haV9jb25maWRlbmNlXG4gICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiYWNjZXB0YW5jZV9saWtlbGlob29kLWFjdHVhbGNvbmZfYWN0dWFsdHJ1c3RcIl0gPSBhbGRpZmZfcmVzdWx0W1wiYWN0dWFsX3RydXN0XCJdW1wiYWNjZXB0YW5jZV9saWtlbGlob29kXCJdXG4gICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiYWNjZXB0YW5jZV9saWtlbGlob29kLWFjdHVhbGNvbmZfbmV1dHJhbHRydXN0XCJdID0gYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJpbnRlcnZlbnRpb25fYXBwbGllZFwiXSA9IHRydWVcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcImFpX2V4cGxhbmF0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIEFJIGV4cGxhbmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJpbnRlcnZlbnRpb25fYXBwbGllZFwiXSA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJhZGFwdGl2ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGludGVydmVudGlvbl9jb25kaXRpb25fc2F0aXNmaWVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJjb25maWRlbmNlX21hbmlwXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRmluZCBuZWFyZXN0IEFJIGNvbmZpZGVuY2Ugd2l0aCBtaW5pbWl6aW5nIEFMRGlmZlxuICAgICAgICAgICAgICAgICAgICAgICAgZmluZG5ld2NvbmZfcmVzdWx0ID0gYXdhaXQgZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5KHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QpXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IFN0cmluZygoZmluZG5ld2NvbmZfcmVzdWx0WyduZXdfY29uZl90b19kaXNwbGF5J10gKiAxMDApLnRvRml4ZWQoMCkpICsgXCIlXCIgIC8vIENvbmZpZGVuY2UgaW4gQUkncyBwcmVkaWN0aW9uXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiZmluZG5ld2NvbmZfcmVzdWx0c1wiXSA9IGZpbmRuZXdjb25mX3Jlc3VsdFxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2FjdHVhbFwiXSA9ICBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImNvbmZfbmV3XCJdID0gIGRpc3BsYXllZF9haV9jb25maWRlbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImFjY2VwdGFuY2VfbGlrZWxpaG9vZC1hY3R1YWxjb25mX2FjdHVhbHRydXN0XCJdID0gIGFsZGlmZl9yZXN1bHRbXCJhY3R1YWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiYWNjZXB0YW5jZV9saWtlbGlob29kLWFjdHVhbGNvbmZfbmV1dHJhbHRydXN0XCJdID0gYWxkaWZmX3Jlc3VsdFtcIm5ldXRyYWxfdHJ1c3RcIl1bXCJhY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiYWNjZXB0YW5jZV9saWtlbGlob29kLW5ld2NvbmZfYWN0dWFsdHJ1c3RcIl0gPSBmaW5kbmV3Y29uZl9yZXN1bHRbXCJuZXdfY29uZl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RcIl1cbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYWlfZXhwbGFuYXRpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIEFJIGV4cGxhbmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIjogZmFsc2V9XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIGludGVydmVudGlvbl9kZXRhaWxzWyd0cnVzdF9sZXZlbF9hdF9zdGFydF9vZl9pbnRlcmFjdGlvbiddID0gdXNlcl9jdXJyZW50X3RydXN0X2xldmVsXG4gICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbJ2FjdHVhbF9haV9jb25maWRlbmNlJ10gPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbJ2Rpc3BsYXllZF9haV9jb25maWRlbmNlJ10gPSBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZVxuICAgIGNvbnNvbGUubG9nKFwiQUkgQXNzaXN0YW5jZSBJbnRlcnZlbnRpb24gRGV0YWlsczogXCIsIGludGVydmVudGlvbl9kZXRhaWxzKVxuXG4gICAgJChcIiNhaV9wcmVkaWN0aW9uX3NwYW5cIikuaHRtbChcIk9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgJChcIiNhaV9jb25maWRlbmNlX3NwYW5cIikuaHRtbChkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSlcblxuICAgICQoXCIjYWlfYXNzaXN0YW5jZV9kaXZcIikuc2hvdygpXG4gICAgJChcIiNmaW5hbF91c2VyX2RlY2lzaW9uX2RpdlwiKS5zaG93KClcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0X3RydXN0X2VmZmVjdCgpIHtcbiAgICAvLyBHZXQgdHJ1c3QgZWZmZWN0IGZvciB0aGlzIGludGVyYWN0aW9uXG4gICAgbGV0IGluaXRpYWxfdXNlcl9jb3JyZWN0bmVzcyA9IE51bWJlcihpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0pXG4gICAgbGV0IGFpX2NvcnJlY3RuZXNzID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0pXG4gICAgbGV0IGZpbmFsX3VzZXJfY29ycmVjdG5lc3MgPSBOdW1iZXIoZmluYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJjb3JyZWN0X29wdGlvblwiXSlcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB0cnVzdF9lZmZlY3RfaW5wdXRzID0ge1xuICAgICAgICBcImluaXRpYWxfdXNlcl9jb3JyZWN0bmVzc1wiOiBpbml0aWFsX3VzZXJfY29ycmVjdG5lc3MsXG4gICAgICAgIFwiYWlfY29ycmVjdG5lc3NcIjogYWlfY29ycmVjdG5lc3MsXG4gICAgICAgIFwiZmluYWxfdXNlcl9jb3JyZWN0bmVzc1wiOiBmaW5hbF91c2VyX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImFpX2NvbmZpZGVuY2VcIjogYWlfY29uZmlkZW5jZSxcbiAgICAgICAgXCJ1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIlRydXN0IGVmZmVjdCBpbnB1dHM6IFwiLCB0cnVzdF9lZmZlY3RfaW5wdXRzKVxuICAgIC8vbGV0IHRydXN0X2VmZmVjdCA9IGdldF91c2VyX3RydXN0X2VmZmVjdCh0cnVzdF9lZmZlY3RfaW5wdXRzKVxuICAgIGxldCByZXN1bHQ6IGFueVxuICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImdldF90cnVzdF9lZmZlY3RcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwiMnN0ZXAtdHJ1c3Qtc3R1ZHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxfbmFtZTogdHJ1c3RfZWZmZWN0X21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeSh0cnVzdF9lZmZlY3RfaW5wdXRzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIlRydXN0IGVmZmVjdCBwcmVkaWN0aW9uIHJlc3VsdDogXCIsIHJlc3VsdClcbiAgICBsZXQgdHJ1c3RfZWZmZWN0ID0gYXdhaXQgcmVzdWx0W1widHJ1c3RfZWZmZWN0XCJdXG5cbiAgICB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCArIHRydXN0X2VmZmVjdFxuICAgIHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEgPSB7XG4gICAgICAgIFwibW9kZWxfaW5wdXRzXCI6IHRydXN0X2VmZmVjdF9pbnB1dHMsXG4gICAgICAgIFwicHJlZGljdGVkX3RydXN0X2VmZmVjdFwiOiB0cnVzdF9lZmZlY3QsXG4gICAgICAgIFwidXNlcl9uZXdfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCxcbiAgICB9XG4gICAgcmV0dXJuIHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGFcbn1cblxuZnVuY3Rpb24gbWFrZV9maW5hbF91c2VyX2RlY2lzaW9uKG9wdGlvbikge1xuICAgIHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCA9IERhdGUubm93KClcbiAgICBmaW5hbF91c2VyX2RlY2lzaW9uID0gb3B0aW9uXG4gICAgYXNzZXJ0KG9wdGlvbiA9PSAxIHx8IG9wdGlvbiA9PSAyLCBcIkludmFsaWQgb3B0aW9uIVwiKVxuICAgIGlmIChvcHRpb24gPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG4gICAgJChcIiNmaW5hbF91c2VyX2NvbmZpZGVuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxufVxuJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbigxKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24oMikpXG5cbmZ1bmN0aW9uIGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoY29uZl9sZXZlbCkge1xuICAgIHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgZmluYWxfdXNlcl9jb25maWRlbmNlID0gY29uZl9sZXZlbFxuICAgIGFzc2VydChjb25mX2xldmVsID09IDEgfHwgY29uZl9sZXZlbCA9PSAyIHx8IGNvbmZfbGV2ZWwgPT0gMywgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICBpZiAoY29uZl9sZXZlbCA9PSAxKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgIH0gZWxzZSBpZiAoY29uZl9sZXZlbCA9PSAyKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjNcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgIH1cblxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjNcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIHNob3dfcmVzdWx0KClcbn1cbiQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoMSkpXG4kKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKDIpKVxuJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSgzKSlcblxuXG5hc3luYyBmdW5jdGlvbiBzaG93X3Jlc3VsdCgpIHtcblxuICAgIGxldCBjb3JyZWN0X29wdGlvbjogbnVtYmVyID0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl1cbiAgICBsZXQgdXNlcl9pc19jb3JyZWN0OiBib29sZWFuID0gY29ycmVjdF9vcHRpb24gPT0gZmluYWxfdXNlcl9kZWNpc2lvblxuXG4gICAgbGV0IGFpX2lzX2NvcnJlY3Q6IGJvb2xlYW4gPSBxdWVzdGlvbiFbXCJhaV9pc19jb3JyZWN0XCJdXG4gICAgbGV0IG1lc3NhZ2UgPSBcIkNvcnJlY3QgYW5zd2VyOiA8Yj5PcHRpb24gXCIgKyBjb3JyZWN0X29wdGlvbiArIFwiPC9iPi48YnI+XCJcbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJZb3UgcGlja2VkIE9wdGlvbiBcIiArIGZpbmFsX3VzZXJfZGVjaXNpb24gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtZXNzYWdlICs9IFwiWW91IHBpY2tlZCBPcHRpb24gXCIgKyBmaW5hbF91c2VyX2RlY2lzaW9uICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfaW5jb3JyZWN0Jz48Yj5pbmNvcnJlY3Q8L2I+PC9zcGFuPi48YnI+XCJcbiAgICB9XG4gICAgaWYgKGFpX2lzX2NvcnJlY3QpIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIlRoZSBBSSBwaWNrZWQgT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2NvcnJlY3QnPjxiPmNvcnJlY3Q8Yj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIlRoZSBBSSBwaWNrZWQgT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+aW5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGlmICh1c2VyX2lzX2NvcnJlY3QpIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIjxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5Zb3UgcmVjZWl2ZSBhIHJld2FyZCBvZiAkMC4xMC48L2I+PC9zcGFuPlwiXG4gICAgICAgIGJhbGFuY2UgKz0gMC4xXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtZXNzYWdlICs9IFwiPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+WW91IGRvIG5vdCByZWNlaXZlIGFueSByZXdhcmQuPC9iPjwvc3Bhbj5cIlxuICAgIH1cblxuICAgIG1lc3NhZ2UgKz0gXCI8YnI+XCJcbiAgICAvL2lmIChzdWNjZXNzKSB7XG4gICAgLy8gICAgbWVzc2FnZSArPSBgWW91IGdhaW4gJCR7KGJldF92YWwqYmV0X3ZhbF9yYXRpbykudG9GaXhlZCgyKX0uYFxuICAgIC8vICAgIGJhbGFuY2UgKz0gYmV0X3ZhbCpiZXRfdmFsX3JhdGlvXG4gICAgLy99IGVsc2Uge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gYFlvdSBsb3NlICQkeyhiZXRfdmFsLzEuMCkudG9GaXhlZCgyKX0uYFxuICAgIC8vICAgIGJhbGFuY2UgLT0gYmV0X3ZhbC8xLjBcbiAgICAvLyAgICBiYWxhbmNlID0gTWF0aC5tYXgoMCwgYmFsYW5jZSlcbiAgICAvL31cbiAgICAkKFwiI2JhbGFuY2VcIikudGV4dChgQmFsYW5jZTogJCR7YmFsYW5jZS50b0ZpeGVkKDIpfSArICQxLjBgKVxuICAgICQoXCIjcmVzdWx0X3NwYW5cIikuaHRtbChtZXNzYWdlKVxuICAgIC8vJChcIiNidXR0b25fbmV4dFwiKS5zaG93KClcbiAgICAkKFwiI3Jlc3VsdF9zcGFuXCIpLnNob3coKVxuICAgIC8vJChcIiNidXR0b25fcGxhY2VfYmV0XCIpLmhpZGUoKVxuICAgIGlmIChza2lwX3RydXN0X3JlcG9ydGluZykgICB7XG4gICAgICAgICQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAkKFwiI3VzZXJfdHJ1c3RfcmVwb3J0X2RpdlwiKS5zaG93KClcbiAgICB9XG5cbiAgICB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0gYXdhaXQgZ2V0X3RydXN0X2VmZmVjdCgpXG5cbiAgICAvLyQoJyNyYW5nZV92YWwnKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG59XG5cbi8vJChcIiNidXR0b25fcGxhY2VfYmV0XCIpLm9uKFwiY2xpY2tcIiwgc2hvd19yZXN1bHQpXG5cbmZ1bmN0aW9uIG5leHRfcXVlc3Rpb24oKSB7XG4gICAgLy8gcmVzdG9yZSBwcmV2aW91cyBzdGF0ZSBvZiBVSVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuXG4gICAgJChcIiNhaV9hc3Npc3RhbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2luaXRpYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2ZpbmFsX3VzZXJfZGVjaXNpb25fZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjZmluYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKCcjcmFuZ2VfdmFsJykucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiN1c2VyX3RydXN0X3JlcG9ydF9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNidXR0b25fcGxhY2VfYmV0XCIpLmhpZGUoKVxuICAgICQoXCIjYnV0dG9uX25leHRcIikuaGlkZSgpXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5oaWRlKClcbiAgICBpZiAocXVlc3Rpb25faSA9PSAtMSkge1xuICAgICAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChcIi1cIilcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgICQoXCIjcmFuZ2VfdGV4dFwiKS50ZXh0KGBCZWZvcmUgdGhpcyBpbnRlcmFjdGlvbiwgeW91ciB0cnVzdCBpbiB0aGUgQUk6ICR7dXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAqIDEwfSAvIDEwMC5gKVxuICAgIH1cbiAgICAkKFwiI3JhbmdlX3ZhbFwiKS52YWwodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbClcbiAgICBwcmV2X3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgPSB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsXG5cbiAgICBxdWVzdGlvbl9pICs9IDFcbiAgICBpZiAocXVlc3Rpb25faSA+PSBkYXRhLmxlbmd0aCkge1xuICAgICAgICAkKFwiI21haW5fYm94X2V4cGVyaW1lbnRcIikuaGlkZSgpXG4gICAgICAgIGlmIChNT0NLTU9ERSkge1xuICAgICAgICAgICAgJChcIiNtYWluX2JveF9lbmRfbW9ja1wiKS5zaG93KClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCIjbWFpbl9ib3hfZW5kXCIpLnNob3coKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBxdWVzdGlvbiA9IGRhdGFbcXVlc3Rpb25faV1cblxuICAgICQoXCIjcXVlc3Rpb25fc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcInF1ZXN0aW9uXCJdKVxuICAgICQoXCIjb3B0aW9uMV9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wib3B0aW9uMVwiXSlcbiAgICAkKFwiI29wdGlvbjJfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcIm9wdGlvbjJcIl0pXG4gICAgLy8kKFwiI2FpX3ByZWRpY3Rpb25fc3BhblwiKS5odG1sKFwiT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICAvLyQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSlcblxuICAgIC8vIHNldCBiZXQgdmFsdWUgcmF0aW9cbiAgICBpZihxdWVzdGlvbi5oYXNPd25Qcm9wZXJ0eShcInJld2FyZF9yYXRpb1wiKSkge1xuICAgICAgICBsZXQgW3JhdGlvMSwgcmF0aW8yXSA9IHF1ZXN0aW9uW1wicmV3YXJkX3JhdGlvXCJdXG4gICAgICAgIHJhdGlvMSA9IE51bWJlcihyYXRpbzEpXG4gICAgICAgIHJhdGlvMiA9IE51bWJlcihyYXRpbzIpXG4gICAgICAgIGJldF92YWxfcmF0aW8gPSByYXRpbzEvcmF0aW8yXG4gICAgfSBlbHNlIHtcbiAgICAgICAgYmV0X3ZhbF9yYXRpbyA9IDFcbiAgICB9XG5cbiAgICB0aW1lX3F1ZXN0aW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgICQoXCIjcHJvZ3Jlc3NcIikudGV4dChgUHJvZ3Jlc3M6ICR7cXVlc3Rpb25faSArIDF9IC8gJHtkYXRhLmxlbmd0aH1gKVxufVxuXG4vLyBnZXQgdXNlciBpZCBhbmQgbG9hZCBxdWV1ZVxuLy8gdHJ5IHRvIHNlZSBpZiBzdGFydCBvdmVycmlkZSB3YXMgcGFzc2VkXG5jb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuY29uc3Qgc3RhcnRPdmVycmlkZSA9IHVybFBhcmFtcy5nZXQoJ3N0YXJ0Jyk7XG5jb25zdCBVSURGcm9tVVJMID0gdXJsUGFyYW1zLmdldChcInVpZFwiKVxuZ2xvYmFsVGhpcy51cmxfZGF0YSA9IHBhcmFtc1RvT2JqZWN0KHVybFBhcmFtcy5lbnRyaWVzKCkpXG5cbmlmIChVSURGcm9tVVJMICE9IG51bGwpIHtcbiAgICBnbG9iYWxUaGlzLnVpZCA9IFVJREZyb21VUkwgYXMgc3RyaW5nXG4gICAgaWYgKGdsb2JhbFRoaXMudWlkID09IFwicHJvbGlmaWNfcmFuZG9tXCIpIHtcbiAgICAgICAgbGV0IHF1ZXVlX2lkID0gYCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApfWAucGFkU3RhcnQoMywgXCIwXCIpXG4gICAgICAgIGdsb2JhbFRoaXMudWlkID0gYCR7dXJsUGFyYW1zLmdldChcInByb2xpZmljX3F1ZXVlX25hbWVcIil9LyR7cXVldWVfaWR9YFxuICAgIH1cbn0gZWxzZSBpZiAoREVWTU9ERSkge1xuICAgIGdsb2JhbFRoaXMudWlkID0gXCJkZW1vXCJcbn0gZWxzZSB7XG4gICAgbGV0IFVJRF9tYXliZTogYW55ID0gbnVsbFxuICAgIHdoaWxlIChVSURfbWF5YmUgPT0gbnVsbCkge1xuICAgICAgICBVSURfbWF5YmUgPSBwcm9tcHQoXCJFbnRlciB5b3VyIHVzZXIgaWQuIFBsZWFzZSBnZXQgaW4gdG91Y2ggaWYgeW91IHdlcmUgbm90IGFzc2lnbmVkIGFuIGlkIGJ1dCB3aXNoIHRvIHBhcnRpY2lwYXRlIGluIHRoaXMgZXhwZXJpbWVudC5cIilcbiAgICB9XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBVSURfbWF5YmUhXG59XG5sZXQgaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzOiBudW1iZXJbXSA9IFtdXG5pZiAoZ2xvYmFsVGhpcy51aWQuaW5jbHVkZXMoXCIzNDNcIikpIHtcbiAgICBpbnRlcnZlbnRpb25fYWxsb3dlZF90aW1lc3RlcHMgPSBbNywgOCwgOSwgMTcsIDE4LCAxOSwgMjcsIDI4LCAyOV1cbn0gZWxzZSBpZiAoZ2xvYmFsVGhpcy51aWQuaW5jbHVkZXMoXCI0MzRcIikpIHtcbiAgICBpbnRlcnZlbnRpb25fYWxsb3dlZF90aW1lc3RlcHMgPSBbNywgOCwgOSwgMTcsIDE4LCAxOSwgMjcsIDI4LCAyOV1cbn0gZWxzZSBpZiAoZ2xvYmFsVGhpcy51aWQuaW5jbHVkZXMoXCI3MzVcIikpIHtcbiAgICBpbnRlcnZlbnRpb25fYWxsb3dlZF90aW1lc3RlcHMgPSBbMTAsIDExLCAxMiwgMTMsIDE0LCAyNSwgMjYsIDI3LCAyOCwgMjldXG59XG5cbi8vY29uc3QgdmFsaWRBSUludGVydmVudGlvbnMgPSBbXCJub25lXCIsIFwiZHVtbXlcIiwgXCJjb25maWRlbmNlX2luZmxhdGlvblwiLCBcImNvbmZpZGVuY2VfaW5mbGF0aW9uX2ZpeGVkXCIsIFwiY29uZmlkZW5jZV9kZWZsYXRpb25cIl1cbi8vbGV0IEFJSW50ZXJ2ZW50aW9uVHlwZSA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdHlwZVwiKVxuLy9sZXQgSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdGhyZXNob2xkXCIpKVxuLy9sZXQgSW50ZXJ2ZW50aW9uRml4ZWRDb25mSW5jcmVhc2UgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl9maXhlZGNvbmZpbmNyZWFzZVwiKSlcbmNvbnN0IHZhbGlkSW50ZXJ2ZW50aW9uR29hbHMgPSBbXCJub25lXCIsIFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiLCBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiXVxubGV0IEFJSW50ZXJ2ZW50aW9uR29hbCA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fZ29hbFwiKVxuaWYgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBudWxsKSB7QUlJbnRlcnZlbnRpb25Hb2FsID0gXCJub25lXCJ9XG5pZiAoIXZhbGlkSW50ZXJ2ZW50aW9uR29hbHMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25Hb2FsISkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uIEdvYWw6IFwiICsgQUlJbnRlcnZlbnRpb25Hb2FsKVxufVxuXG5jb25zdCB2YWxpZEludGVydmVudGlvblR5cGVzID0gW1wibm9uZVwiLCBcImR1bW15XCIsIFwiY29uZmlkZW5jZV9tYW5pcFwiLCBcImFpX2V4cGxhbmF0aW9uXCJdXG5sZXQgQUlJbnRlcnZlbnRpb25UeXBlID0gdXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90eXBlXCIpXG5pZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IG51bGwpIHtBSUludGVydmVudGlvblR5cGUgPSBcIm5vbmVcIn0gXG5pZiAoIXZhbGlkSW50ZXJ2ZW50aW9uVHlwZXMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25UeXBlISkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uOiBcIiArIEFJSW50ZXJ2ZW50aW9uVHlwZSlcbn1cblxuY29uc3QgdmFsaWRJbnRlcnZlbnRpb25TdHJhdGVnaWVzID0gW1wiZHVtbXlcIiwgXCJmaXhlZFwiLCBcImFkYXB0aXZlXCJdXG5sZXQgQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fc3RyYXRlZ3lcIilcbmlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IG51bGwpIHtBSUludGVydmVudGlvblN0cmF0ZWd5ID0gXCJkdW1teVwifVxuaWYgKCF2YWxpZEludGVydmVudGlvblN0cmF0ZWdpZXMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25TdHJhdGVneSEpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBSSBBc3Npc3RhbmNlIEludGVydmVudGlvbiBTdHJhdGVneTogXCIgKyBBSUludGVydmVudGlvblN0cmF0ZWd5KVxufVxuXG4vLyBJbnRlcnZlbnRpb24tc3BlY2lmaWMgcGFyYW1ldGVyc1xubGV0IEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3RocmVzaG9sZFwiKSlcbmlmIChJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPT0gbnVsbCkge0ludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCA9IC0xfVxubGV0IEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX2ZpeGVkY29uZmNoYW5nZVwiKSlcbmlmIChJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgPT0gbnVsbCkge0ludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA9IDB9XG5cbmxldCB1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCA9IHVybFBhcmFtcy5nZXQoXCJ1c2VfdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbFwiKSA9PSBcInRydWVcIlxuaWYgKHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsID09IG51bGwpIHt1c2VVc2VyUmVwb3J0ZWRUcnVzdFZhbCA9IGZhbHNlfVxuXG5sZXQgc2tpcF90cnVzdF9yZXBvcnRpbmcgPSB1cmxQYXJhbXMuZ2V0KFwic2tpcF90cnVzdF9yZXBvcnRpbmdcIikgPT0gXCJ0cnVlXCJcbmlmIChza2lwX3RydXN0X3JlcG9ydGluZyA9PSBudWxsKSB7c2tpcF90cnVzdF9yZXBvcnRpbmcgPSBmYWxzZX1cblxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl9nb2FsXCJdID0gQUlJbnRlcnZlbnRpb25Hb2FsXG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX3R5cGVcIl0gPSBBSUludGVydmVudGlvblR5cGVcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fc3RyYXRlZ3lcIl0gPSBBSUludGVydmVudGlvblN0cmF0ZWd5XG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX3RocmVzaG9sZFwiXSA9IEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZFxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl9maXhlZGNvbmZjaGFuZ2VcIl0gPSBJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2Vcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJ1c2VfdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbFwiXSA9IHVzZVVzZXJSZXBvcnRlZFRydXN0VmFsXG5cbi8vIHZlcnNpb24gZm9yIHBhcGVyXG5pZiAoZ2xvYmFsVGhpcy51aWQuc3RhcnRzV2l0aChcImRlbW9fcGFwZXJcIikpIHtcbiAgICBNT0NLTU9ERSA9IHRydWVcbn0gZWxzZSB7XG5cbn1cbmNvbnNvbGUubG9nKFwiUnVubmluZyB3aXRoIFVJRFwiLCBnbG9iYWxUaGlzLnVpZClcbmxvYWRfZGF0YSgpLmNhdGNoKChfZXJyb3IpID0+IHtcbiAgICAvL2FsZXJ0KFwiSW52YWxpZCB1c2VyIGlkLlwiKVxuICAgIGNvbnNvbGUubG9nKFwiSW52YWxpZCB1c2VyIGlkLlwiKVxuICAgIGNvbnNvbGUubG9nKGdsb2JhbFRoaXMudWlkISlcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbn1cbikudGhlbigobmV3X2RhdGEpID0+IHtcbiAgICBkYXRhID0gbmV3X2RhdGFcbiAgICBpZiAoc3RhcnRPdmVycmlkZSAhPSBudWxsKSB7XG4gICAgICAgIHF1ZXN0aW9uX2kgPSBwYXJzZUludChzdGFydE92ZXJyaWRlKSAtIDFcbiAgICAgICAgY29uc29sZS5sb2coXCJTdGFydGluZyBmcm9tXCIsIHF1ZXN0aW9uX2kpXG4gICAgfVxuICAgIC8vIG5leHRfcXVlc3Rpb24oKVxuICAgIG5leHRfaW5zdHJ1Y3Rpb25zKDApXG4gICAgJChcIiNtYWluX2JveF9pbnN0cnVjdGlvbnNcIikuc2hvdygpXG4gICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLmhpZGUoKVxufSlcblxuY29uc29sZS5sb2coXCJTdGFydGluZyBzZXNzaW9uIHdpdGggVUlEOlwiLCBnbG9iYWxUaGlzLnVpZCEpXG5cbmxldCBhbGVydF9hY3RpdmUgPSBmYWxzZVxuZG9jdW1lbnQub252aXNpYmlsaXR5Y2hhbmdlID0gKCkgPT4ge1xuICAgIGlmICghYWxlcnRfYWN0aXZlKSB7XG4gICAgICAgIGNvdW50X2V4aXRlZF9wYWdlICs9IDFcbiAgICAgICAgYWxlcnRfYWN0aXZlID0gdHJ1ZVxuICAgICAgICBpZiAoIShnbG9iYWxUaGlzLnVpZCEuc3RhcnRzV2l0aChcImRlbW9cIikpICYmICEoREVWTU9ERSkpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlIGRvbid0IGxlYXZlIHRoZSBwYWdlLiBJZiB5b3UgZG8gc28gYWdhaW4sIHdlIG1heSByZXN0cmljdCBwYXlpbmcgeW91LlwiKVxuICAgICAgICB9XG4gICAgICAgIGFsZXJ0X2FjdGl2ZSA9IGZhbHNlXG4gICAgfVxufSIsImZ1bmN0aW9uIHBhcmFtc1RvT2JqZWN0KGVudHJpZXMpIHtcbiAgY29uc3QgcmVzdWx0ID0ge31cbiAgLy8gZWFjaCAnZW50cnknIGlzIGEgW2tleSwgdmFsdWVdIHR1cHBsZVxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBlbnRyaWVzKSB7XG4gICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgeyBwYXJhbXNUb09iamVjdCB9Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU0VSVkVSX0xPR19ST09UIiwiTU9DS01PREUiLCJVU0VSX01PREVMU19ST09UIiwidXNlcl9kZWNpc2lvbl9tb2RlbCIsImRhdGEiLCJ0aW1lX3F1ZXN0aW9uX3N0YXJ0IiwidGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCIsInRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQiLCJ0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCIsInRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCIsInF1ZXN0aW9uX2kiLCJxdWVzdGlvbiIsImluaXRpYWxfdXNlcl9kZWNpc2lvbiIsImZpbmFsX3VzZXJfZGVjaXNpb24iLCJpbml0aWFsX3VzZXJfY29uZmlkZW5jZSIsImZpbmFsX3VzZXJfY29uZmlkZW5jZSIsImJhbGFuY2UiLCJ1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIiwicHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIiwiYmV0X3ZhbF9yYXRpbyIsImluc3RydWN0aW9uX2kiLCJjb3VudF9leGl0ZWRfcGFnZSIsImludGVydmVudGlvbl9jb25kaXRpb25fc2F0aXNmaWVkIiwidXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCIsImludGVydmVudGlvbl9kZXRhaWxzIiwidHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YSIsImZpbmRuZXdjb25mX3Jlc3VsdCIsImFzc2VydCIsImNvbmRpdGlvbiIsIm1lc3NhZ2UiLCJuZXh0X2luc3RydWN0aW9ucyIsImluY3JlbWVudCIsInNraXBfdHJ1c3RfcmVwb3J0aW5nIiwiJCIsImF0dHIiLCJyZW1vdmVBdHRyIiwic2hvdyIsInZhbCIsImhpZGUiLCJuZXh0X3F1ZXN0aW9uIiwiY2hpbGRyZW4iLCJlYWNoIiwiXyIsImVsIiwibWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24iLCJvcHRpb24iLCJEYXRlIiwibm93IiwiZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlIiwiY29uZl9sZXZlbCIsImFzeW5jIiwiY29uc29sZSIsImxvZyIsImRpc3BsYXllZF9haV9jb25maWRlbmNlIiwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsIiwidXNlVXNlclJlcG9ydGVkVHJ1c3RWYWwiLCJBSUludGVydmVudGlvbkdvYWwiLCJhbGRpZmZfcmVzdWx0IiwiZXhhbWluZV9lZmZlY3Rfb2ZfdHJ1c3Rfb25fZGVjaXNpb25fbWFraW5nIiwiYWxfZGlmZiIsInVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QiLCJJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQiLCJBSUludGVydmVudGlvblN0cmF0ZWd5IiwiaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzIiwiaW5jbHVkZXMiLCJBSUludGVydmVudGlvblR5cGUiLCJhaV9jb25maWRlbmNlIiwiTnVtYmVyIiwicmVwbGFjZSIsIm5ld19jb25maWRlbmNlIiwiTWF0aCIsIm1pbiIsIkludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSIsIlN0cmluZyIsInRvRml4ZWQiLCJjb25maWRlbmNlX2luZmxhdGlvbiIsImZpbmRfYmVzdF9haWNvbmZfdG9fZGlzcGxheSIsIm1heCIsImh0bWwiLCJnZXRfYWlfYXNzaXN0YW5jZSIsInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQiLCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZSIsInVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzIiwiYWpheCIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9qZWN0IiwibW9kZWxfbmFtZSIsInBheWxvYWQiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJlIiwiZmluZG5ld2NvbmZfaW5wdXRfdmFyaWFibGVzIiwibWFrZV9maW5hbF91c2VyX2RlY2lzaW9uIiwiZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSIsImNvcnJlY3Rfb3B0aW9uIiwidXNlcl9pc19jb3JyZWN0IiwiYWlfaXNfY29ycmVjdCIsInRleHQiLCJyZXN1bHQiLCJ0cnVzdF9lZmZlY3RfaW5wdXRzIiwidHJ1c3RfZWZmZWN0IiwiZ2V0X3RydXN0X2VmZmVjdCIsInNob3dfcmVzdWx0IiwibGVuZ3RoIiwicmF0aW8xIiwicmF0aW8yIiwib24iLCJsb2dnZWRfZGF0YSIsImdsb2JhbFRoaXMiLCJ1cmxfZGF0YSIsInVpZCIsImxvZ19kYXRhIiwidGhpcyIsInVybFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3RhcnRPdmVycmlkZSIsIlVJREZyb21VUkwiLCJlbnRyaWVzIiwidmFsdWUiLCJwYXJhbXNUb09iamVjdCIsInF1ZXVlX2lkIiwiZmxvb3IiLCJyYW5kb20iLCJwYWRTdGFydCIsIlVJRF9tYXliZSIsInByb21wdCIsIkVycm9yIiwic3RhcnRzV2l0aCIsImdldEpTT04iLCJsb2FkX2RhdGEiLCJjYXRjaCIsIl9lcnJvciIsInJlbG9hZCIsInRoZW4iLCJuZXdfZGF0YSIsInBhcnNlSW50IiwiYWxlcnRfYWN0aXZlIiwiZG9jdW1lbnQiLCJvbnZpc2liaWxpdHljaGFuZ2UiLCJhbGVydCJdLCJzb3VyY2VSb290IjoiIn0=