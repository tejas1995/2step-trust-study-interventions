(()=>{"use strict";var t={d:(n,i)=>{for(var e in i)t.o(i,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:i[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)};t.d({},{o:()=>a});let n="https://tejassrinivasan.pythonanywhere.com/",i=null;function e(t,n,e,o,a,l=!0){i&&(clearInterval(i),i=null),e.forEach((t=>t.setAttribute("disabled","true")));let r=document.createElement("div");r.id=`timer_${n.id}`,r.style.fontWeight="bold",r.style.marginTop="10px",n.appendChild(r);let _=t;r.textContent=l?a+` You can make your selection in ${_} second(s).`:a,i=setInterval((()=>{_--,_>=0?r.textContent=l?a+` You can make your selection in ${_} second(s).`:a:(null!==i&&(clearInterval(i),i=null),i=null,n.removeChild(r),e.forEach((t=>t.removeAttribute("disabled"))),o&&o())}),1e3)}const o=t=>new Promise((n=>setTimeout(n,t)));var a=!1,l=[];let r,_,s,c,d,u=-1,p=null,v=-1,f=-1,g=-1,b=-1,h=0,m=5,x=-1,A=1,y=0,w=0,I=0;var T={},k={};function E(t,n){if(!t)throw n||"Assertion failed"}function B(t){y+=t,K&&5==y&&(y+=t),0==y?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),y>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==y&&($("#main_box_instructions").hide(),$("#main_box_experiment").show(),C()),$("#main_box_instructions").children(":not(input)").each(((t,n)=>{$(n).hide()})),$(`#instructions_${y}`).show()}function N(t){c=Date.now(),v=t,E(1==t||2==t,"Invalid option!"),1==t?($("#button_initial_decision_option1").attr("activedecision","true"),$("#button_initial_decision_option2").removeAttr("activedecision")):($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").attr("activedecision","true")),$("#initial_user_confidence_div").show(),$("#button_initial_decision_option1").attr("disabled","true"),$("#button_initial_decision_option2").attr("disabled","true"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled")}function S(t){_=Date.now(),g=t,E(1==t||2==t||3==t,"Invalid option!"),1==t?($("#button_initial_confidence_option1").attr("activedecision","true"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision")):2==t?($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").attr("activedecision","true"),$("#button_initial_confidence_option3").removeAttr("activedecision")):($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").attr("activedecision","true")),$("#button_initial_confidence_option1").attr("disabled","true"),$("#button_initial_confidence_option2").attr("disabled","true"),$("#button_initial_confidence_option3").attr("disabled","true"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),async function(){console.log("Getting AI assistance...");let t=p.ai_confidence,n=I;if("user_reported"==H&&(n=(m-5)/2.5,console.log("Using user reported trust value: ",m)),T={intervention_applied:!1,trust_level_at_start_of_interaction:n},"none"==U||v==p.ai_prediction)console.log("Not applying any intervention."),t=p.ai_confidence;else if("confidence_manip"==U)if("none"==G||"mitigate_undertrust"==G&&n<J||"mitigate_overtrust"==G&&n>J){if(console.log("Applying AI confidence manipulation intervention."),"fixed"==F){let n=Number(p.ai_confidence.replace("%",""))/100,i=Math.min(1,n+L);i=Math.max(.5,i),t=String((100*i).toFixed(0))+"%";let e=(i-n).toFixed(2);console.log("Actual AI confidence: ",p.ai_confidence,", Confidence shown to user: ",t),T.conf_actual=p.ai_confidence,T.conf_displayed=t,T.conf_change=e,T.intervention_applied=!0}}else console.log("Conditions for applying 'confidence manipulation' intervention not satisfied.");else if("ai_explanation"==U)if("none"==G||"mitigate_undertrust"==G&&n<J||"mitigate_overtrust"==G&&n>J){if(console.log("Applying AI explanation intervention."),"fixed"==F){console.log("Showing explanation");let t=p.ai_explanation?p.ai_explanation:"No explanation provided";$("#ai_explanation_span").html(t),$("#ai_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,e(15,document.getElementById("ai_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else console.log("Conditions for applying 'AI explanation' intervention not satisfied.");else if("ai_contrastive_explanation"==U)if("none"==G||"mitigate_undertrust"==G&&n<J||"mitigate_overtrust"==G&&n>J){if(console.log("Applying AI explanation intervention."),"fixed"==F){console.log("Showing explanation");let t=p.ai_contrastive_explanation?p.ai_contrastive_explanation:"No explanation provided";$("#ai_contrastive_explanation_span").html(t),$("#ai_contrastive_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,e(10,document.getElementById("ai_contrastive_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else console.log("Conditions for applying 'AI explanation' intervention not satisfied.");else if("both_explanation_types"==U){if(E("mitigate_underandovertrust"==G,"Goal for 'both explanation types' intervention should be 'mitigate_underandovertrust'"),n<W){console.log("Applying explanation intervention for undertrust"),console.log("Showing explanation");let t=p.ai_explanation?p.ai_explanation:"No explanation provided";$("#ai_explanation_span").html(t),$("#ai_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,e(15,document.getElementById("ai_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}else if(n>R){console.log("Applying contrastive explanation intervention for overtrust");let t=p.ai_contrastive_explanation?p.ai_contrastive_explanation:"No explanation provided";$("#ai_contrastive_explanation_span").html(t),$("#ai_contrastive_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,e(10,document.getElementById("ai_contrastive_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else"ai_thinking"==U?("none"==G||"mitigate_undertrust"==G&&n<J||"mitigate_overtrust"==G&&n>J)&&(console.log("Applying AI thinking intervention."),"fixed"==F&&(console.log("Showing AI thinking"),T.intervention_applied=!0,$("#ai_thinking_div").show(),await o(1e4),$("#ai_thinking_div").hide())):"ai_forced_pause"==U?("none"==G||"mitigate_undertrust"==G&&n<J||"mitigate_overtrust"==G&&n>J)&&(console.log("Applying AI forced pause intervention."),"fixed"==F)&&(console.log("Showing AI forced pause"),T.intervention_applied=!0,e(10,document.getElementById("ai_assistance_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please take some time to carefully consider the AI's suggestion.")):"both_pause_types"==U&&(E("mitigate_underandovertrust"==G,"Goal for 'both pause types' intervention should be 'mitigate_underandovertrust'"),n<W?(console.log("Applying AI thinking intervention for undertrust"),console.log("Showing AI thinking"),T.intervention_applied=!0,$("#ai_thinking_div").show(),await o(1e4),$("#ai_thinking_div").hide()):n>R&&(console.log("Applying AI forced pause intervention for overtrust"),console.log("Showing AI forced pause"),T.intervention_applied=!0,e(10,document.getElementById("ai_assistance_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please take some time to carefully consider the AI's suggestion.")));console.log("AI Assistance Intervention Details: ",T),$("#ai_prediction_span").html("Option "+p.ai_prediction),$("#ai_confidence_span").html(t),$("#ai_assistance_div").show(),$("#final_user_decision_div").show()}()}function O(t){d=Date.now(),f=t,E(1==t||2==t,"Invalid option!"),1==t?($("#button_final_decision_option1").attr("activedecision","true"),$("#button_final_decision_option2").removeAttr("activedecision")):($("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").attr("activedecision","true")),$("#final_user_confidence_div").show(),$("#button_final_decision_option1").attr("disabled","true"),$("#button_final_decision_option2").attr("disabled","true"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled")}function P(t){s=Date.now(),b=t,E(1==t||2==t||3==t,"Invalid option!"),1==t?($("#button_final_confidence_option1").attr("activedecision","true"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision")):2==t?($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").attr("activedecision","true"),$("#button_final_confidence_option3").removeAttr("activedecision")):($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").attr("activedecision","true")),$("#button_final_confidence_option1").attr("disabled","true"),$("#button_final_confidence_option2").attr("disabled","true"),$("#button_final_confidence_option3").attr("disabled","true"),async function(){let t=p.correct_option,n=t==f,i=p.ai_is_correct,e="Correct answer: <b>Option "+t+"</b>.<br>";e+=n?"You picked Option "+f+", which was <span class='color_correct'><b>correct</b></span>.<br>":"You picked Option "+f+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",e+=i?"The AI picked Option "+p.ai_prediction+", which was <span class='color_correct'><b>correct<b></span>.<br>":"The AI picked Option "+p.ai_prediction+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",n?(e+="<span class='color_correct'><b>You receive a reward of $0.10.</b></span>",h+=.1):e+="<span class='color_incorrect'><b>You do not receive any reward.</b></span>",e+="<br>",$("#balance").text(`Balance: $${h.toFixed(2)} + $1.0`),$("#result_span").html(e),$("#result_span").show(),K?$("#button_next").show():$("#user_trust_report_div").show(),function(){if("smoothed_confweighted_trust"==H){let t=Number(p.ai_confidence.replace("%",""))/100,n=p.ai_prediction==p.correct_option?t:-t,i=I;I=z*n+(1-z)*I,k={prev_estimated_trust_level:i,trust_effect:n,new_estimated_trust_level:I},console.log("Old estimated trust level: "+i+", trust effect: "+n+", new estimated trust level: "+I)}}()}()}function C(){if($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").removeAttr("activedecision"),$("#button_initial_decision_option1").removeAttr("disabled"),$("#button_initial_decision_option2").removeAttr("disabled"),$("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled"),$("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").removeAttr("activedecision"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),$("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled"),$("#ai_assistance_div").hide(),$("#ai_explanation_div").hide(),$("#ai_contrastive_explanation_div").hide(),$("#ai_thinking_div").hide(),$("#initial_user_confidence_div").hide(),$("#final_user_decision_div").hide(),$("#final_user_confidence_div").hide(),$("#range_val").removeAttr("disabled"),$("#user_trust_report_div").hide(),$("#button_place_bet").hide(),$("#button_next").hide(),$("#result_span").hide(),-1==u?$("#range_text").text("-"):$("#range_text").text(`Before this interaction, your trust in the AI: ${10*m} / 100.`),$("#range_val").val(m),x=m,u+=1,u>=l.length)return $("#main_box_experiment").hide(),void(a?$("#main_box_end_mock").show():$("#main_box_end").show());if(p=l[u],$("#question_span").html(p.question),$("#option1_span").html(p.option1),$("#option2_span").html(p.option2),p.hasOwnProperty("reward_ratio")){let[t,n]=p.reward_ratio;t=Number(t),n=Number(n),A=t/n}else A=1;r=Date.now(),$("#progress").text(`Progress: ${u+1} / ${l.length}`),e(10,document.getElementById("initial_user_decision_div"),[document.getElementById("button_initial_decision_option1"),document.getElementById("button_initial_decision_option2")],null,"Please read the question and options closely.")}$("#button_instructions_next").on("click",(()=>B(1))),$("#button_instructions_prev").on("click",(()=>B(-1))),$("#button_next").on("click",(()=>{if(-1!=u){let t={question_i:u,user_balance_post_interaction:h,user_trust_val_before:x,user_trust_val_after:m,initial_user_decision:v,final_user_decision:f,initial_user_confidence:g,final_user_confidence:b};t.times={initial_decision:c-r,initial_confidence:_-c,final_decision:d-_,final_confidence:s-d,trust_decision:Date.now()-s},t.question=p,t.count_exited_page=w,t.intervention_details=T,t.trust_effect_prediction_data=k,async function(t){if(a)console.log("logged (mock)",t);else{t.url_data=globalThis.url_data,console.log("Data"),"study_id"in t.url_data||(t.url_data.study_id="trialrun_studies"),t.url_data.queue_id=globalThis.uid,console.log("logged",t),console.log("Logging to",n+"log");try{return await $.ajax(n+"log",{data:JSON.stringify({project:"2step-trust-study-interventions/"+t.url_data.study_id,uid:globalThis.uid.replace("/","_")+"_"+t.url_data.prolific_id,payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"})}catch(t){console.log(t)}}}(t),w=0}C()})),$("#range_val").on("input change",(function(){m=$(this).val(),$("#range_text").text(`After this interaction, your current trust in the AI: ${10*m} / 100.`),$("#button_next").show()})),$("#button_initial_decision_option1").on("click",(()=>N(1))),$("#button_initial_decision_option2").on("click",(()=>N(2))),$("#button_initial_confidence_option1").on("click",(()=>S(1))),$("#button_initial_confidence_option2").on("click",(()=>S(2))),$("#button_initial_confidence_option3").on("click",(()=>S(3))),$("#button_final_decision_option1").on("click",(()=>O(1))),$("#button_final_decision_option2").on("click",(()=>O(2))),$("#button_final_confidence_option1").on("click",(()=>P(1))),$("#button_final_confidence_option2").on("click",(()=>P(2))),$("#button_final_confidence_option3").on("click",(()=>P(3)));const D=new URLSearchParams(window.location.search),q=D.get("start"),j=D.get("uid");if(globalThis.url_data=function(t){const n={};for(const[i,e]of t)n[i]=e;return n}(D.entries()),null!=j){if(globalThis.uid=j,"prolific_random"==globalThis.uid){let t=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${D.get("prolific_queue_name")}/${t}`}}else{let t=null;for(;null==t;)t=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=t}let Y=null;globalThis.uid.includes("343")||globalThis.uid.includes("434")?Y=[7,8,9,17,18,19,27,28,29]:globalThis.uid.includes("735")&&(Y=[10,11,12,13,14,25,26,27,28,29]);let G=D.get("intervention_goal");if(null==G&&(G="none"),!["none","mitigate_undertrust","mitigate_overtrust","mitigate_underandovertrust"].includes(G))throw new Error("Invalid AI Assistance Intervention Goal: "+G);let U=D.get("intervention_type");if(null==U&&(U="none"),!["none","dummy","confidence_manip","ai_explanation","ai_contrastive_explanation","both_explanation_types","ai_thinking","ai_forced_pause","both_pause_types"].includes(U))throw new Error("Invalid AI Assistance Intervention: "+U);let F=D.get("intervention_strategy");if(null==F&&(F="dummy"),!["dummy","fixed","adaptive"].includes(F))throw new Error("Invalid AI Assistance Intervention Strategy: "+F);let M=Number(D.get("intervention_threshold"));null==M&&(M=-1);let J=Number(D.get("intervention_trust_threshold"));null==J&&(J=0);let L=Number(D.get("intervention_fixedconfchange"));null==L&&(L=0);let W=Number(D.get("intervention_undertrust_threshold"));null==W&&(W=J);let R=Number(D.get("intervention_overtrust_threshold"));null==R&&(R=J);let H=D.get("user_trust_heuristic");null==H&&(H="user_reported");let z=Number(D.get("smoothing_param"));null==z&&(z=1);let K="true"==D.get("skip_trust_reporting");null==K&&(K=!1),console.log("AIInterventionGoal: ",G),console.log("AIInterventionType: ",U),console.log("AIInterventionStrategy: ",F),console.log("InterventionALDiffThreshold: ",M),console.log("InterventionTrustThreshold: ",J),console.log("InterventionUndertrustThreshold: ",W),console.log("InterventionOvertrustThreshold: ",R),console.log("InterventionFixedConfChange: ",L),console.log("userTrustHeuristic: ",H),console.log("skip_trust_reporting: ",K),"mitigate_undertrust"==G?(E(J<=0,"Trust threshold for mitigating undertrust cannot be positive."),E(L>=0,"Confidence change for mitigating undertrust cannot be negative.")):"mitigate_overtrust"==G&&(E(J>=0,"Trust threshold for mitigating overtrust cannot be negative."),E(L<=0,"Confidence change for mitigating overtrust cannot be positive.")),globalThis.url_data.intervention_goal=G,globalThis.url_data.intervention_type=U,globalThis.url_data.intervention_strategy=F,globalThis.url_data.intervention_threshold=M,globalThis.url_data.intervention_fixedconfchange=L,globalThis.url_data.user_trust_heuristic=H,globalThis.url_data.skip_trust_reporting=K,globalThis.url_data.smoothing_param=z,globalThis.uid.startsWith("demo_paper")&&(a=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((t=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((t=>{l=t,null!=q&&(u=parseInt(q)-1,console.log("Starting from",u)),B(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let Q=!1;document.onvisibilitychange=()=>{Q||(w+=1,Q=!0,globalThis.uid.startsWith("demo")||alert("Please don't leave the page. If you do so again, we may restrict paying you."),Q=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQStCLHFCQUFJOUQsRUFDOUM2RCxXQUFXQyxTQUEwQixnQkFBSVQsRUFHckNRLFdBQVdFLElBQUlnQyxXQUFXLGdCQUMxQnpILEdBQVcsR0FJZjZDLFFBQVFDLElBQUksbUJBQW9CeUMsV0FBV0UsS0Y1M0JwQzdDLGlCQUtILGFBSG1CakIsRUFBRStGLFFBQ2pCLGdCQUFnQm5DLFdBQVdFLGNBQWNqRCxLQUFLQyxRQUd0RCxDRXUzQkFrRixHQUFZQyxPQUFPQyxJQUVmaEYsUUFBUUMsSUFBSSxvQkFDWkQsUUFBUUMsSUFBSXlDLFdBQVdFLEtBQ3ZCYSxPQUFPQyxTQUFTdUIsUUFBUSxJQUUxQkMsTUFBTUMsSUFDSi9ILEVBQU8rSCxFQUNjLE1BQWpCdkIsSUFDQWxHLEVBQWEwSCxTQUFTeEIsR0FBaUIsRUFDdkM1RCxRQUFRQyxJQUFJLGdCQUFpQnZDLElBR2pDaUIsRUFBa0IsR0FDbEJHLEVBQUUsMEJBQTBCRyxPQUM1QkgsRUFBRSxpQ0FBaUNLLE1BQU0sSUFHN0NhLFFBQVFDLElBQUksNkJBQThCeUMsV0FBV0UsS0FFckQsSUFBSXlDLEdBQWUsRUFDbkJuSixTQUFTb0osbUJBQXFCLEtBQ3JCRCxJQUNEaEgsR0FBcUIsRUFDckJnSCxHQUFlLEVBQ1QzQyxXQUFXRSxJQUFLZ0MsV0FBVyxTQUM3QlcsTUFBTSxnRkFFVkYsR0FBZSxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Nvbm5lY3Rvci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJpbXBvcnQgeyBERVZNT0RFIH0gZnJvbSAnLi9nbG9iYWxzJ1xuaW1wb3J0IHsgTU9DS01PREUgfSBmcm9tICcuL21haW4nXG5cbmxldCBTRVJWRVJfTE9HX1JPT1QgPSBERVZNT0RFID8gXCJodHRwOi8vMTI3LjAuMC4xOjUwMDAvXCIgOiBcImh0dHBzOi8vdGVqYXNzcmluaXZhc2FuLnB5dGhvbmFueXdoZXJlLmNvbS9cIlxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZF9kYXRhKCk6IFByb21pc2U8YW55PiB7XG4gICAgLy8gaW5jbHVkZSB0aW1lc3RhbXAgc28gdGhhdCB0aGluZ3MgZG9uJ3QgZ2V0IGNhY2hlZFxuICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmdldEpTT04oXG4gICAgICAgIGBiYWtlZF9xdWV1ZXMvJHtnbG9iYWxUaGlzLnVpZH0uanNvbj90PSR7RGF0ZS5ub3coKX1gLFxuICAgIClcbiAgICByZXR1cm4gcmVzdWx0XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nX2RhdGEoZGF0YSk6IFByb21pc2U8YW55PiB7XG4gICAgaWYgKE1PQ0tNT0RFKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibG9nZ2VkIChtb2NrKVwiLCBkYXRhKVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBkYXRhW1widXJsX2RhdGFcIl0gPSBnbG9iYWxUaGlzLnVybF9kYXRhXG4gICAgY29uc29sZS5sb2coXCJEYXRhXCIpXG4gICAgaWYgKCEoXCJzdHVkeV9pZFwiIGluIGRhdGFbJ3VybF9kYXRhJ10pKSB7XG4gICAgICAgIGRhdGFbJ3VybF9kYXRhJ11bXCJzdHVkeV9pZFwiXSA9IFwidHJpYWxydW5fc3R1ZGllc1wiXG4gICAgfVxuICAgIGRhdGFbXCJ1cmxfZGF0YVwiXVtcInF1ZXVlX2lkXCJdID0gZ2xvYmFsVGhpcy51aWRcbiAgICBjb25zb2xlLmxvZyhcImxvZ2dlZFwiLCBkYXRhKVxuICAgIGNvbnNvbGUubG9nKFwiTG9nZ2luZyB0b1wiLCBTRVJWRVJfTE9HX1JPT1QgKyBcImxvZ1wiKVxuXG4gICAgdHJ5IHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFNFUlZFUl9MT0dfUk9PVCArIFwibG9nXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5LWludGVydmVudGlvbnMvXCIgKyBkYXRhWyd1cmxfZGF0YSddWydzdHVkeV9pZCddLFxuICAgICAgICAgICAgICAgICAgICB1aWQ6IGdsb2JhbFRoaXMudWlkLnJlcGxhY2UoXCIvXCIsIFwiX1wiKSArIFwiX1wiICsgZGF0YVsndXJsX2RhdGEnXVsncHJvbGlmaWNfaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG59IiwiaW1wb3J0IHsgRU5BQkxFX1RJTUVSIH0gZnJvbSAnLi9nbG9iYWxzJztcblxuZnVuY3Rpb24gcGFyYW1zVG9PYmplY3QoZW50cmllcykge1xuICBjb25zdCByZXN1bHQgPSB7fVxuICAvLyBlYWNoICdlbnRyeScgaXMgYSBba2V5LCB2YWx1ZV0gdHVwcGxlXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMpIHtcbiAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmxldCBhY3RpdmVUaW1lcjogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0SW50ZXJ2YWw+IHwgbnVsbCA9IG51bGw7IC8vIFRpbWVyIGludGVydmFsXG5cbmZ1bmN0aW9uIHN0YXJ0VGltZXIoZHVyYXRpb24sIHN0ZXBEaXYsIGJ1dHRvbnMsIGNhbGxiYWNrLCBtZXNzYWdlLCBzaG93VGltZVJlbWFpbmluZyA9IHRydWUpIHtcbiAgaWYgKCFFTkFCTEVfVElNRVIpIHtcbiAgICAgIC8vIElmIHRoZSB0aW1lciBpcyBkaXNhYmxlZCwgZW5hYmxlIHRoZSBidXR0b25zIGltbWVkaWF0ZWx5XG4gICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSk7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gIH1cblxuICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZXIgdG8gcHJldmVudCBtdWx0aXBsZSBpbnRlcnZhbHNcbiAgaWYgKGFjdGl2ZVRpbWVyKSB7XG4gICAgICBjbGVhckludGVydmFsKGFjdGl2ZVRpbWVyKTtcbiAgICAgIGFjdGl2ZVRpbWVyID0gbnVsbDtcbiAgfVxuXG4gIC8vIERpc2FibGUgYnV0dG9uc1xuICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIikpO1xuICBcbiAgLy8gU2hvdyB0aW1lciB2aXN1YWxseVxuICBsZXQgdGltZXJEaXNwbGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHRpbWVyRGlzcGxheS5pZCA9IGB0aW1lcl8ke3N0ZXBEaXYuaWR9YDtcbiAgdGltZXJEaXNwbGF5LnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG4gIHRpbWVyRGlzcGxheS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG4gIHN0ZXBEaXYuYXBwZW5kQ2hpbGQodGltZXJEaXNwbGF5KTtcblxuICBsZXQgcmVtYWluaW5nVGltZSA9IGR1cmF0aW9uO1xuXG4gIC8vIEluaXRpYWwgZGlzcGxheVxuICBpZiAoc2hvd1RpbWVSZW1haW5pbmcpe1xuICAgIHRpbWVyRGlzcGxheS50ZXh0Q29udGVudCA9IG1lc3NhZ2UgKyBgIFlvdSBjYW4gbWFrZSB5b3VyIHNlbGVjdGlvbiBpbiAke3JlbWFpbmluZ1RpbWV9IHNlY29uZChzKS5gO1xuICB9IGVsc2Uge1xuICAgIHRpbWVyRGlzcGxheS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gIH1cblxuICBhY3RpdmVUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHJlbWFpbmluZ1RpbWUtLTtcbiAgICAgIGlmIChyZW1haW5pbmdUaW1lID49IDApIHtcbiAgICAgICAgICBpZiAoc2hvd1RpbWVSZW1haW5pbmcpIHtcbiAgICAgICAgICAgIHRpbWVyRGlzcGxheS50ZXh0Q29udGVudCA9IG1lc3NhZ2UgKyBgIFlvdSBjYW4gbWFrZSB5b3VyIHNlbGVjdGlvbiBpbiAke3JlbWFpbmluZ1RpbWV9IHNlY29uZChzKS5gO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aW1lckRpc3BsYXkudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIGlmIChhY3RpdmVUaW1lciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBjbGVhckludGVydmFsKGFjdGl2ZVRpbWVyKTsgLy8gU3RvcCB0aGUgdGltZXJcbiAgICAgICAgICAgICAgYWN0aXZlVGltZXIgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhY3RpdmVUaW1lciA9IG51bGw7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgdGltZXIgZGlzcGxheVxuICAgICAgICAgIHN0ZXBEaXYucmVtb3ZlQ2hpbGQodGltZXJEaXNwbGF5KTtcblxuICAgICAgICAgIC8vIEVuYWJsZSBidXR0b25zXG4gICAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpO1xuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuICAgICAgfVxuICB9LCAxMDAwKTtcbn1cblxuY29uc3Qgd2FpdCA9IChtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbn07XG5cbmV4cG9ydCB7IHBhcmFtc1RvT2JqZWN0LCBzdGFydFRpbWVyLCB3YWl0IH07IiwiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gXCIuL2dsb2JhbHNcIlxuZXhwb3J0IHZhciBVSUQ6IHN0cmluZ1xuZXhwb3J0IHZhciBNT0NLTU9ERTogYm9vbGVhbiA9IGZhbHNlXG5pbXBvcnQgeyBsb2FkX2RhdGEsIGxvZ19kYXRhIH0gZnJvbSAnLi9jb25uZWN0b3InXG5pbXBvcnQgeyBwYXJhbXNUb09iamVjdCwgc3RhcnRUaW1lciwgd2FpdCB9IGZyb20gXCIuL3V0aWxzXCJcbmltcG9ydCB7IHBhcnNlSlNPTiB9IGZyb20gXCJqcXVlcnlcIlxuLy9pbXBvcnQgeyBnZXRfdXNlcl90cnVzdF9lZmZlY3QsIGdldF9hZGp1c3RlZF9haV9jb25maWRlbmNlfSBmcm9tIFwiLi9ydW5fdXNlcl9tb2RlbHNcIlxuXG5sZXQgVVNFUl9NT0RFTFNfUk9PVCA9IFwiaHR0cHM6Ly90ZWphc3NyaW5pdmFzYW4ucHl0aG9uYW55d2hlcmUuY29tL1wiXG5sZXQgdXNlcl9kZWNpc2lvbl9tb2RlbCA9IFwidXNlcl9hY2NlcHRhbmNlX21vZGVsLWxvZ2lzdGljcmVncmVzc2lvbi0wLjkzNDd0ZXN0ZjFcIlxubGV0IHRydXN0X2VmZmVjdF9tb2RlbCA9IFwidHJ1c3RfZWZmZWN0X21vZGVsLXN2bV9saW5lYXItMC40NjQ0dGVzdG1hZS0wLjkwOTV0ZXN0dGVkYVwiXG5cbnZhciBkYXRhOiBhbnlbXSA9IFtdXG5sZXQgcXVlc3Rpb25faSA9IC0xXG5sZXQgcXVlc3Rpb246IGFueSA9IG51bGxcbmxldCBpbml0aWFsX3VzZXJfZGVjaXNpb246IG51bWJlciA9IC0xXG5sZXQgZmluYWxfdXNlcl9kZWNpc2lvbjogbnVtYmVyID0gLTFcbmxldCBpbml0aWFsX3VzZXJfY29uZmlkZW5jZTogbnVtYmVyID0gLTFcbmxldCBmaW5hbF91c2VyX2NvbmZpZGVuY2U6IG51bWJlciA9IC0xXG5sZXQgYmFsYW5jZSA9IDBcblxubGV0IHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWw6IG51bWJlciA9IDVcbmxldCBwcmV2X3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWw6IG51bWJlciA9IC0xXG5cbmxldCBiZXRfdmFsX3JhdGlvOiBudW1iZXIgPSAxXG5sZXQgdGltZV9xdWVzdGlvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV90cnVzdF9kZWNpc2lvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydDogbnVtYmVyXG5sZXQgaW5zdHJ1Y3Rpb25faTogbnVtYmVyID0gMFxubGV0IGNvdW50X2V4aXRlZF9wYWdlOiBudW1iZXIgPSAwXG5cbmxldCBpbnRlcnZlbnRpb25fY29uZGl0aW9uX3NhdGlzZmllZDogYm9vbGVhbiA9IGZhbHNlXG5sZXQgaW50ZXJ2ZW50aW9uX2FwcGxpZWQ6IGJvb2xlYW4gPSBmYWxzZVxuXG5sZXQgdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbDogbnVtYmVyID0gMFxuXG52YXIgYWxsX3VzZXJfaW50ZXJhY3Rpb25zID0gW11cbnZhciBpbnRlcnZlbnRpb25fZGV0YWlscyA9IHt9XG52YXIgdHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YSA9IHt9XG5sZXQgZmluZG5ld2NvbmZfcmVzdWx0OiBhbnlcblxuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICAgIHRocm93IG1lc3NhZ2UgfHwgXCJBc3NlcnRpb24gZmFpbGVkXCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBuZXh0X2luc3RydWN0aW9ucyhpbmNyZW1lbnQ6IG51bWJlcikge1xuICAgIGluc3RydWN0aW9uX2kgKz0gaW5jcmVtZW50XG4gICAgaWYgKHNraXBfdHJ1c3RfcmVwb3J0aW5nICYmIGluc3RydWN0aW9uX2kgPT0gNSkge1xuICAgICAgICBpbnN0cnVjdGlvbl9pICs9IGluY3JlbWVudFxuICAgIH1cblxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDApIHtcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA+PSA2KSB7XG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5zaG93KClcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikudmFsKFwiU3RhcnQgc3R1ZHlcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLnZhbChcIk5leHRcIilcbiAgICB9XG4gICAgaWYgKGluc3RydWN0aW9uX2kgPT0gNykge1xuICAgICAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLnNob3coKVxuICAgICAgICBuZXh0X3F1ZXN0aW9uKClcbiAgICB9XG5cbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5jaGlsZHJlbihcIjpub3QoaW5wdXQpXCIpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgICQoZWwpLmhpZGUoKVxuICAgIH0pXG4gICAgJChgI2luc3RydWN0aW9uc18ke2luc3RydWN0aW9uX2l9YCkuc2hvdygpXG59XG4kKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IG5leHRfaW5zdHJ1Y3Rpb25zKCsxKSlcbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoLTEpKVxuXG4kKFwiI2J1dHRvbl9uZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGlmIChxdWVzdGlvbl9pICE9IC0xKSB7XG4gICAgICAgIGxldCBsb2dnZWRfZGF0YSA9IHtcbiAgICAgICAgICAgIFwicXVlc3Rpb25faVwiOiBxdWVzdGlvbl9pLFxuICAgICAgICAgICAgXCJ1c2VyX2JhbGFuY2VfcG9zdF9pbnRlcmFjdGlvblwiOiBiYWxhbmNlLFxuICAgICAgICAgICAgXCJ1c2VyX3RydXN0X3ZhbF9iZWZvcmVcIjogcHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsLFxuICAgICAgICAgICAgXCJ1c2VyX3RydXN0X3ZhbF9hZnRlclwiOiB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsLFxuICAgICAgICAgICAgXCJpbml0aWFsX3VzZXJfZGVjaXNpb25cIjogaW5pdGlhbF91c2VyX2RlY2lzaW9uLFxuICAgICAgICAgICAgXCJmaW5hbF91c2VyX2RlY2lzaW9uXCI6IGZpbmFsX3VzZXJfZGVjaXNpb24sXG4gICAgICAgICAgICBcImluaXRpYWxfdXNlcl9jb25maWRlbmNlXCI6IGluaXRpYWxfdXNlcl9jb25maWRlbmNlLFxuICAgICAgICAgICAgXCJmaW5hbF91c2VyX2NvbmZpZGVuY2VcIjogZmluYWxfdXNlcl9jb25maWRlbmNlLFxuICAgICAgICB9XG5cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3RpbWVzJ10gPSB7XG4gICAgICAgICAgICBcImluaXRpYWxfZGVjaXNpb25cIjogdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQgLSB0aW1lX3F1ZXN0aW9uX3N0YXJ0LFxuICAgICAgICAgICAgXCJpbml0aWFsX2NvbmZpZGVuY2VcIjogdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCAtIHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0LFxuICAgICAgICAgICAgXCJmaW5hbF9kZWNpc2lvblwiOiB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgLSB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0LFxuICAgICAgICAgICAgXCJmaW5hbF9jb25maWRlbmNlXCI6IHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQgLSB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQsXG4gICAgICAgICAgICBcInRydXN0X2RlY2lzaW9uXCI6IERhdGUubm93KCkgLSB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0LFxuICAgICAgICB9XG4gICAgICAgIGxvZ2dlZF9kYXRhWydxdWVzdGlvbiddID0gcXVlc3Rpb25cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ2NvdW50X2V4aXRlZF9wYWdlJ10gPSBjb3VudF9leGl0ZWRfcGFnZVxuICAgICAgICBsb2dnZWRfZGF0YVsnaW50ZXJ2ZW50aW9uX2RldGFpbHMnXSA9IGludGVydmVudGlvbl9kZXRhaWxzXG4gICAgICAgIGxvZ2dlZF9kYXRhWyd0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhJ10gPSB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhXG4gICAgICAgIGxvZ19kYXRhKGxvZ2dlZF9kYXRhKVxuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSA9IDBcblxuICAgIH1cbiAgICBuZXh0X3F1ZXN0aW9uKClcbn0pO1xuXG4kKCcjcmFuZ2VfdmFsJykub24oJ2lucHV0IGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsID0gKCQodGhpcykudmFsKCkhIGFzIG51bWJlcilcbiAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChgQWZ0ZXIgdGhpcyBpbnRlcmFjdGlvbiwgeW91ciBjdXJyZW50IHRydXN0IGluIHRoZSBBSTogJHt1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsICogMTB9IC8gMTAwLmApXG4gICAgJChcIiNidXR0b25fbmV4dFwiKS5zaG93KClcbn0pO1xuXG5mdW5jdGlvbiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbihvcHRpb24pIHtcbiAgICB0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCA9IERhdGUubm93KClcbiAgICBpbml0aWFsX3VzZXJfZGVjaXNpb24gPSBvcHRpb25cbiAgICBhc3NlcnQob3B0aW9uID09IDEgfHwgb3B0aW9uID09IDIsIFwiSW52YWxpZCBvcHRpb24hXCIpXG4gICAgaWYgKG9wdGlvbiA9PSAxKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgICQoXCIjaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbn1cbiQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKDEpKVxuJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24oMikpXG5cbmZ1bmN0aW9uIGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZShjb25mX2xldmVsKSB7XG4gICAgdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCA9IERhdGUubm93KClcbiAgICBpbml0aWFsX3VzZXJfY29uZmlkZW5jZSA9IGNvbmZfbGV2ZWxcbiAgICBhc3NlcnQoY29uZl9sZXZlbCA9PSAxIHx8IGNvbmZfbGV2ZWwgPT0gMiB8fCBjb25mX2xldmVsID09IDMsIFwiSW52YWxpZCBvcHRpb24hXCIpXG4gICAgaWYgKGNvbmZfbGV2ZWwgPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2UgaWYgKGNvbmZfbGV2ZWwgPT0gMikge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG5cbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpICAgIFxuXG4gICAgZ2V0X2FpX2Fzc2lzdGFuY2UoKVxufVxuJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoMSkpXG4kKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSgyKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKDMpKVxuXG5cblxuYXN5bmMgZnVuY3Rpb24gZ2V0X3VzZXJfZGVjaXNpb25fcHJvYigpIHtcbiAgICAvLyBQcmVwYXJlIGlucHV0cyBmb3IgdGhlIHVzZXIgZGVjaXNpb24gbW9kZWxcbiAgICBsZXQgdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCA9IE51bWJlcihpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICBsZXQgdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UgPSBpbml0aWFsX3VzZXJfY29uZmlkZW5jZVxuICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgbGV0IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICBpZiAodXNlclRydXN0SGV1cmlzdGljID09IFwidXNlcl9yZXBvcnRlZFwiKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzID0ge1xuICAgICAgICBcInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnRcIjogdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCxcbiAgICAgICAgXCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZVwiOiB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgIH1cblxuICAgIGxldCByZXN1bHQ6IGFueVxuICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImdldF91c2VyX2RlY2lzaW9uX3Byb2JcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwiMnN0ZXAtdHJ1c3Qtc3R1ZHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxfbmFtZTogdXNlcl9kZWNpc2lvbl9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkodXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBcInVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzXCI6IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzLCBcbiAgICAgICAgXCJ1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZFwiOiByZXN1bHRbXCJwcmVkX3Byb2JzXCJdWzBdWzFdXG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBleGFtaW5lX2VmZmVjdF9vZl90cnVzdF9vbl9kZWNpc2lvbl9tYWtpbmcoKSB7XG4gICAgLy8gUHJlcGFyZSBpbnB1dCB2YXJpYWJsZXMgZm9yIHVzZXIgZGVjaXNpb24gbW9kZWxcbiAgICBsZXQgdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCA9IE51bWJlcihpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICBsZXQgdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UgPSBpbml0aWFsX3VzZXJfY29uZmlkZW5jZVxuICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgbGV0IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICBpZiAodXNlclRydXN0SGV1cmlzdGljID09IFwidXNlcl9yZXBvcnRlZFwiKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzID0ge1xuICAgICAgICBcInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnRcIjogdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCxcbiAgICAgICAgXCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZVwiOiB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIlVzZXIgZGVjaXNpb24gbW9kZWwgaW5wdXRzOiBcIiwgdXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMpXG5cbiAgICBsZXQgYWxkaWZmX3Jlc3VsdDogYW55XG4gICAgdHJ5IHtcbiAgICAgICAgYWxkaWZmX3Jlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImV4YW1pbmVfZWZmZWN0X29mX3RydXN0X29uX2RlY2lzaW9uX21ha2luZ1wiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCIyc3RlcC10cnVzdC1zdHVkeVwiLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbF9uYW1lOiB1c2VyX2RlY2lzaW9uX21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeSh1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGFsZGlmZl9yZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5KHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QpIHtcbiAgICAvLyBQcmVwYXJlIGlucHV0IHZhcmlhYmxlcyBmb3IgdXNlciBkZWNpc2lvbiBtb2RlbFxuICAgIGxldCB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50ID0gTnVtYmVyKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgIGxldCB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSA9IGluaXRpYWxfdXNlcl9jb25maWRlbmNlXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgIGlmICh1c2VyVHJ1c3RIZXVyaXN0aWMgPT0gXCJ1c2VyX3JlcG9ydGVkXCIpIHtcbiAgICAgICAgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgLSA1KSAvIDIuNVxuICAgIH1cbiAgICBsZXQgZmluZG5ld2NvbmZfaW5wdXRfdmFyaWFibGVzID0ge1xuICAgICAgICBcInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnRcIjogdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCxcbiAgICAgICAgXCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZVwiOiB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSxcbiAgICAgICAgXCJ1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X3RydXN0X2xldmVsLFxuICAgICAgICBcInRpbWVzdGVwXCI6IHF1ZXN0aW9uX2ksXG4gICAgICAgIFwidXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RfbmV1dHJhbF90cnVzdFwiOiB1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0LFxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBmaW5kbmV3Y29uZl9yZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJmaW5kX2Jlc3RfYWljb25mX3RvX2Rpc3BsYXlcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwiMnN0ZXAtdHJ1c3Qtc3R1ZHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxfbmFtZTogdXNlcl9kZWNpc2lvbl9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkoZmluZG5ld2NvbmZfaW5wdXRfdmFyaWFibGVzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG5cbiAgICByZXR1cm4gZmluZG5ld2NvbmZfcmVzdWx0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldF9haV9hc3Npc3RhbmNlKCkge1xuICAgIGNvbnNvbGUubG9nKFwiR2V0dGluZyBBSSBhc3Npc3RhbmNlLi4uXCIpXG5cbiAgICBsZXQgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgbGV0IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICBpZiAodXNlclRydXN0SGV1cmlzdGljID09IFwidXNlcl9yZXBvcnRlZFwiKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICAgICAgY29uc29sZS5sb2coXCJVc2luZyB1c2VyIHJlcG9ydGVkIHRydXN0IHZhbHVlOiBcIiwgdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbClcbiAgICB9XG4gICAgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7XG4gICAgICAgIFwiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIjogZmFsc2UsIFxuICAgICAgICBcInRydXN0X2xldmVsX2F0X3N0YXJ0X29mX2ludGVyYWN0aW9uXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbFxuICAgIFxuICAgIH1cblxuICAgIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJub25lXCIgfHwgKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKSkge1xuICAgICAgICAvLyBObyBpbnRlcnZlbnRpb24sIGp1c3Qgc2hvdyB0aGUgQUkgYXNzaXN0YW5jZSB0aGF0IGlzIGFscmVhZHkgcG9wdWxhdGVkIGluIHRoZSBzcGFuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm90IGFwcGx5aW5nIGFueSBpbnRlcnZlbnRpb24uXCIpXG4gICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgIH1cbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJjb25maWRlbmNlX21hbmlwXCIpIHtcbiAgICAgICAgLy8gTW9kaWZ5IEFJIGNvbmZpZGVuY2VcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibm9uZVwiKSB8fCBcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV91bmRlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsIDwgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfb3ZlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBBSSBjb25maWRlbmNlIG1hbmlwdWxhdGlvbiBpbnRlcnZlbnRpb24uXCIpXG4gICAgICAgICAgICBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImZpeGVkXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlIHRvIEFJJ3MgY29uZmlkZW5jZVxuICAgICAgICAgICAgICAgIC8vIChJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgY2FuIGJlIG5lZ2F0aXZlKVxuICAgICAgICAgICAgICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgICAgICAgICAgICAgbGV0IG5ld19jb25maWRlbmNlID0gTWF0aC5taW4oMSwgYWlfY29uZmlkZW5jZSArIEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSlcbiAgICAgICAgICAgICAgICBuZXdfY29uZmlkZW5jZSA9IE1hdGgubWF4KDAuNSwgbmV3X2NvbmZpZGVuY2UpXG4gICAgICAgICAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBTdHJpbmcoKCBuZXdfY29uZmlkZW5jZSAqIDEwMCkudG9GaXhlZCgwKSkgKyBcIiVcIlxuICAgICAgICAgICAgICAgIGxldCBjb25maWRlbmNlX2NoYW5nZSA9IChuZXdfY29uZmlkZW5jZSAtIGFpX2NvbmZpZGVuY2UpLnRvRml4ZWQoMilcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFjdHVhbCBBSSBjb25maWRlbmNlOiBcIiwgcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSwgXCIsIENvbmZpZGVuY2Ugc2hvd24gdG8gdXNlcjogXCIsIGRpc3BsYXllZF9haV9jb25maWRlbmNlKVxuXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2FjdHVhbFwiXSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImNvbmZfZGlzcGxheWVkXCJdID0gZGlzcGxheWVkX2FpX2NvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImNvbmZfY2hhbmdlXCJdID0gY29uZmlkZW5jZV9jaGFuZ2VcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImFkYXB0aXZlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29uZGl0aW9ucyBmb3IgYXBwbHlpbmcgJ2NvbmZpZGVuY2UgbWFuaXB1bGF0aW9uJyBpbnRlcnZlbnRpb24gbm90IHNhdGlzZmllZC5cIilcbiAgICAgICAgfVxuXG4gICAgfSBcbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJhaV9leHBsYW5hdGlvblwiKSB7XG4gICAgICAgIC8vIEFkZCBBSSBleHBsYW5hdGlvblxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJub25lXCIpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHlpbmcgQUkgZXhwbGFuYXRpb24gaW50ZXJ2ZW50aW9uLlwiKVxuICAgICAgICAgICAgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJmaXhlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIGV4cGxhbmF0aW9uXCIpXG4gICAgICAgICAgICAgICAgbGV0IGV4cGxhbmF0aW9uX3Nob3duOiBzdHJpbmcgPSAhcXVlc3Rpb24hW1wiYWlfZXhwbGFuYXRpb25cIl0gPyBcIk5vIGV4cGxhbmF0aW9uIHByb3ZpZGVkXCIgOiBxdWVzdGlvbiFbXCJhaV9leHBsYW5hdGlvblwiXVxuICAgICAgICAgICAgICAgICQoXCIjYWlfZXhwbGFuYXRpb25fc3BhblwiKS5odG1sKGV4cGxhbmF0aW9uX3Nob3duKVxuICAgICAgICAgICAgICAgICQoXCIjYWlfZXhwbGFuYXRpb25fZGl2XCIpLnNob3coKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiZXhwbGFuYXRpb25fc2hvd25cIl0gPSBleHBsYW5hdGlvbl9zaG93blxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgICAgICBjb25zdCBhaV9leHBsYW5hdGlvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2V4cGxhbmF0aW9uX2RpdlwiKVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIiksXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZXIoMTUsIGFpX2V4cGxhbmF0aW9uX2RpdiwgYnV0dG9ucywgbnVsbCwgXCJQbGVhc2UgcmVhZCB0aGUgZXhwbGFuYXRpb24uXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiYWRhcHRpdmVcIikge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEltcGxlbWVudCBhZGFwdGl2ZSBzdHJhdGVneVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbmRpdGlvbnMgZm9yIGFwcGx5aW5nICdBSSBleHBsYW5hdGlvbicgaW50ZXJ2ZW50aW9uIG5vdCBzYXRpc2ZpZWQuXCIpXG4gICAgICAgIH1cblxuICAgIH1cbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvblwiKSB7XG4gICAgICAgIC8vIEFkZCBBSSBleHBsYW5hdGlvblxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJub25lXCIpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHlpbmcgQUkgZXhwbGFuYXRpb24gaW50ZXJ2ZW50aW9uLlwiKVxuICAgICAgICAgICAgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJmaXhlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIGV4cGxhbmF0aW9uXCIpXG4gICAgICAgICAgICAgICAgbGV0IGV4cGxhbmF0aW9uX3Nob3duOiBzdHJpbmcgPSAhcXVlc3Rpb24hW1wiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIl0gPyBcIk5vIGV4cGxhbmF0aW9uIHByb3ZpZGVkXCIgOiBxdWVzdGlvbiFbXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvblwiXVxuICAgICAgICAgICAgICAgICQoXCIjYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fc3BhblwiKS5odG1sKGV4cGxhbmF0aW9uX3Nob3duKVxuICAgICAgICAgICAgICAgICQoXCIjYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fZGl2XCIpLnNob3coKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiZXhwbGFuYXRpb25fc2hvd25cIl0gPSBleHBsYW5hdGlvbl9zaG93blxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgICAgICBjb25zdCBhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdlwiKVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIiksXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZXIoMTAsIGFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdiwgYnV0dG9ucywgbnVsbCwgXCJQbGVhc2UgcmVhZCB0aGUgZXhwbGFuYXRpb24uXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiYWRhcHRpdmVcIikge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEltcGxlbWVudCBhZGFwdGl2ZSBzdHJhdGVneVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbmRpdGlvbnMgZm9yIGFwcGx5aW5nICdBSSBleHBsYW5hdGlvbicgaW50ZXJ2ZW50aW9uIG5vdCBzYXRpc2ZpZWQuXCIpXG4gICAgICAgIH1cblxuICAgIH0gXG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYm90aF9leHBsYW5hdGlvbl90eXBlc1wiKSB7XG4gICAgICAgIGFzc2VydCAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJhbmRvdmVydHJ1c3RcIiwgXCJHb2FsIGZvciAnYm90aCBleHBsYW5hdGlvbiB0eXBlcycgaW50ZXJ2ZW50aW9uIHNob3VsZCBiZSAnbWl0aWdhdGVfdW5kZXJhbmRvdmVydHJ1c3QnXCIpXG4gICAgICAgIGlmICh1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCBJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIGV4cGxhbmF0aW9uIGludGVydmVudGlvbiBmb3IgdW5kZXJ0cnVzdFwiKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIGV4cGxhbmF0aW9uXCIpXG4gICAgICAgICAgICBsZXQgZXhwbGFuYXRpb25fc2hvd246IHN0cmluZyA9ICFxdWVzdGlvbiFbXCJhaV9leHBsYW5hdGlvblwiXSA/IFwiTm8gZXhwbGFuYXRpb24gcHJvdmlkZWRcIiA6IHF1ZXN0aW9uIVtcImFpX2V4cGxhbmF0aW9uXCJdXG4gICAgICAgICAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3NwYW5cIikuaHRtbChleHBsYW5hdGlvbl9zaG93bilcbiAgICAgICAgICAgICQoXCIjYWlfZXhwbGFuYXRpb25fZGl2XCIpLnNob3coKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImV4cGxhbmF0aW9uX3Nob3duXCJdID0gZXhwbGFuYXRpb25fc2hvd25cbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgIGNvbnN0IGFpX2V4cGxhbmF0aW9uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWlfZXhwbGFuYXRpb25fZGl2XCIpXG4gICAgICAgICAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIiksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIHN0YXJ0VGltZXIoMTUsIGFpX2V4cGxhbmF0aW9uX2RpdiwgYnV0dG9ucywgbnVsbCwgXCJQbGVhc2UgcmVhZCB0aGUgZXhwbGFuYXRpb24uXCIpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gSW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIGNvbnRyYXN0aXZlIGV4cGxhbmF0aW9uIGludGVydmVudGlvbiBmb3Igb3ZlcnRydXN0XCIpXG4gICAgICAgICAgICBsZXQgZXhwbGFuYXRpb25fc2hvd246IHN0cmluZyA9ICFxdWVzdGlvbiFbXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvblwiXSA/IFwiTm8gZXhwbGFuYXRpb24gcHJvdmlkZWRcIiA6IHF1ZXN0aW9uIVtcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uXCJdXG4gICAgICAgICAgICAkKFwiI2FpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX3NwYW5cIikuaHRtbChleHBsYW5hdGlvbl9zaG93bilcbiAgICAgICAgICAgICQoXCIjYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fZGl2XCIpLnNob3coKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImV4cGxhbmF0aW9uX3Nob3duXCJdID0gZXhwbGFuYXRpb25fc2hvd25cbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgIGNvbnN0IGFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fZGl2XCIpXG4gICAgICAgICAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIiksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKSxcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIHN0YXJ0VGltZXIoMTAsIGFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdiwgYnV0dG9ucywgbnVsbCwgXCJQbGVhc2UgcmVhZCB0aGUgZXhwbGFuYXRpb24uXCIpXG5cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJhaV90aGlua2luZ1wiKSB7XG4gICAgICAgIC8vIEFkZCBBSSB0aGlua2luZ1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibm9uZVwiKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX3VuZGVydHJ1c3RcIiAmJiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCkgfHxcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV9vdmVydHJ1c3RcIiAmJiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPiBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIEFJIHRoaW5raW5nIGludGVydmVudGlvbi5cIilcbiAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiZml4ZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBBSSB0aGlua2luZ1wiKVxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgICAgICAkKFwiI2FpX3RoaW5raW5nX2RpdlwiKS5zaG93KClcbiAgICAgICAgICAgICAgICBhd2FpdCB3YWl0KDEwMDAwKVxuICAgICAgICAgICAgICAgICQoXCIjYWlfdGhpbmtpbmdfZGl2XCIpLmhpZGUoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImFkYXB0aXZlXCIpIHtcbiAgICAgICAgICAgICAgICAvL1RPRE86IEltcGxlbWVudCBhZGFwdGl2ZSBzdHJhdGVneVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcImFpX2ZvcmNlZF9wYXVzZVwiKSB7XG4gICAgICAgIC8vIEFkZCBBSSBmb3JjZWQgcGF1c2VcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm5vbmVcIikgfHxcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV91bmRlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsIDwgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfb3ZlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBBSSBmb3JjZWQgcGF1c2UgaW50ZXJ2ZW50aW9uLlwiKVxuICAgICAgICAgICAgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJmaXhlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIEFJIGZvcmNlZCBwYXVzZVwiKVxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgICAgICBjb25zdCBhaV9hc3Npc3RhbmNlX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWlfYXNzaXN0YW5jZV9kaXZcIilcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLFxuICAgICAgICAgICAgICAgIF0gICAgXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lcigxMCwgYWlfYXNzaXN0YW5jZV9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHRha2Ugc29tZSB0aW1lIHRvIGNhcmVmdWxseSBjb25zaWRlciB0aGUgQUkncyBzdWdnZXN0aW9uLlwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImFkYXB0aXZlXCIpIHtcbiAgICAgICAgICAgICAgICAvL1RPRE86IEltcGxlbWVudCBhZGFwdGl2ZSBzdHJhdGVneVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBcbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJib3RoX3BhdXNlX3R5cGVzXCIpIHtcbiAgICAgICAgYXNzZXJ0IChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV91bmRlcmFuZG92ZXJ0cnVzdFwiLCBcIkdvYWwgZm9yICdib3RoIHBhdXNlIHR5cGVzJyBpbnRlcnZlbnRpb24gc2hvdWxkIGJlICdtaXRpZ2F0ZV91bmRlcmFuZG92ZXJ0cnVzdCdcIilcbiAgICAgICAgaWYgKHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IEludGVydmVudGlvblVuZGVydHJ1c3RUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHlpbmcgQUkgdGhpbmtpbmcgaW50ZXJ2ZW50aW9uIGZvciB1bmRlcnRydXN0XCIpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNob3dpbmcgQUkgdGhpbmtpbmdcIilcbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG4gICAgICAgICAgICAkKFwiI2FpX3RoaW5raW5nX2RpdlwiKS5zaG93KClcbiAgICAgICAgICAgIGF3YWl0IHdhaXQoMTAwMDApXG4gICAgICAgICAgICAkKFwiI2FpX3RoaW5raW5nX2RpdlwiKS5oaWRlKClcbiAgICAgICAgfSBcbiAgICAgICAgZWxzZSBpZiAodXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gSW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIEFJIGZvcmNlZCBwYXVzZSBpbnRlcnZlbnRpb24gZm9yIG92ZXJ0cnVzdFwiKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIEFJIGZvcmNlZCBwYXVzZVwiKVxuICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJpbnRlcnZlbnRpb25fYXBwbGllZFwiXSA9IHRydWVcblxuICAgICAgICAgICAgY29uc3QgYWlfYXNzaXN0YW5jZV9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2Fzc2lzdGFuY2VfZGl2XCIpXG4gICAgICAgICAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIiksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKSxcbiAgICAgICAgICAgIF0gICAgXG4gICAgICAgICAgICBzdGFydFRpbWVyKDEwLCBhaV9hc3Npc3RhbmNlX2RpdiwgYnV0dG9ucywgbnVsbCwgXCJQbGVhc2UgdGFrZSBzb21lIHRpbWUgdG8gY2FyZWZ1bGx5IGNvbnNpZGVyIHRoZSBBSSdzIHN1Z2dlc3Rpb24uXCIpXG4gICAgICAgIH1cbiAgICB9XG5cblxuXG5cbiAgICAvL2ludGVydmVudGlvbl9kZXRhaWxzWydhY3R1YWxfYWlfY29uZmlkZW5jZSddID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgIC8vaW50ZXJ2ZW50aW9uX2RldGFpbHNbJ2Rpc3BsYXllZF9haV9jb25maWRlbmNlJ10gPSBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZVxuICAgIGNvbnNvbGUubG9nKFwiQUkgQXNzaXN0YW5jZSBJbnRlcnZlbnRpb24gRGV0YWlsczogXCIsIGludGVydmVudGlvbl9kZXRhaWxzKVxuXG4gICAgJChcIiNhaV9wcmVkaWN0aW9uX3NwYW5cIikuaHRtbChcIk9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgJChcIiNhaV9jb25maWRlbmNlX3NwYW5cIikuaHRtbChkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSlcblxuICAgICQoXCIjYWlfYXNzaXN0YW5jZV9kaXZcIikuc2hvdygpXG4gICAgJChcIiNmaW5hbF91c2VyX2RlY2lzaW9uX2RpdlwiKS5zaG93KClcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0X3RydXN0X2VmZmVjdCgpIHtcbiAgICAvLyBHZXQgdHJ1c3QgZWZmZWN0IGZvciB0aGlzIGludGVyYWN0aW9uXG4gICAgbGV0IGluaXRpYWxfdXNlcl9jb3JyZWN0bmVzcyA9IE51bWJlcihpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0pXG4gICAgbGV0IGFpX2NvcnJlY3RuZXNzID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0pXG4gICAgbGV0IGZpbmFsX3VzZXJfY29ycmVjdG5lc3MgPSBOdW1iZXIoZmluYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJjb3JyZWN0X29wdGlvblwiXSlcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB0cnVzdF9lZmZlY3RfaW5wdXRzID0ge1xuICAgICAgICBcImluaXRpYWxfdXNlcl9jb3JyZWN0bmVzc1wiOiBpbml0aWFsX3VzZXJfY29ycmVjdG5lc3MsXG4gICAgICAgIFwiYWlfY29ycmVjdG5lc3NcIjogYWlfY29ycmVjdG5lc3MsXG4gICAgICAgIFwiZmluYWxfdXNlcl9jb3JyZWN0bmVzc1wiOiBmaW5hbF91c2VyX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImFpX2NvbmZpZGVuY2VcIjogYWlfY29uZmlkZW5jZSxcbiAgICAgICAgXCJ1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIlRydXN0IGVmZmVjdCBpbnB1dHM6IFwiLCB0cnVzdF9lZmZlY3RfaW5wdXRzKVxuICAgIC8vbGV0IHRydXN0X2VmZmVjdCA9IGdldF91c2VyX3RydXN0X2VmZmVjdCh0cnVzdF9lZmZlY3RfaW5wdXRzKVxuICAgIGxldCByZXN1bHQ6IGFueVxuICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImdldF90cnVzdF9lZmZlY3RcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwiMnN0ZXAtdHJ1c3Qtc3R1ZHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxfbmFtZTogdHJ1c3RfZWZmZWN0X21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeSh0cnVzdF9lZmZlY3RfaW5wdXRzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIlRydXN0IGVmZmVjdCBwcmVkaWN0aW9uIHJlc3VsdDogXCIsIHJlc3VsdClcbiAgICBsZXQgdHJ1c3RfZWZmZWN0ID0gYXdhaXQgcmVzdWx0W1widHJ1c3RfZWZmZWN0XCJdXG5cbiAgICB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCArIHRydXN0X2VmZmVjdFxuICAgIHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEgPSB7XG4gICAgICAgIFwibW9kZWxfaW5wdXRzXCI6IHRydXN0X2VmZmVjdF9pbnB1dHMsXG4gICAgICAgIFwicHJlZGljdGVkX3RydXN0X2VmZmVjdFwiOiB0cnVzdF9lZmZlY3QsXG4gICAgICAgIFwidXNlcl9uZXdfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCxcbiAgICB9XG4gICAgcmV0dXJuIHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGFcbn1cblxuZnVuY3Rpb24gbWFrZV9maW5hbF91c2VyX2RlY2lzaW9uKG9wdGlvbikge1xuICAgIHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCA9IERhdGUubm93KClcbiAgICBmaW5hbF91c2VyX2RlY2lzaW9uID0gb3B0aW9uXG4gICAgYXNzZXJ0KG9wdGlvbiA9PSAxIHx8IG9wdGlvbiA9PSAyLCBcIkludmFsaWQgb3B0aW9uIVwiKVxuICAgIGlmIChvcHRpb24gPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG4gICAgJChcIiNmaW5hbF91c2VyX2NvbmZpZGVuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxufVxuJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbigxKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24oMikpXG5cbmZ1bmN0aW9uIGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoY29uZl9sZXZlbCkge1xuICAgIHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgZmluYWxfdXNlcl9jb25maWRlbmNlID0gY29uZl9sZXZlbFxuICAgIGFzc2VydChjb25mX2xldmVsID09IDEgfHwgY29uZl9sZXZlbCA9PSAyIHx8IGNvbmZfbGV2ZWwgPT0gMywgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICBpZiAoY29uZl9sZXZlbCA9PSAxKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgIH0gZWxzZSBpZiAoY29uZl9sZXZlbCA9PSAyKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjNcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgIH1cblxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjNcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIHNob3dfcmVzdWx0KClcbn1cbiQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoMSkpXG4kKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKDIpKVxuJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSgzKSlcblxuXG5hc3luYyBmdW5jdGlvbiBzaG93X3Jlc3VsdCgpIHtcblxuICAgIGxldCBjb3JyZWN0X29wdGlvbjogbnVtYmVyID0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl1cbiAgICBsZXQgdXNlcl9pc19jb3JyZWN0OiBib29sZWFuID0gY29ycmVjdF9vcHRpb24gPT0gZmluYWxfdXNlcl9kZWNpc2lvblxuXG4gICAgbGV0IGFpX2lzX2NvcnJlY3Q6IGJvb2xlYW4gPSBxdWVzdGlvbiFbXCJhaV9pc19jb3JyZWN0XCJdXG4gICAgbGV0IG1lc3NhZ2UgPSBcIkNvcnJlY3QgYW5zd2VyOiA8Yj5PcHRpb24gXCIgKyBjb3JyZWN0X29wdGlvbiArIFwiPC9iPi48YnI+XCJcbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJZb3UgcGlja2VkIE9wdGlvbiBcIiArIGZpbmFsX3VzZXJfZGVjaXNpb24gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtZXNzYWdlICs9IFwiWW91IHBpY2tlZCBPcHRpb24gXCIgKyBmaW5hbF91c2VyX2RlY2lzaW9uICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfaW5jb3JyZWN0Jz48Yj5pbmNvcnJlY3Q8L2I+PC9zcGFuPi48YnI+XCJcbiAgICB9XG4gICAgaWYgKGFpX2lzX2NvcnJlY3QpIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIlRoZSBBSSBwaWNrZWQgT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2NvcnJlY3QnPjxiPmNvcnJlY3Q8Yj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIlRoZSBBSSBwaWNrZWQgT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+aW5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGlmICh1c2VyX2lzX2NvcnJlY3QpIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIjxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5Zb3UgcmVjZWl2ZSBhIHJld2FyZCBvZiAkMC4xMC48L2I+PC9zcGFuPlwiXG4gICAgICAgIGJhbGFuY2UgKz0gMC4xXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtZXNzYWdlICs9IFwiPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+WW91IGRvIG5vdCByZWNlaXZlIGFueSByZXdhcmQuPC9iPjwvc3Bhbj5cIlxuICAgIH1cblxuICAgIG1lc3NhZ2UgKz0gXCI8YnI+XCJcbiAgICAvL2lmIChzdWNjZXNzKSB7XG4gICAgLy8gICAgbWVzc2FnZSArPSBgWW91IGdhaW4gJCR7KGJldF92YWwqYmV0X3ZhbF9yYXRpbykudG9GaXhlZCgyKX0uYFxuICAgIC8vICAgIGJhbGFuY2UgKz0gYmV0X3ZhbCpiZXRfdmFsX3JhdGlvXG4gICAgLy99IGVsc2Uge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gYFlvdSBsb3NlICQkeyhiZXRfdmFsLzEuMCkudG9GaXhlZCgyKX0uYFxuICAgIC8vICAgIGJhbGFuY2UgLT0gYmV0X3ZhbC8xLjBcbiAgICAvLyAgICBiYWxhbmNlID0gTWF0aC5tYXgoMCwgYmFsYW5jZSlcbiAgICAvL31cbiAgICAkKFwiI2JhbGFuY2VcIikudGV4dChgQmFsYW5jZTogJCR7YmFsYW5jZS50b0ZpeGVkKDIpfSArICQxLjBgKVxuICAgICQoXCIjcmVzdWx0X3NwYW5cIikuaHRtbChtZXNzYWdlKVxuICAgIC8vJChcIiNidXR0b25fbmV4dFwiKS5zaG93KClcbiAgICAkKFwiI3Jlc3VsdF9zcGFuXCIpLnNob3coKVxuICAgIC8vJChcIiNidXR0b25fcGxhY2VfYmV0XCIpLmhpZGUoKVxuICAgIGlmIChza2lwX3RydXN0X3JlcG9ydGluZykgICB7XG4gICAgICAgICQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAkKFwiI3VzZXJfdHJ1c3RfcmVwb3J0X2RpdlwiKS5zaG93KClcbiAgICB9XG5cbiAgICAvL3RydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEgPSBhd2FpdCBnZXRfdHJ1c3RfZWZmZWN0KClcbiAgICB1cGRhdGVfdXNlcl90cnVzdF9sZXZlbF9lc3RpbWF0ZSgpXG5cbiAgICAvLyQoJyNyYW5nZV92YWwnKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZV91c2VyX3RydXN0X2xldmVsX2VzdGltYXRlKCkge1xuICAgIGlmICh1c2VyVHJ1c3RIZXVyaXN0aWMgPT0gXCJzbW9vdGhlZF9jb25md2VpZ2h0ZWRfdHJ1c3RcIikge1xuICAgICAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgICAgICBsZXQgdHJ1c3RfZWZmZWN0ID0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSA9PSBxdWVzdGlvbiFbXCJjb3JyZWN0X29wdGlvblwiXSA/IGFpX2NvbmZpZGVuY2UgOiAtYWlfY29uZmlkZW5jZVxuICAgICAgICBsZXQgcHJldl9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgICAgIHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwgPSBzbW9vdGhpbmdQYXJhbSAqIHRydXN0X2VmZmVjdCArICgxLXNtb290aGluZ1BhcmFtKSAqIHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICAgICAgdHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YSA9IHtcbiAgICAgICAgICAgIFwicHJldl9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcIjogcHJldl9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgICAgICBcInRydXN0X2VmZmVjdFwiOiB0cnVzdF9lZmZlY3QsXG4gICAgICAgICAgICBcIm5ld19lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCxcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhcIk9sZCBlc3RpbWF0ZWQgdHJ1c3QgbGV2ZWw6IFwiICsgcHJldl9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwgKyBcIiwgdHJ1c3QgZWZmZWN0OiBcIiArIHRydXN0X2VmZmVjdCArIFwiLCBuZXcgZXN0aW1hdGVkIHRydXN0IGxldmVsOiBcIiArIHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwpXG4gICAgfVxufVxuXG4vLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5vbihcImNsaWNrXCIsIHNob3dfcmVzdWx0KVxuXG5mdW5jdGlvbiBzdGFydF90aW1lcl9mb3JfaW5pdGlhbF9kZWNpc2lvbigpIHtcbiAgICBjb25zdCBpbml0aWFsX3VzZXJfZGVjaXNpb25fZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbml0aWFsX3VzZXJfZGVjaXNpb25fZGl2XCIpXG4gICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgXVxuICAgIHN0YXJ0VGltZXIoMTAsIGluaXRpYWxfdXNlcl9kZWNpc2lvbl9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHJlYWQgdGhlIHF1ZXN0aW9uIGFuZCBvcHRpb25zIGNsb3NlbHkuXCIpXG59XG5cbmZ1bmN0aW9uIG5leHRfcXVlc3Rpb24oKSB7XG4gICAgLy8gcmVzdG9yZSBwcmV2aW91cyBzdGF0ZSBvZiBVSVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuXG4gICAgJChcIiNhaV9hc3Npc3RhbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2FpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2FpX3RoaW5raW5nX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2luaXRpYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2ZpbmFsX3VzZXJfZGVjaXNpb25fZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjZmluYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5oaWRlKClcbiAgICAkKCcjcmFuZ2VfdmFsJykucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiN1c2VyX3RydXN0X3JlcG9ydF9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNidXR0b25fcGxhY2VfYmV0XCIpLmhpZGUoKVxuICAgICQoXCIjYnV0dG9uX25leHRcIikuaGlkZSgpXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5oaWRlKClcbiAgICBpZiAocXVlc3Rpb25faSA9PSAtMSkge1xuICAgICAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChcIi1cIilcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgICQoXCIjcmFuZ2VfdGV4dFwiKS50ZXh0KGBCZWZvcmUgdGhpcyBpbnRlcmFjdGlvbiwgeW91ciB0cnVzdCBpbiB0aGUgQUk6ICR7dXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAqIDEwfSAvIDEwMC5gKVxuICAgIH1cbiAgICAkKFwiI3JhbmdlX3ZhbFwiKS52YWwodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbClcbiAgICBwcmV2X3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgPSB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsXG5cbiAgICBxdWVzdGlvbl9pICs9IDFcbiAgICBpZiAocXVlc3Rpb25faSA+PSBkYXRhLmxlbmd0aCkge1xuICAgICAgICAkKFwiI21haW5fYm94X2V4cGVyaW1lbnRcIikuaGlkZSgpXG4gICAgICAgIGlmIChNT0NLTU9ERSkge1xuICAgICAgICAgICAgJChcIiNtYWluX2JveF9lbmRfbW9ja1wiKS5zaG93KClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoXCIjbWFpbl9ib3hfZW5kXCIpLnNob3coKVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgIH1cbiAgICBxdWVzdGlvbiA9IGRhdGFbcXVlc3Rpb25faV1cblxuICAgICQoXCIjcXVlc3Rpb25fc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcInF1ZXN0aW9uXCJdKVxuICAgICQoXCIjb3B0aW9uMV9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wib3B0aW9uMVwiXSlcbiAgICAkKFwiI29wdGlvbjJfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcIm9wdGlvbjJcIl0pXG4gICAgLy8kKFwiI2FpX3ByZWRpY3Rpb25fc3BhblwiKS5odG1sKFwiT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICAvLyQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSlcblxuICAgIC8vIHNldCBiZXQgdmFsdWUgcmF0aW9cbiAgICBpZihxdWVzdGlvbi5oYXNPd25Qcm9wZXJ0eShcInJld2FyZF9yYXRpb1wiKSkge1xuICAgICAgICBsZXQgW3JhdGlvMSwgcmF0aW8yXSA9IHF1ZXN0aW9uW1wicmV3YXJkX3JhdGlvXCJdXG4gICAgICAgIHJhdGlvMSA9IE51bWJlcihyYXRpbzEpXG4gICAgICAgIHJhdGlvMiA9IE51bWJlcihyYXRpbzIpXG4gICAgICAgIGJldF92YWxfcmF0aW8gPSByYXRpbzEvcmF0aW8yXG4gICAgfSBlbHNlIHtcbiAgICAgICAgYmV0X3ZhbF9yYXRpbyA9IDFcbiAgICB9XG5cbiAgICB0aW1lX3F1ZXN0aW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgICQoXCIjcHJvZ3Jlc3NcIikudGV4dChgUHJvZ3Jlc3M6ICR7cXVlc3Rpb25faSArIDF9IC8gJHtkYXRhLmxlbmd0aH1gKVxuXG4gICAgc3RhcnRfdGltZXJfZm9yX2luaXRpYWxfZGVjaXNpb24oKVxufVxuXG4vLyBnZXQgdXNlciBpZCBhbmQgbG9hZCBxdWV1ZVxuLy8gdHJ5IHRvIHNlZSBpZiBzdGFydCBvdmVycmlkZSB3YXMgcGFzc2VkXG5jb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuY29uc3Qgc3RhcnRPdmVycmlkZSA9IHVybFBhcmFtcy5nZXQoJ3N0YXJ0Jyk7XG5jb25zdCBVSURGcm9tVVJMID0gdXJsUGFyYW1zLmdldChcInVpZFwiKVxuZ2xvYmFsVGhpcy51cmxfZGF0YSA9IHBhcmFtc1RvT2JqZWN0KHVybFBhcmFtcy5lbnRyaWVzKCkpXG5cbmlmIChVSURGcm9tVVJMICE9IG51bGwpIHtcbiAgICBnbG9iYWxUaGlzLnVpZCA9IFVJREZyb21VUkwgYXMgc3RyaW5nXG4gICAgaWYgKGdsb2JhbFRoaXMudWlkID09IFwicHJvbGlmaWNfcmFuZG9tXCIpIHtcbiAgICAgICAgbGV0IHF1ZXVlX2lkID0gYCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApfWAucGFkU3RhcnQoMywgXCIwXCIpXG4gICAgICAgIGdsb2JhbFRoaXMudWlkID0gYCR7dXJsUGFyYW1zLmdldChcInByb2xpZmljX3F1ZXVlX25hbWVcIil9LyR7cXVldWVfaWR9YFxuICAgIH1cbn0gZWxzZSBpZiAoREVWTU9ERSkge1xuICAgIGdsb2JhbFRoaXMudWlkID0gXCJkZW1vXCJcbn0gZWxzZSB7XG4gICAgbGV0IFVJRF9tYXliZTogYW55ID0gbnVsbFxuICAgIHdoaWxlIChVSURfbWF5YmUgPT0gbnVsbCkge1xuICAgICAgICBVSURfbWF5YmUgPSBwcm9tcHQoXCJFbnRlciB5b3VyIHVzZXIgaWQuIFBsZWFzZSBnZXQgaW4gdG91Y2ggaWYgeW91IHdlcmUgbm90IGFzc2lnbmVkIGFuIGlkIGJ1dCB3aXNoIHRvIHBhcnRpY2lwYXRlIGluIHRoaXMgZXhwZXJpbWVudC5cIilcbiAgICB9XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBVSURfbWF5YmUhXG59XG5cbmxldCBpbnRlcnZlbnRpb25fYWxsb3dlZF90aW1lc3RlcHM6IG51bWJlcltdID0gW11cbmlmIChnbG9iYWxUaGlzLnVpZC5pbmNsdWRlcyhcIjM0M1wiKSkge1xuICAgIGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwcyA9IFs3LCA4LCA5LCAxNywgMTgsIDE5LCAyNywgMjgsIDI5XVxufSBlbHNlIGlmIChnbG9iYWxUaGlzLnVpZC5pbmNsdWRlcyhcIjQzNFwiKSkge1xuICAgIGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwcyA9IFs3LCA4LCA5LCAxNywgMTgsIDE5LCAyNywgMjgsIDI5XVxufSBlbHNlIGlmIChnbG9iYWxUaGlzLnVpZC5pbmNsdWRlcyhcIjczNVwiKSkge1xuICAgIGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwcyA9IFsxMCwgMTEsIDEyLCAxMywgMTQsIDI1LCAyNiwgMjcsIDI4LCAyOV1cbn1cblxuLy9jb25zdCB2YWxpZEFJSW50ZXJ2ZW50aW9ucyA9IFtcIm5vbmVcIiwgXCJkdW1teVwiLCBcImNvbmZpZGVuY2VfaW5mbGF0aW9uXCIsIFwiY29uZmlkZW5jZV9pbmZsYXRpb25fZml4ZWRcIiwgXCJjb25maWRlbmNlX2RlZmxhdGlvblwiXVxuLy9sZXQgQUlJbnRlcnZlbnRpb25UeXBlID0gdXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90eXBlXCIpXG4vL2xldCBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90aHJlc2hvbGRcIikpXG4vL2xldCBJbnRlcnZlbnRpb25GaXhlZENvbmZJbmNyZWFzZSA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX2ZpeGVkY29uZmluY3JlYXNlXCIpKVxuY29uc3QgdmFsaWRJbnRlcnZlbnRpb25Hb2FscyA9IFtcIm5vbmVcIiwgXCJtaXRpZ2F0ZV91bmRlcnRydXN0XCIsIFwibWl0aWdhdGVfb3ZlcnRydXN0XCIsIFwibWl0aWdhdGVfdW5kZXJhbmRvdmVydHJ1c3RcIl1cbmxldCBBSUludGVydmVudGlvbkdvYWwgPSB1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX2dvYWxcIilcbmlmIChBSUludGVydmVudGlvbkdvYWwgPT0gbnVsbCkge0FJSW50ZXJ2ZW50aW9uR29hbCA9IFwibm9uZVwifVxuaWYgKCF2YWxpZEludGVydmVudGlvbkdvYWxzLmluY2x1ZGVzKEFJSW50ZXJ2ZW50aW9uR29hbCEpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBSSBBc3Npc3RhbmNlIEludGVydmVudGlvbiBHb2FsOiBcIiArIEFJSW50ZXJ2ZW50aW9uR29hbClcbn1cblxuY29uc3QgdmFsaWRJbnRlcnZlbnRpb25UeXBlcyA9IFtcIm5vbmVcIiwgXCJkdW1teVwiLCBcImNvbmZpZGVuY2VfbWFuaXBcIiwgXCJhaV9leHBsYW5hdGlvblwiLCBcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uXCIsIFwiYm90aF9leHBsYW5hdGlvbl90eXBlc1wiLCBcImFpX3RoaW5raW5nXCIsIFwiYWlfZm9yY2VkX3BhdXNlXCIsIFwiYm90aF9wYXVzZV90eXBlc1wiXVxubGV0IEFJSW50ZXJ2ZW50aW9uVHlwZSA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdHlwZVwiKVxuaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBudWxsKSB7QUlJbnRlcnZlbnRpb25UeXBlID0gXCJub25lXCJ9IFxuaWYgKCF2YWxpZEludGVydmVudGlvblR5cGVzLmluY2x1ZGVzKEFJSW50ZXJ2ZW50aW9uVHlwZSEpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBSSBBc3Npc3RhbmNlIEludGVydmVudGlvbjogXCIgKyBBSUludGVydmVudGlvblR5cGUpXG59XG5cbmNvbnN0IHZhbGlkSW50ZXJ2ZW50aW9uU3RyYXRlZ2llcyA9IFtcImR1bW15XCIsIFwiZml4ZWRcIiwgXCJhZGFwdGl2ZVwiXVxubGV0IEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPSB1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3N0cmF0ZWd5XCIpXG5pZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBudWxsKSB7QUlJbnRlcnZlbnRpb25TdHJhdGVneSA9IFwiZHVtbXlcIn1cbmlmICghdmFsaWRJbnRlcnZlbnRpb25TdHJhdGVnaWVzLmluY2x1ZGVzKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3khKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQUkgQXNzaXN0YW5jZSBJbnRlcnZlbnRpb24gU3RyYXRlZ3k6IFwiICsgQUlJbnRlcnZlbnRpb25TdHJhdGVneSlcbn1cblxuLy8gSW50ZXJ2ZW50aW9uLXNwZWNpZmljIHBhcmFtZXRlcnNcbmxldCBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90aHJlc2hvbGRcIikpXG5pZiAoSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkID09IG51bGwpIHtJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPSAtMX1cbmxldCBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3RydXN0X3RocmVzaG9sZFwiKSlcbmlmIChJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCA9PSBudWxsKSB7SW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQgPSAwfVxubGV0IEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX2ZpeGVkY29uZmNoYW5nZVwiKSlcbmlmIChJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgPT0gbnVsbCkge0ludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA9IDB9XG5sZXQgSW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3VuZGVydHJ1c3RfdGhyZXNob2xkXCIpKVxuaWYgKEludGVydmVudGlvblVuZGVydHJ1c3RUaHJlc2hvbGQgPT0gbnVsbCkge0ludGVydmVudGlvblVuZGVydHJ1c3RUaHJlc2hvbGQgPSBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZH1cbmxldCBJbnRlcnZlbnRpb25PdmVydHJ1c3RUaHJlc2hvbGQgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl9vdmVydHJ1c3RfdGhyZXNob2xkXCIpKVxuaWYgKEludGVydmVudGlvbk92ZXJ0cnVzdFRocmVzaG9sZCA9PSBudWxsKSB7SW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkID0gSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGR9XG5cbmxldCB1c2VyVHJ1c3RIZXVyaXN0aWMgPSB1cmxQYXJhbXMuZ2V0KFwidXNlcl90cnVzdF9oZXVyaXN0aWNcIilcbmlmICh1c2VyVHJ1c3RIZXVyaXN0aWMgPT0gbnVsbCkge3VzZXJUcnVzdEhldXJpc3RpYyA9IFwidXNlcl9yZXBvcnRlZFwifVxubGV0IHNtb290aGluZ1BhcmFtID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJzbW9vdGhpbmdfcGFyYW1cIikpXG5pZiAoc21vb3RoaW5nUGFyYW0gPT0gbnVsbCkge3Ntb290aGluZ1BhcmFtID0gMX1cblxubGV0IHNraXBfdHJ1c3RfcmVwb3J0aW5nID0gdXJsUGFyYW1zLmdldChcInNraXBfdHJ1c3RfcmVwb3J0aW5nXCIpID09IFwidHJ1ZVwiXG5pZiAoc2tpcF90cnVzdF9yZXBvcnRpbmcgPT0gbnVsbCkge3NraXBfdHJ1c3RfcmVwb3J0aW5nID0gZmFsc2V9XG5cbmNvbnNvbGUubG9nKFwiQUlJbnRlcnZlbnRpb25Hb2FsOiBcIiwgQUlJbnRlcnZlbnRpb25Hb2FsKVxuY29uc29sZS5sb2coXCJBSUludGVydmVudGlvblR5cGU6IFwiLCBBSUludGVydmVudGlvblR5cGUpXG5jb25zb2xlLmxvZyhcIkFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3k6IFwiLCBBSUludGVydmVudGlvblN0cmF0ZWd5KVxuY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQ6IFwiLCBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQpXG5jb25zb2xlLmxvZyhcIkludGVydmVudGlvblRydXN0VGhyZXNob2xkOiBcIiwgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpXG5jb25zb2xlLmxvZyhcIkludGVydmVudGlvblVuZGVydHJ1c3RUaHJlc2hvbGQ6IFwiLCBJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkKVxuY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb25PdmVydHJ1c3RUaHJlc2hvbGQ6IFwiLCBJbnRlcnZlbnRpb25PdmVydHJ1c3RUaHJlc2hvbGQpXG5jb25zb2xlLmxvZyhcIkludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZTogXCIsIEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSlcbmNvbnNvbGUubG9nKFwidXNlclRydXN0SGV1cmlzdGljOiBcIiwgdXNlclRydXN0SGV1cmlzdGljKVxuY29uc29sZS5sb2coXCJza2lwX3RydXN0X3JlcG9ydGluZzogXCIsIHNraXBfdHJ1c3RfcmVwb3J0aW5nKVxuXG5pZiAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiKSB7XG4gICAgYXNzZXJ0KEludGVydmVudGlvblRydXN0VGhyZXNob2xkIDw9IDAsIFwiVHJ1c3QgdGhyZXNob2xkIGZvciBtaXRpZ2F0aW5nIHVuZGVydHJ1c3QgY2Fubm90IGJlIHBvc2l0aXZlLlwiKVxuICAgIGFzc2VydChJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgPj0gMCwgXCJDb25maWRlbmNlIGNoYW5nZSBmb3IgbWl0aWdhdGluZyB1bmRlcnRydXN0IGNhbm5vdCBiZSBuZWdhdGl2ZS5cIilcbn0gZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfb3ZlcnRydXN0XCIpIHtcbiAgICBhc3NlcnQoSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQgPj0gMCwgXCJUcnVzdCB0aHJlc2hvbGQgZm9yIG1pdGlnYXRpbmcgb3ZlcnRydXN0IGNhbm5vdCBiZSBuZWdhdGl2ZS5cIilcbiAgICBhc3NlcnQoSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlIDw9IDAsIFwiQ29uZmlkZW5jZSBjaGFuZ2UgZm9yIG1pdGlnYXRpbmcgb3ZlcnRydXN0IGNhbm5vdCBiZSBwb3NpdGl2ZS5cIilcbn1cblxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl9nb2FsXCJdID0gQUlJbnRlcnZlbnRpb25Hb2FsXG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX3R5cGVcIl0gPSBBSUludGVydmVudGlvblR5cGVcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fc3RyYXRlZ3lcIl0gPSBBSUludGVydmVudGlvblN0cmF0ZWd5XG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX3RocmVzaG9sZFwiXSA9IEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZFxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl9maXhlZGNvbmZjaGFuZ2VcIl0gPSBJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2Vcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJ1c2VyX3RydXN0X2hldXJpc3RpY1wiXSA9IHVzZXJUcnVzdEhldXJpc3RpY1xuZ2xvYmFsVGhpcy51cmxfZGF0YVtcInNraXBfdHJ1c3RfcmVwb3J0aW5nXCJdID0gc2tpcF90cnVzdF9yZXBvcnRpbmdcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJzbW9vdGhpbmdfcGFyYW1cIl0gPSBzbW9vdGhpbmdQYXJhbVxuXG4vLyB2ZXJzaW9uIGZvciBwYXBlclxuaWYgKGdsb2JhbFRoaXMudWlkLnN0YXJ0c1dpdGgoXCJkZW1vX3BhcGVyXCIpKSB7XG4gICAgTU9DS01PREUgPSB0cnVlXG59IGVsc2Uge1xuXG59XG5jb25zb2xlLmxvZyhcIlJ1bm5pbmcgd2l0aCBVSURcIiwgZ2xvYmFsVGhpcy51aWQpXG5sb2FkX2RhdGEoKS5jYXRjaCgoX2Vycm9yKSA9PiB7XG4gICAgLy9hbGVydChcIkludmFsaWQgdXNlciBpZC5cIilcbiAgICBjb25zb2xlLmxvZyhcIkludmFsaWQgdXNlciBpZC5cIilcbiAgICBjb25zb2xlLmxvZyhnbG9iYWxUaGlzLnVpZCEpXG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG59XG4pLnRoZW4oKG5ld19kYXRhKSA9PiB7XG4gICAgZGF0YSA9IG5ld19kYXRhXG4gICAgaWYgKHN0YXJ0T3ZlcnJpZGUgIT0gbnVsbCkge1xuICAgICAgICBxdWVzdGlvbl9pID0gcGFyc2VJbnQoc3RhcnRPdmVycmlkZSkgLSAxXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgZnJvbVwiLCBxdWVzdGlvbl9pKVxuICAgIH1cbiAgICAvLyBuZXh0X3F1ZXN0aW9uKClcbiAgICBuZXh0X2luc3RydWN0aW9ucygwKVxuICAgICQoXCIjbWFpbl9ib3hfaW5zdHJ1Y3Rpb25zXCIpLnNob3coKVxuICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5oaWRlKClcbn0pXG5cbmNvbnNvbGUubG9nKFwiU3RhcnRpbmcgc2Vzc2lvbiB3aXRoIFVJRDpcIiwgZ2xvYmFsVGhpcy51aWQhKVxuXG5sZXQgYWxlcnRfYWN0aXZlID0gZmFsc2VcbmRvY3VtZW50Lm9udmlzaWJpbGl0eWNoYW5nZSA9ICgpID0+IHtcbiAgICBpZiAoIWFsZXJ0X2FjdGl2ZSkge1xuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSArPSAxXG4gICAgICAgIGFsZXJ0X2FjdGl2ZSA9IHRydWVcbiAgICAgICAgaWYgKCEoZ2xvYmFsVGhpcy51aWQhLnN0YXJ0c1dpdGgoXCJkZW1vXCIpKSAmJiAhKERFVk1PREUpKSB7XG4gICAgICAgICAgICBhbGVydChcIlBsZWFzZSBkb24ndCBsZWF2ZSB0aGUgcGFnZS4gSWYgeW91IGRvIHNvIGFnYWluLCB3ZSBtYXkgcmVzdHJpY3QgcGF5aW5nIHlvdS5cIilcbiAgICAgICAgfVxuICAgICAgICBhbGVydF9hY3RpdmUgPSBmYWxzZVxuICAgIH1cbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTRVJWRVJfTE9HX1JPT1QiLCJhY3RpdmVUaW1lciIsInN0YXJ0VGltZXIiLCJkdXJhdGlvbiIsInN0ZXBEaXYiLCJidXR0b25zIiwiY2FsbGJhY2siLCJtZXNzYWdlIiwic2hvd1RpbWVSZW1haW5pbmciLCJjbGVhckludGVydmFsIiwiZm9yRWFjaCIsImJ1dHRvbiIsInNldEF0dHJpYnV0ZSIsInRpbWVyRGlzcGxheSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlkIiwic3R5bGUiLCJmb250V2VpZ2h0IiwibWFyZ2luVG9wIiwiYXBwZW5kQ2hpbGQiLCJyZW1haW5pbmdUaW1lIiwidGV4dENvbnRlbnQiLCJzZXRJbnRlcnZhbCIsInJlbW92ZUNoaWxkIiwicmVtb3ZlQXR0cmlidXRlIiwid2FpdCIsIm1zIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiTU9DS01PREUiLCJkYXRhIiwidGltZV9xdWVzdGlvbl9zdGFydCIsInRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQiLCJ0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0IiwidGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQiLCJ0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQiLCJxdWVzdGlvbl9pIiwicXVlc3Rpb24iLCJpbml0aWFsX3VzZXJfZGVjaXNpb24iLCJmaW5hbF91c2VyX2RlY2lzaW9uIiwiaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UiLCJmaW5hbF91c2VyX2NvbmZpZGVuY2UiLCJiYWxhbmNlIiwidXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCIsInByZXZfdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCIsImJldF92YWxfcmF0aW8iLCJpbnN0cnVjdGlvbl9pIiwiY291bnRfZXhpdGVkX3BhZ2UiLCJ1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsIiwiaW50ZXJ2ZW50aW9uX2RldGFpbHMiLCJ0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhIiwiYXNzZXJ0IiwiY29uZGl0aW9uIiwibmV4dF9pbnN0cnVjdGlvbnMiLCJpbmNyZW1lbnQiLCJza2lwX3RydXN0X3JlcG9ydGluZyIsIiQiLCJhdHRyIiwicmVtb3ZlQXR0ciIsInNob3ciLCJ2YWwiLCJoaWRlIiwibmV4dF9xdWVzdGlvbiIsImNoaWxkcmVuIiwiZWFjaCIsIl8iLCJlbCIsIm1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uIiwib3B0aW9uIiwiRGF0ZSIsIm5vdyIsImdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSIsImNvbmZfbGV2ZWwiLCJhc3luYyIsImNvbnNvbGUiLCJsb2ciLCJkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSIsInVzZXJfY3VycmVudF90cnVzdF9sZXZlbCIsInVzZXJUcnVzdEhldXJpc3RpYyIsIkFJSW50ZXJ2ZW50aW9uVHlwZSIsIkFJSW50ZXJ2ZW50aW9uR29hbCIsIkludGVydmVudGlvblRydXN0VGhyZXNob2xkIiwiQUlJbnRlcnZlbnRpb25TdHJhdGVneSIsImFpX2NvbmZpZGVuY2UiLCJOdW1iZXIiLCJyZXBsYWNlIiwibmV3X2NvbmZpZGVuY2UiLCJNYXRoIiwibWluIiwiSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlIiwibWF4IiwiU3RyaW5nIiwidG9GaXhlZCIsImNvbmZpZGVuY2VfY2hhbmdlIiwiZXhwbGFuYXRpb25fc2hvd24iLCJodG1sIiwiZ2V0RWxlbWVudEJ5SWQiLCJJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkIiwiSW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkIiwiZ2V0X2FpX2Fzc2lzdGFuY2UiLCJtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24iLCJnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlIiwiY29ycmVjdF9vcHRpb24iLCJ1c2VyX2lzX2NvcnJlY3QiLCJhaV9pc19jb3JyZWN0IiwidGV4dCIsInRydXN0X2VmZmVjdCIsInByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsIiwic21vb3RoaW5nUGFyYW0iLCJ1cGRhdGVfdXNlcl90cnVzdF9sZXZlbF9lc3RpbWF0ZSIsInNob3dfcmVzdWx0IiwibGVuZ3RoIiwicmF0aW8xIiwicmF0aW8yIiwib24iLCJsb2dnZWRfZGF0YSIsImdsb2JhbFRoaXMiLCJ1cmxfZGF0YSIsInVpZCIsImFqYXgiLCJKU09OIiwic3RyaW5naWZ5IiwicHJvamVjdCIsInBheWxvYWQiLCJ0eXBlIiwiY29udGVudFR5cGUiLCJlIiwibG9nX2RhdGEiLCJ0aGlzIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJzdGFydE92ZXJyaWRlIiwiVUlERnJvbVVSTCIsImVudHJpZXMiLCJyZXN1bHQiLCJ2YWx1ZSIsInBhcmFtc1RvT2JqZWN0IiwicXVldWVfaWQiLCJmbG9vciIsInJhbmRvbSIsInBhZFN0YXJ0IiwiVUlEX21heWJlIiwicHJvbXB0IiwiaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzIiwiaW5jbHVkZXMiLCJFcnJvciIsIkludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCIsInN0YXJ0c1dpdGgiLCJnZXRKU09OIiwibG9hZF9kYXRhIiwiY2F0Y2giLCJfZXJyb3IiLCJyZWxvYWQiLCJ0aGVuIiwibmV3X2RhdGEiLCJwYXJzZUludCIsImFsZXJ0X2FjdGl2ZSIsIm9udmlzaWJpbGl0eWNoYW5nZSIsImFsZXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==