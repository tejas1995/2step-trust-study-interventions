(()=>{"use strict";var t={d:(n,i)=>{for(var e in i)t.o(i,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:i[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)};t.d({},{o:()=>l});let n="https://tejassrinivasan.pythonanywhere.com/";async function i(t){if(l)console.log("logged (mock)",t);else{t.url_data=globalThis.url_data,console.log("Data"),"study_id"in t.url_data||(t.url_data.study_id="trialrun_studies"),t.url_data.queue_id=globalThis.uid,console.log("logged",t),console.log("Logging to",n+"log");try{return await $.ajax(n+"log",{data:JSON.stringify({project:"2step-trust-study-interventions/"+t.url_data.study_id,uid:globalThis.uid.replace("/","_")+"_"+t.url_data.prolific_id,payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"})}catch(t){console.log(t)}}}let e=null;function o(t,n,i,o,a,l=!0){e&&(clearInterval(e),e=null),i.forEach((t=>t.setAttribute("disabled","true")));let r=document.createElement("div");r.id=`timer_${n.id}`,r.style.fontWeight="bold",r.style.marginTop="10px",n.appendChild(r);let _=t;r.textContent=l?a+` You can make your selection in ${_} second(s).`:a,e=setInterval((()=>{_--,_>=0?r.textContent=l?a+` You can make your selection in ${_} second(s).`:a:(null!==e&&(clearInterval(e),e=null),e=null,n.removeChild(r),i.forEach((t=>t.removeAttribute("disabled"))),o&&o())}),1e3)}const a=t=>new Promise((n=>setTimeout(n,t)));var l=!1;var r=[];let _,s,c,d,u,p=-1,v=null,f=-1,g=-1,b=-1,m=-1,h=0,y=5,x=-1,A=1,w=0,I=0,k=0;var T={},E={};let B,S=-1,N=-1;function O(t,n){if(!t)throw n||"Assertion failed"}function P(t){w+=t,Z&&5==w&&(w+=t),0==w?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),w>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==w&&($("#main_box_instructions").hide(),$("#pre_study_survey").show()),8==w&&($("#pre_study_survey").hide(),$("#main_box_experiment").show(),L()),$("#main_box_instructions").children(":not(input)").each(((t,n)=>{$(n).hide()})),$(`#instructions_${w}`).show()}function C(t){d=Date.now(),f=t,O(1==t||2==t,"Invalid option!"),1==t?($("#button_initial_decision_option1").attr("activedecision","true"),$("#button_initial_decision_option2").removeAttr("activedecision")):($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").attr("activedecision","true")),$("#initial_user_confidence_div").show(),$("#button_initial_decision_option1").attr("disabled","true"),$("#button_initial_decision_option2").attr("disabled","true"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled")}async function D(t){s=Date.now(),b=t,O(1==t||2==t||3==t,"Invalid option!"),1==t?($("#button_initial_confidence_option1").attr("activedecision","true"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision")):2==t?($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").attr("activedecision","true"),$("#button_initial_confidence_option3").removeAttr("activedecision")):($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").attr("activedecision","true")),$("#button_initial_confidence_option1").attr("disabled","true"),$("#button_initial_confidence_option2").attr("disabled","true"),$("#button_initial_confidence_option3").attr("disabled","true"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),async function(){console.log("Getting AI assistance..."),1==tt&&($("#ai_prediction_span").html("The AI is thinking..."),$("#ai_confidence_span").html(""),await async function(){console.log("Preparing LLM assistance...");let t={question:v.question,option1:v.option1,option2:v.option2,correct_option:v.correct_option};try{B=await $.ajax("https://tejassrinivasan.pythonanywhere.com/get_llm_prediction",{data:JSON.stringify({project:"2step-trust-study",model_name:"user_acceptance_model-logisticregression-0.9347testf1",payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"})}catch(t){console.log("ERROR!"),console.log(t)}return v.ai_prediction=B.llm_predicted_option,v.ai_confidence=B.llm_confidence,v.llm_answer=B.llm_answer,v.ai_explanation=B.llm_explanation,v.ai_contrastive_explanation=B.llm_counterexplanation,v.ai_is_correct=B.llm_is_correct,v.llm_input=B.llm_input,v.llm_output=B.llm_output,console.log("LLM prediction result: ",B),B}());let t=v.ai_confidence,n=k;if("user_reported"==V&&(n=(y-5)/2.5,console.log("Using user reported trust value: ",y)),T={intervention_applied:!1,trust_level_at_start_of_interaction:n},"none"==U||f==v.ai_prediction)console.log("Not applying any intervention."),t=v.ai_confidence;else if("confidence_manip"==U)if("none"==R||"mitigate_undertrust"==R&&n<H||"mitigate_overtrust"==R&&n>H){if(console.log("Applying AI confidence manipulation intervention."),"fixed"==F){let n=Number(v.ai_confidence.replace("%",""))/100,i=Math.min(1,n+z);i=Math.max(.5,i),t=String((100*i).toFixed(0))+"%";let e=(i-n).toFixed(2);console.log("Actual AI confidence: ",v.ai_confidence,", Confidence shown to user: ",t),T.conf_actual=v.ai_confidence,T.conf_displayed=t,T.conf_change=e,T.intervention_applied=!0}}else console.log("Conditions for applying 'confidence manipulation' intervention not satisfied.");else if("ai_explanation"==U)if("none"==R||"mitigate_undertrust"==R&&n<H||"mitigate_overtrust"==R&&n>H){if(console.log("Applying AI explanation intervention."),"fixed"==F){console.log("Showing explanation");let t=v.ai_explanation?v.ai_explanation:"No explanation provided";$("#ai_explanation_span").html(t),$("#ai_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,o(15,document.getElementById("ai_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else console.log("Conditions for applying 'AI explanation' intervention not satisfied.");else if("ai_contrastive_explanation"==U)if("none"==R||"mitigate_undertrust"==R&&n<H||"mitigate_overtrust"==R&&n>H){if(console.log("Applying AI explanation intervention."),"fixed"==F){console.log("Showing explanation");let t=v.ai_contrastive_explanation?v.ai_contrastive_explanation:"No explanation provided";$("#ai_contrastive_explanation_span").html(t),$("#ai_contrastive_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,o(10,document.getElementById("ai_contrastive_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else console.log("Conditions for applying 'AI explanation' intervention not satisfied.");else if("both_explanation_types"==U){if(O("mitigate_underandovertrust"==R,"Goal for 'both explanation types' intervention should be 'mitigate_underandovertrust'"),n<K){console.log("Applying explanation intervention for undertrust"),console.log("Showing explanation");let t=v.ai_explanation?v.ai_explanation:"No explanation provided";$("#ai_explanation_span").html(t),$("#ai_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,o(15,document.getElementById("ai_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}else if(n>Q){console.log("Applying contrastive explanation intervention for overtrust");let t=v.ai_contrastive_explanation?v.ai_contrastive_explanation:"No explanation provided";$("#ai_contrastive_explanation_span").html(t),$("#ai_contrastive_explanation_div").show(),T.explanation_shown=t,T.intervention_applied=!0,o(10,document.getElementById("ai_contrastive_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else"ai_thinking"==U?("none"==R||"mitigate_undertrust"==R&&n<H||"mitigate_overtrust"==R&&n>H)&&(console.log("Applying AI thinking intervention."),"fixed"==F&&(console.log("Showing AI thinking"),T.intervention_applied=!0,$("#ai_thinking_div").show(),await a(1e4),$("#ai_thinking_div").hide())):"ai_forced_pause"==U?("none"==R||"mitigate_undertrust"==R&&n<H||"mitigate_overtrust"==R&&n>H)&&(console.log("Applying AI forced pause intervention."),"fixed"==F)&&(console.log("Showing AI forced pause"),T.intervention_applied=!0,o(10,document.getElementById("ai_assistance_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please take some time to carefully consider the AI's suggestion.")):"both_pause_types"==U&&(O("mitigate_underandovertrust"==R,"Goal for 'both pause types' intervention should be 'mitigate_underandovertrust'"),n<K?(console.log("Applying AI thinking intervention for undertrust"),console.log("Showing AI thinking"),T.intervention_applied=!0,$("#ai_thinking_div").show(),await a(1e4),$("#ai_thinking_div").hide()):n>Q&&(console.log("Applying AI forced pause intervention for overtrust"),console.log("Showing AI forced pause"),T.intervention_applied=!0,o(10,document.getElementById("ai_assistance_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please take some time to carefully consider the AI's suggestion.")));console.log("AI Assistance Intervention Details: ",T),$("#ai_prediction_span").html("Option "+v.ai_prediction),$("#ai_confidence_span").html(t),$("#ai_assistance_div").show(),$("#final_user_decision_div").show()}()}function j(t){u=Date.now(),g=t,O(1==t||2==t,"Invalid option!"),1==t?($("#button_final_decision_option1").attr("activedecision","true"),$("#button_final_decision_option2").removeAttr("activedecision")):($("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").attr("activedecision","true")),$("#final_user_confidence_div").show(),$("#button_final_decision_option1").attr("disabled","true"),$("#button_final_decision_option2").attr("disabled","true"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled")}function q(t){c=Date.now(),m=t,O(1==t||2==t||3==t,"Invalid option!"),1==t?($("#button_final_confidence_option1").attr("activedecision","true"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision")):2==t?($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").attr("activedecision","true"),$("#button_final_confidence_option3").removeAttr("activedecision")):($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").attr("activedecision","true")),$("#button_final_confidence_option1").attr("disabled","true"),$("#button_final_confidence_option2").attr("disabled","true"),$("#button_final_confidence_option3").attr("disabled","true"),async function(){let t=v.correct_option,n=t==g,i=v.ai_is_correct,e="Correct answer: <b>Option "+t+"</b>.<br>";e+=n?"You picked Option "+g+", which was <span class='color_correct'><b>correct</b></span>.<br>":"You picked Option "+g+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",e+=i?"The AI picked Option "+v.ai_prediction+", which was <span class='color_correct'><b>correct<b></span>.<br>":"The AI picked Option "+v.ai_prediction+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",n?(e+="<span class='color_correct'><b>You receive a reward of $0.10.</b></span>",h+=.1):e+="<span class='color_incorrect'><b>You do not receive any reward.</b></span>",e+="<br>",$("#balance").text(`Balance: $${h.toFixed(2)} + $1.0`),$("#result_span").html(e),$("#result_span").show(),Z?$("#button_next").show():$("#user_trust_report_div").show(),function(){if("smoothed_confweighted_trust"==V){let t=Number(v.ai_confidence.replace("%",""))/100,n=v.ai_prediction==v.correct_option?t:-t,i=k;k=X*n+(1-X)*k,E={prev_estimated_trust_level:i,trust_effect:n,new_estimated_trust_level:k},console.log("Old estimated trust level: "+i+", trust effect: "+n+", new estimated trust level: "+k)}}()}()}function L(){if($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").removeAttr("activedecision"),$("#button_initial_decision_option1").removeAttr("disabled"),$("#button_initial_decision_option2").removeAttr("disabled"),$("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled"),$("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").removeAttr("activedecision"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),$("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled"),$("#ai_assistance_div").hide(),$("#ai_explanation_div").hide(),$("#ai_contrastive_explanation_div").hide(),$("#ai_thinking_div").hide(),$("#initial_user_confidence_div").hide(),$("#final_user_decision_div").hide(),$("#final_user_confidence_div").hide(),$("#range_val").removeAttr("disabled"),$("#user_trust_report_div").hide(),$("#button_place_bet").hide(),$("#button_next").hide(),$("#result_span").hide(),-1==p?$("#range_text").text("-"):$("#range_text").text(`Before this interaction, your trust in the AI: ${10*y} / 100.`),$("#range_val").val(y),x=y,p+=1,p>=r.length)return $("#main_box_experiment").hide(),void(l?$("#main_box_end_mock").show():$("#main_box_end").show());if(v=r[p],$("#question_span").html(v.question),$("#option1_span").html(v.option1),$("#option2_span").html(v.option2),v.hasOwnProperty("reward_ratio")){let[t,n]=v.reward_ratio;t=Number(t),n=Number(n),A=t/n}else A=1;_=Date.now(),$("#progress").text(`Progress: ${p+1} / ${r.length}`),o(10,document.getElementById("initial_user_decision_div"),[document.getElementById("button_initial_decision_option1"),document.getElementById("button_initial_decision_option2")],null,"Please read the question and options closely.")}$("#button_instructions_next").on("click",(()=>P(1))),$("#button_instructions_prev").on("click",(()=>P(-1))),$("#button_start_study").on("click",(()=>{-1==S||-1==N?$("#error_message_survey").show():(i({type:"pre_study_survey",pre_survey_answer1:S,pre_survey_answer2:N}),P(1))})),$("#ai_familiarity_1").on("click",(()=>S=1)),$("#ai_familiarity_2").on("click",(()=>S=2)),$("#ai_familiarity_3").on("click",(()=>S=3)),$("#ai_familiarity_4").on("click",(()=>S=4)),$("#ai_usage_1").on("click",(()=>N=1)),$("#ai_usage_2").on("click",(()=>N=2)),$("#ai_usage_3").on("click",(()=>N=3)),$("#button_next").on("click",(()=>{if(-1!=p){let t={question_i:p,user_balance_post_interaction:h,user_trust_val_before:x,user_trust_val_after:y,initial_user_decision:f,final_user_decision:g,initial_user_confidence:b,final_user_confidence:m};t.times={initial_decision:d-_,initial_confidence:s-d,final_decision:u-s,final_confidence:c-u,trust_decision:Date.now()-c},t.question=v,t.count_exited_page=I,t.intervention_details=T,t.trust_effect_prediction_data=E,i(t),I=0}L()})),$("#range_val").on("input change",(function(){y=$(this).val(),$("#range_text").text(`After this interaction, your current trust in the AI: ${10*y} / 100.`),$("#button_next").show()})),$("#button_initial_decision_option1").on("click",(()=>C(1))),$("#button_initial_decision_option2").on("click",(()=>C(2))),$("#button_initial_confidence_option1").on("click",(async()=>await D(1))),$("#button_initial_confidence_option2").on("click",(async()=>await D(2))),$("#button_initial_confidence_option3").on("click",(async()=>await D(3))),$("#button_final_decision_option1").on("click",(()=>j(1))),$("#button_final_decision_option2").on("click",(()=>j(2))),$("#button_final_confidence_option1").on("click",(()=>q(1))),$("#button_final_confidence_option2").on("click",(()=>q(2))),$("#button_final_confidence_option3").on("click",(()=>q(3)));const M=new URLSearchParams(window.location.search),Y=M.get("start"),G=M.get("uid");if(globalThis.url_data=function(t){const n={};for(const[i,e]of t)n[i]=e;return n}(M.entries()),null!=G){if(globalThis.uid=G,"prolific_random"==globalThis.uid){let t=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${M.get("prolific_queue_name")}/${t}`}}else{let t=null;for(;null==t;)t=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=t}let J=null;globalThis.uid.includes("343")||globalThis.uid.includes("434")?J=[7,8,9,17,18,19,27,28,29]:globalThis.uid.includes("735")&&(J=[10,11,12,13,14,25,26,27,28,29]);let R=M.get("intervention_goal");if(null==R&&(R="none"),!["none","mitigate_undertrust","mitigate_overtrust","mitigate_underandovertrust"].includes(R))throw new Error("Invalid AI Assistance Intervention Goal: "+R);let U=M.get("intervention_type");if(null==U&&(U="none"),!["none","dummy","confidence_manip","ai_explanation","ai_contrastive_explanation","both_explanation_types","ai_thinking","ai_forced_pause","both_pause_types"].includes(U))throw new Error("Invalid AI Assistance Intervention: "+U);let F=M.get("intervention_strategy");if(null==F&&(F="dummy"),!["dummy","fixed","adaptive"].includes(F))throw new Error("Invalid AI Assistance Intervention Strategy: "+F);let W=Number(M.get("intervention_threshold"));null==W&&(W=-1);let H=Number(M.get("intervention_trust_threshold"));null==H&&(H=0);let z=Number(M.get("intervention_fixedconfchange"));null==z&&(z=0);let K=Number(M.get("intervention_undertrust_threshold"));null==K&&(K=H);let Q=Number(M.get("intervention_overtrust_threshold"));null==Q&&(Q=H);let V=M.get("user_trust_heuristic");null==V&&(V="user_reported");let X=Number(M.get("smoothing_param"));null==X&&(X=1);let Z="true"==M.get("skip_trust_reporting");null==Z&&(Z=!1);let tt="true"==M.get("use_llm_assistant");null==tt&&(tt=!1),console.log("AIInterventionGoal: ",R),console.log("AIInterventionType: ",U),console.log("AIInterventionStrategy: ",F),console.log("InterventionALDiffThreshold: ",W),console.log("InterventionTrustThreshold: ",H),console.log("InterventionUndertrustThreshold: ",K),console.log("InterventionOvertrustThreshold: ",Q),console.log("InterventionFixedConfChange: ",z),console.log("userTrustHeuristic: ",V),console.log("skip_trust_reporting: ",Z),console.log("useLLMAssistant: ",tt),"mitigate_undertrust"==R?(O(H<=0,"Trust threshold for mitigating undertrust cannot be positive."),O(z>=0,"Confidence change for mitigating undertrust cannot be negative.")):"mitigate_overtrust"==R&&(O(H>=0,"Trust threshold for mitigating overtrust cannot be negative."),O(z<=0,"Confidence change for mitigating overtrust cannot be positive.")),globalThis.url_data.intervention_goal=R,globalThis.url_data.intervention_type=U,globalThis.url_data.intervention_strategy=F,globalThis.url_data.intervention_threshold=W,globalThis.url_data.intervention_fixedconfchange=z,globalThis.url_data.user_trust_heuristic=V,globalThis.url_data.skip_trust_reporting=Z,globalThis.url_data.smoothing_param=X,globalThis.url_data.use_llm_assistant=tt,globalThis.uid.startsWith("demo_paper")&&(l=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((t=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((t=>{r=t,null!=Y&&(p=parseInt(Y)-1,console.log("Starting from",p)),P(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let nt=!1;document.onvisibilitychange=()=>{nt||(I+=1,nt=!0,globalThis.uid.startsWith("demo")||alert("Please don't leave the page. If you do so again, we may restrict paying you."),nt=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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V0FBV0UsS0FDdkJvSSxPQUFPQyxTQUFTdUIsUUFBUSxJQUUxQkMsTUFBTUMsSUFDSnBLLEVBQU9vSyxFQUNjLE1BQWpCdkIsSUFDQXpGLEVBQWFpSCxTQUFTeEIsR0FBaUIsRUFDdkMzSSxRQUFRQyxJQUFJLGdCQUFpQmlELElBR2pDb0IsRUFBa0IsR0FDbEJqRSxFQUFFLDBCQUEwQnNFLE9BQzVCdEUsRUFBRSxpQ0FBaUN3RSxNQUFNLElBRzdDN0UsUUFBUUMsSUFBSSw2QkFBOEJDLFdBQVdFLEtBRXJELElBQUlnSyxJQUFlLEVBQ25CeEksU0FBU3lJLG1CQUFxQixLQUNyQkQsS0FDRHZHLEdBQXFCLEVBQ3JCdUcsSUFBZSxFQUNUbEssV0FBV0UsSUFBS3VKLFdBQVcsU0FDN0JXLE1BQU0sZ0ZBRVZGLElBQWUsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLy8uL3NyYy9jb25uZWN0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gJy4vZ2xvYmFscydcbmltcG9ydCB7IE1PQ0tNT0RFIH0gZnJvbSAnLi9tYWluJ1xuXG5sZXQgU0VSVkVSX0xPR19ST09UID0gREVWTU9ERSA/IFwiaHR0cDovLzEyNy4wLjAuMTo1MDAwL1wiIDogXCJodHRwczovL3RlamFzc3Jpbml2YXNhbi5weXRob25hbnl3aGVyZS5jb20vXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRfZGF0YSgpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIGluY2x1ZGUgdGltZXN0YW1wIHNvIHRoYXQgdGhpbmdzIGRvbid0IGdldCBjYWNoZWRcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgJC5nZXRKU09OKFxuICAgICAgICBgYmFrZWRfcXVldWVzLyR7Z2xvYmFsVGhpcy51aWR9Lmpzb24/dD0ke0RhdGUubm93KCl9YCxcbiAgICApXG4gICAgcmV0dXJuIHJlc3VsdFxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ19kYXRhKGRhdGEpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmIChNT0NLTU9ERSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImxvZ2dlZCAobW9jaylcIiwgZGF0YSlcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZGF0YVtcInVybF9kYXRhXCJdID0gZ2xvYmFsVGhpcy51cmxfZGF0YVxuICAgIGNvbnNvbGUubG9nKFwiRGF0YVwiKVxuICAgIGlmICghKFwic3R1ZHlfaWRcIiBpbiBkYXRhWyd1cmxfZGF0YSddKSkge1xuICAgICAgICBkYXRhWyd1cmxfZGF0YSddW1wic3R1ZHlfaWRcIl0gPSBcInRyaWFscnVuX3N0dWRpZXNcIlxuICAgIH1cbiAgICBkYXRhW1widXJsX2RhdGFcIl1bXCJxdWV1ZV9pZFwiXSA9IGdsb2JhbFRoaXMudWlkXG4gICAgY29uc29sZS5sb2coXCJsb2dnZWRcIiwgZGF0YSlcbiAgICBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgdG9cIiwgU0VSVkVSX0xPR19ST09UICsgXCJsb2dcIilcblxuICAgIHRyeSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBTRVJWRVJfTE9HX1JPT1QgKyBcImxvZ1wiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCIyc3RlcC10cnVzdC1zdHVkeS1pbnRlcnZlbnRpb25zL1wiICsgZGF0YVsndXJsX2RhdGEnXVsnc3R1ZHlfaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgdWlkOiBnbG9iYWxUaGlzLnVpZC5yZXBsYWNlKFwiL1wiLCBcIl9cIikgKyBcIl9cIiArIGRhdGFbJ3VybF9kYXRhJ11bJ3Byb2xpZmljX2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxufSIsImltcG9ydCB7IEVOQUJMRV9USU1FUiB9IGZyb20gJy4vZ2xvYmFscyc7XG5cbmZ1bmN0aW9uIHBhcmFtc1RvT2JqZWN0KGVudHJpZXMpIHtcbiAgY29uc3QgcmVzdWx0ID0ge31cbiAgLy8gZWFjaCAnZW50cnknIGlzIGEgW2tleSwgdmFsdWVdIHR1cHBsZVxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBlbnRyaWVzKSB7XG4gICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5sZXQgYWN0aXZlVGltZXI6IFJldHVyblR5cGU8dHlwZW9mIHNldEludGVydmFsPiB8IG51bGwgPSBudWxsOyAvLyBUaW1lciBpbnRlcnZhbFxuXG5mdW5jdGlvbiBzdGFydFRpbWVyKGR1cmF0aW9uLCBzdGVwRGl2LCBidXR0b25zLCBjYWxsYmFjaywgbWVzc2FnZSwgc2hvd1RpbWVSZW1haW5pbmcgPSB0cnVlKSB7XG4gIGlmICghRU5BQkxFX1RJTUVSKSB7XG4gICAgICAvLyBJZiB0aGUgdGltZXIgaXMgZGlzYWJsZWQsIGVuYWJsZSB0aGUgYnV0dG9ucyBpbW1lZGlhdGVseVxuICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpO1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuICAgICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVyIHRvIHByZXZlbnQgbXVsdGlwbGUgaW50ZXJ2YWxzXG4gIGlmIChhY3RpdmVUaW1lcikge1xuICAgICAgY2xlYXJJbnRlcnZhbChhY3RpdmVUaW1lcik7XG4gICAgICBhY3RpdmVUaW1lciA9IG51bGw7XG4gIH1cblxuICAvLyBEaXNhYmxlIGJ1dHRvbnNcbiAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpKTtcbiAgXG4gIC8vIFNob3cgdGltZXIgdmlzdWFsbHlcbiAgbGV0IHRpbWVyRGlzcGxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0aW1lckRpc3BsYXkuaWQgPSBgdGltZXJfJHtzdGVwRGl2LmlkfWA7XG4gIHRpbWVyRGlzcGxheS5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICB0aW1lckRpc3BsYXkuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuICBzdGVwRGl2LmFwcGVuZENoaWxkKHRpbWVyRGlzcGxheSk7XG5cbiAgbGV0IHJlbWFpbmluZ1RpbWUgPSBkdXJhdGlvbjtcblxuICAvLyBJbml0aWFsIGRpc3BsYXlcbiAgaWYgKHNob3dUaW1lUmVtYWluaW5nKXtcbiAgICB0aW1lckRpc3BsYXkudGV4dENvbnRlbnQgPSBtZXNzYWdlICsgYCBZb3UgY2FuIG1ha2UgeW91ciBzZWxlY3Rpb24gaW4gJHtyZW1haW5pbmdUaW1lfSBzZWNvbmQocykuYDtcbiAgfSBlbHNlIHtcbiAgICB0aW1lckRpc3BsYXkudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICB9XG5cbiAgYWN0aXZlVGltZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICByZW1haW5pbmdUaW1lLS07XG4gICAgICBpZiAocmVtYWluaW5nVGltZSA+PSAwKSB7XG4gICAgICAgICAgaWYgKHNob3dUaW1lUmVtYWluaW5nKSB7XG4gICAgICAgICAgICB0aW1lckRpc3BsYXkudGV4dENvbnRlbnQgPSBtZXNzYWdlICsgYCBZb3UgY2FuIG1ha2UgeW91ciBzZWxlY3Rpb24gaW4gJHtyZW1haW5pbmdUaW1lfSBzZWNvbmQocykuYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGltZXJEaXNwbGF5LnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBpZiAoYWN0aXZlVGltZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChhY3RpdmVUaW1lcik7IC8vIFN0b3AgdGhlIHRpbWVyXG4gICAgICAgICAgICAgIGFjdGl2ZVRpbWVyID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWN0aXZlVGltZXIgPSBudWxsO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIHRpbWVyIGRpc3BsYXlcbiAgICAgICAgICBzdGVwRGl2LnJlbW92ZUNoaWxkKHRpbWVyRGlzcGxheSk7XG5cbiAgICAgICAgICAvLyBFbmFibGUgYnV0dG9uc1xuICAgICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpKTtcblxuICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgfSwgMTAwMCk7XG59XG5cbmNvbnN0IHdhaXQgPSAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4gPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG59O1xuXG5leHBvcnQgeyBwYXJhbXNUb09iamVjdCwgc3RhcnRUaW1lciwgd2FpdCB9OyIsImltcG9ydCB7IERFVk1PREUgfSBmcm9tIFwiLi9nbG9iYWxzXCJcbmV4cG9ydCB2YXIgVUlEOiBzdHJpbmdcbmV4cG9ydCB2YXIgTU9DS01PREU6IGJvb2xlYW4gPSBmYWxzZVxuaW1wb3J0IHsgbG9hZF9kYXRhLCBsb2dfZGF0YSB9IGZyb20gJy4vY29ubmVjdG9yJ1xuaW1wb3J0IHsgcGFyYW1zVG9PYmplY3QsIHN0YXJ0VGltZXIsIHdhaXQgfSBmcm9tIFwiLi91dGlsc1wiXG5pbXBvcnQgeyBwYXJzZUpTT04gfSBmcm9tIFwianF1ZXJ5XCJcbi8vaW1wb3J0IHsgZ2V0X3VzZXJfdHJ1c3RfZWZmZWN0LCBnZXRfYWRqdXN0ZWRfYWlfY29uZmlkZW5jZX0gZnJvbSBcIi4vcnVuX3VzZXJfbW9kZWxzXCJcblxubGV0IFVTRVJfTU9ERUxTX1JPT1QgPSBcImh0dHBzOi8vdGVqYXNzcmluaXZhc2FuLnB5dGhvbmFueXdoZXJlLmNvbS9cIlxubGV0IHVzZXJfZGVjaXNpb25fbW9kZWwgPSBcInVzZXJfYWNjZXB0YW5jZV9tb2RlbC1sb2dpc3RpY3JlZ3Jlc3Npb24tMC45MzQ3dGVzdGYxXCJcbmxldCB0cnVzdF9lZmZlY3RfbW9kZWwgPSBcInRydXN0X2VmZmVjdF9tb2RlbC1zdm1fbGluZWFyLTAuNDY0NHRlc3RtYWUtMC45MDk1dGVzdHRlZGFcIlxuXG52YXIgZGF0YTogYW55W10gPSBbXVxubGV0IHF1ZXN0aW9uX2kgPSAtMVxubGV0IHF1ZXN0aW9uOiBhbnkgPSBudWxsXG5sZXQgaW5pdGlhbF91c2VyX2RlY2lzaW9uOiBudW1iZXIgPSAtMVxubGV0IGZpbmFsX3VzZXJfZGVjaXNpb246IG51bWJlciA9IC0xXG5sZXQgaW5pdGlhbF91c2VyX2NvbmZpZGVuY2U6IG51bWJlciA9IC0xXG5sZXQgZmluYWxfdXNlcl9jb25maWRlbmNlOiBudW1iZXIgPSAtMVxubGV0IGJhbGFuY2UgPSAwXG5cbmxldCB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsOiBudW1iZXIgPSA1XG5sZXQgcHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsOiBudW1iZXIgPSAtMVxuXG5sZXQgYmV0X3ZhbF9yYXRpbzogbnVtYmVyID0gMVxubGV0IHRpbWVfcXVlc3Rpb25fc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0OiBudW1iZXJcbmxldCB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQ6IG51bWJlclxubGV0IGluc3RydWN0aW9uX2k6IG51bWJlciA9IDBcbmxldCBjb3VudF9leGl0ZWRfcGFnZTogbnVtYmVyID0gMFxuXG5sZXQgaW50ZXJ2ZW50aW9uX2NvbmRpdGlvbl9zYXRpc2ZpZWQ6IGJvb2xlYW4gPSBmYWxzZVxubGV0IGludGVydmVudGlvbl9hcHBsaWVkOiBib29sZWFuID0gZmFsc2VcblxubGV0IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWw6IG51bWJlciA9IDBcblxudmFyIGFsbF91c2VyX2ludGVyYWN0aW9ucyA9IFtdXG52YXIgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7fVxudmFyIHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEgPSB7fVxubGV0IGZpbmRuZXdjb25mX3Jlc3VsdDogYW55XG5sZXQgbGxtX3ByZWRpY3Rpb25fcmVzdWx0OiBhbnlcblxubGV0IHByZV9zdXJ2ZXlfYW5zd2VyMSA9IC0xXG5sZXQgcHJlX3N1cnZleV9hbnN3ZXIyID0gLTFcblxuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICAgIHRocm93IG1lc3NhZ2UgfHwgXCJBc3NlcnRpb24gZmFpbGVkXCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBuZXh0X2luc3RydWN0aW9ucyhpbmNyZW1lbnQ6IG51bWJlcikge1xuICAgIGluc3RydWN0aW9uX2kgKz0gaW5jcmVtZW50XG4gICAgaWYgKHNraXBfdHJ1c3RfcmVwb3J0aW5nICYmIGluc3RydWN0aW9uX2kgPT0gNSkge1xuICAgICAgICBpbnN0cnVjdGlvbl9pICs9IGluY3JlbWVudFxuICAgIH1cblxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDApIHtcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA+PSA2KSB7XG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5zaG93KClcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikudmFsKFwiU3RhcnQgc3R1ZHlcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLnZhbChcIk5leHRcIilcbiAgICB9XG4gICAgaWYgKGluc3RydWN0aW9uX2kgPT0gNykge1xuICAgICAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNwcmVfc3R1ZHlfc3VydmV5XCIpLnNob3coKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA9PSA4KSB7XG4gICAgICAgICQoXCIjcHJlX3N0dWR5X3N1cnZleVwiKS5oaWRlKClcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLnNob3coKVxuICAgICAgICBuZXh0X3F1ZXN0aW9uKClcbiAgICB9XG5cbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5jaGlsZHJlbihcIjpub3QoaW5wdXQpXCIpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgICQoZWwpLmhpZGUoKVxuICAgIH0pXG4gICAgJChgI2luc3RydWN0aW9uc18ke2luc3RydWN0aW9uX2l9YCkuc2hvdygpXG59XG4kKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IG5leHRfaW5zdHJ1Y3Rpb25zKCsxKSlcbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoLTEpKVxuJChcIiNidXR0b25fc3RhcnRfc3R1ZHlcIikub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaWYgKHByZV9zdXJ2ZXlfYW5zd2VyMSA9PSAtMSB8fCBwcmVfc3VydmV5X2Fuc3dlcjIgPT0gLTEpIHtcbiAgICAgICAgJChcIiNlcnJvcl9tZXNzYWdlX3N1cnZleVwiKS5zaG93KClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBsb2dnaW5nX2RhdGEgPSB7XG4gICAgICAgICAgICBcInR5cGVcIjogXCJwcmVfc3R1ZHlfc3VydmV5XCIsXG4gICAgICAgICAgICBcInByZV9zdXJ2ZXlfYW5zd2VyMVwiOiBwcmVfc3VydmV5X2Fuc3dlcjEsXG4gICAgICAgICAgICBcInByZV9zdXJ2ZXlfYW5zd2VyMlwiOiBwcmVfc3VydmV5X2Fuc3dlcjJcbiAgICAgICAgfVxuICAgICAgICBsb2dfZGF0YShsb2dnaW5nX2RhdGEpXG4gICAgICAgIG5leHRfaW5zdHJ1Y3Rpb25zKCsxKVxuICAgIH1cbn0pXG5cbiQoXCIjYWlfZmFtaWxpYXJpdHlfMVwiKS5vbihcImNsaWNrXCIsICgpID0+IHByZV9zdXJ2ZXlfYW5zd2VyMSA9IDEpXG4kKFwiI2FpX2ZhbWlsaWFyaXR5XzJcIikub24oXCJjbGlja1wiLCAoKSA9PiBwcmVfc3VydmV5X2Fuc3dlcjEgPSAyKVxuJChcIiNhaV9mYW1pbGlhcml0eV8zXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gcHJlX3N1cnZleV9hbnN3ZXIxID0gMylcbiQoXCIjYWlfZmFtaWxpYXJpdHlfNFwiKS5vbihcImNsaWNrXCIsICgpID0+IHByZV9zdXJ2ZXlfYW5zd2VyMSA9IDQpXG4kKFwiI2FpX3VzYWdlXzFcIikub24oXCJjbGlja1wiLCAoKSA9PiBwcmVfc3VydmV5X2Fuc3dlcjIgPSAxKVxuJChcIiNhaV91c2FnZV8yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gcHJlX3N1cnZleV9hbnN3ZXIyID0gMilcbiQoXCIjYWlfdXNhZ2VfM1wiKS5vbihcImNsaWNrXCIsICgpID0+IHByZV9zdXJ2ZXlfYW5zd2VyMiA9IDMpXG5cbiQoXCIjYnV0dG9uX25leHRcIikub24oXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaWYgKHF1ZXN0aW9uX2kgIT0gLTEpIHtcbiAgICAgICAgbGV0IGxvZ2dlZF9kYXRhID0ge1xuICAgICAgICAgICAgXCJxdWVzdGlvbl9pXCI6IHF1ZXN0aW9uX2ksXG4gICAgICAgICAgICBcInVzZXJfYmFsYW5jZV9wb3N0X2ludGVyYWN0aW9uXCI6IGJhbGFuY2UsXG4gICAgICAgICAgICBcInVzZXJfdHJ1c3RfdmFsX2JlZm9yZVwiOiBwcmV2X3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgICAgICBcInVzZXJfdHJ1c3RfdmFsX2FmdGVyXCI6IHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgICAgICBcImluaXRpYWxfdXNlcl9kZWNpc2lvblwiOiBpbml0aWFsX3VzZXJfZGVjaXNpb24sXG4gICAgICAgICAgICBcImZpbmFsX3VzZXJfZGVjaXNpb25cIjogZmluYWxfdXNlcl9kZWNpc2lvbixcbiAgICAgICAgICAgIFwiaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcIjogaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UsXG4gICAgICAgICAgICBcImZpbmFsX3VzZXJfY29uZmlkZW5jZVwiOiBmaW5hbF91c2VyX2NvbmZpZGVuY2UsXG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZWRfZGF0YVsndGltZXMnXSA9IHtcbiAgICAgICAgICAgIFwiaW5pdGlhbF9kZWNpc2lvblwiOiB0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCAtIHRpbWVfcXVlc3Rpb25fc3RhcnQsXG4gICAgICAgICAgICBcImluaXRpYWxfY29uZmlkZW5jZVwiOiB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0IC0gdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQsXG4gICAgICAgICAgICBcImZpbmFsX2RlY2lzaW9uXCI6IHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCAtIHRpbWVfZmluYWxfZGVjaXNpb25fc3RhcnQsXG4gICAgICAgICAgICBcImZpbmFsX2NvbmZpZGVuY2VcIjogdGltZV90cnVzdF9kZWNpc2lvbl9zdGFydCAtIHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCxcbiAgICAgICAgICAgIFwidHJ1c3RfZGVjaXNpb25cIjogRGF0ZS5ub3coKSAtIHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQsXG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3F1ZXN0aW9uJ10gPSBxdWVzdGlvblxuICAgICAgICBsb2dnZWRfZGF0YVsnY291bnRfZXhpdGVkX3BhZ2UnXSA9IGNvdW50X2V4aXRlZF9wYWdlXG4gICAgICAgIGxvZ2dlZF9kYXRhWydpbnRlcnZlbnRpb25fZGV0YWlscyddID0gaW50ZXJ2ZW50aW9uX2RldGFpbHNcbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3RydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEnXSA9IHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGFcbiAgICAgICAgbG9nX2RhdGEobG9nZ2VkX2RhdGEpXG4gICAgICAgIGNvdW50X2V4aXRlZF9wYWdlID0gMFxuXG4gICAgfVxuICAgIG5leHRfcXVlc3Rpb24oKVxufSk7XG5cbiQoJyNyYW5nZV92YWwnKS5vbignaW5wdXQgY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgIHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgPSAoJCh0aGlzKS52YWwoKSEgYXMgbnVtYmVyKVxuICAgICQoXCIjcmFuZ2VfdGV4dFwiKS50ZXh0KGBBZnRlciB0aGlzIGludGVyYWN0aW9uLCB5b3VyIGN1cnJlbnQgdHJ1c3QgaW4gdGhlIEFJOiAke3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgKiAxMH0gLyAxMDAuYClcbiAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLnNob3coKVxufSk7XG5cbmZ1bmN0aW9uIG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKG9wdGlvbikge1xuICAgIHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9IG9wdGlvblxuICAgIGFzc2VydChvcHRpb24gPT0gMSB8fCBvcHRpb24gPT0gMiwgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICBpZiAob3B0aW9uID09IDEpIHtcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG4gICAgJChcIiNpbml0aWFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuc2hvdygpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxufVxuJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24xXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24oMSkpXG4kKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbigyKSlcblxuYXN5bmMgZnVuY3Rpb24gZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKGNvbmZfbGV2ZWwpIHtcbiAgICB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIGluaXRpYWxfdXNlcl9jb25maWRlbmNlID0gY29uZl9sZXZlbFxuICAgIGFzc2VydChjb25mX2xldmVsID09IDEgfHwgY29uZl9sZXZlbCA9PSAyIHx8IGNvbmZfbGV2ZWwgPT0gMywgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICBpZiAoY29uZl9sZXZlbCA9PSAxKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgIH0gZWxzZSBpZiAoY29uZl9sZXZlbCA9PSAyKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgIH1cblxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24xXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikgICAgXG5cbiAgICBnZXRfYWlfYXNzaXN0YW5jZSgpXG59XG4kKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsIGFzeW5jICgpID0+IGF3YWl0IGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSgxKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4gYXdhaXQgZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKDIpKVxuJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjNcIikub24oXCJjbGlja1wiLCBhc3luYyAoKSA9PiBhd2FpdCBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoMykpXG5cblxuXG5hc3luYyBmdW5jdGlvbiBnZXRfdXNlcl9kZWNpc2lvbl9wcm9iKCkge1xuICAgIC8vIFByZXBhcmUgaW5wdXRzIGZvciB0aGUgdXNlciBkZWNpc2lvbiBtb2RlbFxuICAgIGxldCB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50ID0gTnVtYmVyKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgIGxldCB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSA9IGluaXRpYWxfdXNlcl9jb25maWRlbmNlXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgIGlmICh1c2VyVHJ1c3RIZXVyaXN0aWMgPT0gXCJ1c2VyX3JlcG9ydGVkXCIpIHtcbiAgICAgICAgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgLSA1KSAvIDIuNVxuICAgIH1cbiAgICBsZXQgdXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMgPSB7XG4gICAgICAgIFwidXNlcl9haV9pbml0aWFsX2FncmVlbWVudFwiOiB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50LFxuICAgICAgICBcInVzZXJfaW5pdGlhbF9jb25maWRlbmNlXCI6IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlLFxuICAgICAgICBcImFpX2NvbmZpZGVuY2VcIjogYWlfY29uZmlkZW5jZSxcbiAgICAgICAgXCJ1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X3RydXN0X2xldmVsLFxuICAgICAgICBcInRpbWVzdGVwXCI6IHF1ZXN0aW9uX2ksXG4gICAgfVxuXG4gICAgbGV0IHJlc3VsdDogYW55XG4gICAgdHJ5IHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgVVNFUl9NT0RFTFNfUk9PVCArIFwiZ2V0X3VzZXJfZGVjaXNpb25fcHJvYlwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCIyc3RlcC10cnVzdC1zdHVkeVwiLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbF9uYW1lOiB1c2VyX2RlY2lzaW9uX21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeSh1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIFwidXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHNcIjogdXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMsIFxuICAgICAgICBcInVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kXCI6IHJlc3VsdFtcInByZWRfcHJvYnNcIl1bMF1bMV1cbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGV4YW1pbmVfZWZmZWN0X29mX3RydXN0X29uX2RlY2lzaW9uX21ha2luZygpIHtcbiAgICAvLyBQcmVwYXJlIGlucHV0IHZhcmlhYmxlcyBmb3IgdXNlciBkZWNpc2lvbiBtb2RlbFxuICAgIGxldCB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50ID0gTnVtYmVyKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgIGxldCB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSA9IGluaXRpYWxfdXNlcl9jb25maWRlbmNlXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgIGlmICh1c2VyVHJ1c3RIZXVyaXN0aWMgPT0gXCJ1c2VyX3JlcG9ydGVkXCIpIHtcbiAgICAgICAgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgLSA1KSAvIDIuNVxuICAgIH1cbiAgICBsZXQgdXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMgPSB7XG4gICAgICAgIFwidXNlcl9haV9pbml0aWFsX2FncmVlbWVudFwiOiB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50LFxuICAgICAgICBcInVzZXJfaW5pdGlhbF9jb25maWRlbmNlXCI6IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlLFxuICAgICAgICBcImFpX2NvbmZpZGVuY2VcIjogYWlfY29uZmlkZW5jZSxcbiAgICAgICAgXCJ1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X3RydXN0X2xldmVsLFxuICAgICAgICBcInRpbWVzdGVwXCI6IHF1ZXN0aW9uX2ksXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiVXNlciBkZWNpc2lvbiBtb2RlbCBpbnB1dHM6IFwiLCB1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cylcblxuICAgIGxldCBhbGRpZmZfcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICBhbGRpZmZfcmVzdWx0ID0gYXdhaXQgJC5hamF4KFxuICAgICAgICAgICAgVVNFUl9NT0RFTFNfUk9PVCArIFwiZXhhbWluZV9lZmZlY3Rfb2ZfdHJ1c3Rfb25fZGVjaXNpb25fbWFraW5nXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHVzZXJfZGVjaXNpb25fbW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG5cbiAgICByZXR1cm4gYWxkaWZmX3Jlc3VsdFxufVxuXG5hc3luYyBmdW5jdGlvbiBmaW5kX2Jlc3RfYWljb25mX3RvX2Rpc3BsYXkodXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RfbmV1dHJhbF90cnVzdCkge1xuICAgIC8vIFByZXBhcmUgaW5wdXQgdmFyaWFibGVzIGZvciB1c2VyIGRlY2lzaW9uIG1vZGVsXG4gICAgbGV0IHVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnQgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgbGV0IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlID0gaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VcbiAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZXJUcnVzdEhldXJpc3RpYyA9PSBcInVzZXJfcmVwb3J0ZWRcIikge1xuICAgICAgICB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSAodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAtIDUpIC8gMi41XG4gICAgfVxuICAgIGxldCBmaW5kbmV3Y29uZl9pbnB1dF92YXJpYWJsZXMgPSB7XG4gICAgICAgIFwidXNlcl9haV9pbml0aWFsX2FncmVlbWVudFwiOiB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50LFxuICAgICAgICBcInVzZXJfaW5pdGlhbF9jb25maWRlbmNlXCI6IHVzZXJfaW5pdGlhbF9jb25maWRlbmNlLFxuICAgICAgICBcInVzZXJfY3VycmVudF90cnVzdF9sZXZlbFwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICAgICAgXCJ1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0XCI6IHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QsXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGZpbmRuZXdjb25mX3Jlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImZpbmRfYmVzdF9haWNvbmZfdG9fZGlzcGxheVwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCIyc3RlcC10cnVzdC1zdHVkeVwiLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbF9uYW1lOiB1c2VyX2RlY2lzaW9uX21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeShmaW5kbmV3Y29uZl9pbnB1dF92YXJpYWJsZXMpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cblxuICAgIHJldHVybiBmaW5kbmV3Y29uZl9yZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gcHJlcGFyZV9sbG1fYXNzaXN0YW5jZSgpIHtcbiAgICBjb25zb2xlLmxvZyhcIlByZXBhcmluZyBMTE0gYXNzaXN0YW5jZS4uLlwiKVxuICAgIGxldCBsbG1faW5wdXRzID0ge1xuICAgICAgICBcInF1ZXN0aW9uXCI6IHF1ZXN0aW9uIVtcInF1ZXN0aW9uXCJdLFxuICAgICAgICBcIm9wdGlvbjFcIjogcXVlc3Rpb24hW1wib3B0aW9uMVwiXSxcbiAgICAgICAgXCJvcHRpb24yXCI6IHF1ZXN0aW9uIVtcIm9wdGlvbjJcIl0sXG4gICAgICAgIFwiY29ycmVjdF9vcHRpb25cIjogcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0sXG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGxsbV9wcmVkaWN0aW9uX3Jlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImdldF9sbG1fcHJlZGljdGlvblwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCIyc3RlcC10cnVzdC1zdHVkeVwiLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbF9uYW1lOiB1c2VyX2RlY2lzaW9uX21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeShsbG1faW5wdXRzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG4gICAgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSA9IGxsbV9wcmVkaWN0aW9uX3Jlc3VsdFtcImxsbV9wcmVkaWN0ZWRfb3B0aW9uXCJdXG4gICAgcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSA9IGxsbV9wcmVkaWN0aW9uX3Jlc3VsdFtcImxsbV9jb25maWRlbmNlXCJdXG4gICAgcXVlc3Rpb24hW1wibGxtX2Fuc3dlclwiXSA9IGxsbV9wcmVkaWN0aW9uX3Jlc3VsdFtcImxsbV9hbnN3ZXJcIl1cbiAgICBxdWVzdGlvbiFbXCJhaV9leHBsYW5hdGlvblwiXSA9IGxsbV9wcmVkaWN0aW9uX3Jlc3VsdFtcImxsbV9leHBsYW5hdGlvblwiXVxuICAgIHF1ZXN0aW9uIVtcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uXCJdID0gbGxtX3ByZWRpY3Rpb25fcmVzdWx0W1wibGxtX2NvdW50ZXJleHBsYW5hdGlvblwiXVxuICAgIHF1ZXN0aW9uIVtcImFpX2lzX2NvcnJlY3RcIl0gPSBsbG1fcHJlZGljdGlvbl9yZXN1bHRbXCJsbG1faXNfY29ycmVjdFwiXVxuICAgIHF1ZXN0aW9uIVtcImxsbV9pbnB1dFwiXSA9IGxsbV9wcmVkaWN0aW9uX3Jlc3VsdFtcImxsbV9pbnB1dFwiXVxuICAgIHF1ZXN0aW9uIVtcImxsbV9vdXRwdXRcIl0gPSBsbG1fcHJlZGljdGlvbl9yZXN1bHRbXCJsbG1fb3V0cHV0XCJdXG4gICAgY29uc29sZS5sb2coXCJMTE0gcHJlZGljdGlvbiByZXN1bHQ6IFwiLCBsbG1fcHJlZGljdGlvbl9yZXN1bHQpXG4gICAgcmV0dXJuIGxsbV9wcmVkaWN0aW9uX3Jlc3VsdFxufVxuICAgIFxuXG5hc3luYyBmdW5jdGlvbiBnZXRfYWlfYXNzaXN0YW5jZSgpIHtcbiAgICBjb25zb2xlLmxvZyhcIkdldHRpbmcgQUkgYXNzaXN0YW5jZS4uLlwiKVxuICAgIGlmICh1c2VMTE1Bc3Npc3RhbnQgPT0gdHJ1ZSkge1xuICAgICAgICAkKFwiI2FpX3ByZWRpY3Rpb25fc3BhblwiKS5odG1sKFwiVGhlIEFJIGlzIHRoaW5raW5nLi4uXCIpXG4gICAgICAgICQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwoXCJcIilcbiAgICAgICAgYXdhaXQgcHJlcGFyZV9sbG1fYXNzaXN0YW5jZSgpXG4gICAgfVxuXG4gICAgbGV0IGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgIGxldCB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgaWYgKHVzZXJUcnVzdEhldXJpc3RpYyA9PSBcInVzZXJfcmVwb3J0ZWRcIikge1xuICAgICAgICB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPSAodXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbCAtIDUpIC8gMi41XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgdXNlciByZXBvcnRlZCB0cnVzdCB2YWx1ZTogXCIsIHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwpXG4gICAgfVxuICAgIGludGVydmVudGlvbl9kZXRhaWxzID0ge1xuICAgICAgICBcImludGVydmVudGlvbl9hcHBsaWVkXCI6IGZhbHNlLCBcbiAgICAgICAgXCJ0cnVzdF9sZXZlbF9hdF9zdGFydF9vZl9pbnRlcmFjdGlvblwiOiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWxcbiAgICBcbiAgICB9XG5cbiAgICBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwibm9uZVwiIHx8IChpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSkpIHtcbiAgICAgICAgLy8gTm8gaW50ZXJ2ZW50aW9uLCBqdXN0IHNob3cgdGhlIEFJIGFzc2lzdGFuY2UgdGhhdCBpcyBhbHJlYWR5IHBvcHVsYXRlZCBpbiB0aGUgc3BhblxuICAgICAgICBjb25zb2xlLmxvZyhcIk5vdCBhcHBseWluZyBhbnkgaW50ZXJ2ZW50aW9uLlwiKVxuICAgICAgICBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICB9XG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiY29uZmlkZW5jZV9tYW5pcFwiKSB7XG4gICAgICAgIC8vIE1vZGlmeSBBSSBjb25maWRlbmNlXG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm5vbmVcIikgfHwgXG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHlpbmcgQUkgY29uZmlkZW5jZSBtYW5pcHVsYXRpb24gaW50ZXJ2ZW50aW9uLlwiKVxuICAgICAgICAgICAgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJmaXhlZFwiKSB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSB0byBBSSdzIGNvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICAvLyAoSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlIGNhbiBiZSBuZWdhdGl2ZSlcbiAgICAgICAgICAgICAgICBsZXQgYWlfY29uZmlkZW5jZSA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdLnJlcGxhY2UoXCIlXCIsIFwiXCIpKSAvIDEwMFxuICAgICAgICAgICAgICAgIGxldCBuZXdfY29uZmlkZW5jZSA9IE1hdGgubWluKDEsIGFpX2NvbmZpZGVuY2UgKyBJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UpXG4gICAgICAgICAgICAgICAgbmV3X2NvbmZpZGVuY2UgPSBNYXRoLm1heCgwLjUsIG5ld19jb25maWRlbmNlKVxuICAgICAgICAgICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gU3RyaW5nKCggbmV3X2NvbmZpZGVuY2UgKiAxMDApLnRvRml4ZWQoMCkpICsgXCIlXCJcbiAgICAgICAgICAgICAgICBsZXQgY29uZmlkZW5jZV9jaGFuZ2UgPSAobmV3X2NvbmZpZGVuY2UgLSBhaV9jb25maWRlbmNlKS50b0ZpeGVkKDIpXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBY3R1YWwgQUkgY29uZmlkZW5jZTogXCIsIHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0sIFwiLCBDb25maWRlbmNlIHNob3duIHRvIHVzZXI6IFwiLCBkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSlcblxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiY29uZl9hY3R1YWxcIl0gPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2Rpc3BsYXllZFwiXSA9IGRpc3BsYXllZF9haV9jb25maWRlbmNlXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2NoYW5nZVwiXSA9IGNvbmZpZGVuY2VfY2hhbmdlXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJpbnRlcnZlbnRpb25fYXBwbGllZFwiXSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJhZGFwdGl2ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50IGFkYXB0aXZlIHN0cmF0ZWd5XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbmRpdGlvbnMgZm9yIGFwcGx5aW5nICdjb25maWRlbmNlIG1hbmlwdWxhdGlvbicgaW50ZXJ2ZW50aW9uIG5vdCBzYXRpc2ZpZWQuXCIpXG4gICAgICAgIH1cblxuICAgIH0gXG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYWlfZXhwbGFuYXRpb25cIikge1xuICAgICAgICAvLyBBZGQgQUkgZXhwbGFuYXRpb25cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibm9uZVwiKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX3VuZGVydHJ1c3RcIiAmJiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCkgfHxcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV9vdmVydHJ1c3RcIiAmJiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPiBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIEFJIGV4cGxhbmF0aW9uIGludGVydmVudGlvbi5cIilcbiAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiZml4ZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBleHBsYW5hdGlvblwiKVxuICAgICAgICAgICAgICAgIGxldCBleHBsYW5hdGlvbl9zaG93bjogc3RyaW5nID0gIXF1ZXN0aW9uIVtcImFpX2V4cGxhbmF0aW9uXCJdID8gXCJObyBleHBsYW5hdGlvbiBwcm92aWRlZFwiIDogcXVlc3Rpb24hW1wiYWlfZXhwbGFuYXRpb25cIl1cbiAgICAgICAgICAgICAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX3NwYW5cIikuaHRtbChleHBsYW5hdGlvbl9zaG93bilcbiAgICAgICAgICAgICAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX2RpdlwiKS5zaG93KClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImV4cGxhbmF0aW9uX3Nob3duXCJdID0gZXhwbGFuYXRpb25fc2hvd25cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgY29uc3QgYWlfZXhwbGFuYXRpb25fZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaV9leHBsYW5hdGlvbl9kaXZcIilcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICBzdGFydFRpbWVyKDE1LCBhaV9leHBsYW5hdGlvbl9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHJlYWQgdGhlIGV4cGxhbmF0aW9uLlwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImFkYXB0aXZlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb25kaXRpb25zIGZvciBhcHBseWluZyAnQUkgZXhwbGFuYXRpb24nIGludGVydmVudGlvbiBub3Qgc2F0aXNmaWVkLlwiKVxuICAgICAgICB9XG5cbiAgICB9XG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIikge1xuICAgICAgICAvLyBBZGQgQUkgZXhwbGFuYXRpb25cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibm9uZVwiKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX3VuZGVydHJ1c3RcIiAmJiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCkgfHxcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV9vdmVydHJ1c3RcIiAmJiB1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPiBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIEFJIGV4cGxhbmF0aW9uIGludGVydmVudGlvbi5cIilcbiAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiZml4ZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBleHBsYW5hdGlvblwiKVxuICAgICAgICAgICAgICAgIGxldCBleHBsYW5hdGlvbl9zaG93bjogc3RyaW5nID0gIXF1ZXN0aW9uIVtcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uXCJdID8gXCJObyBleHBsYW5hdGlvbiBwcm92aWRlZFwiIDogcXVlc3Rpb24hW1wiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIl1cbiAgICAgICAgICAgICAgICAkKFwiI2FpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX3NwYW5cIikuaHRtbChleHBsYW5hdGlvbl9zaG93bilcbiAgICAgICAgICAgICAgICAkKFwiI2FpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdlwiKS5zaG93KClcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImV4cGxhbmF0aW9uX3Nob3duXCJdID0gZXhwbGFuYXRpb25fc2hvd25cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgY29uc3QgYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXZcIilcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICBzdGFydFRpbWVyKDEwLCBhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHJlYWQgdGhlIGV4cGxhbmF0aW9uLlwiKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImFkYXB0aXZlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb25kaXRpb25zIGZvciBhcHBseWluZyAnQUkgZXhwbGFuYXRpb24nIGludGVydmVudGlvbiBub3Qgc2F0aXNmaWVkLlwiKVxuICAgICAgICB9XG5cbiAgICB9IFxuICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBcImJvdGhfZXhwbGFuYXRpb25fdHlwZXNcIikge1xuICAgICAgICBhc3NlcnQgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX3VuZGVyYW5kb3ZlcnRydXN0XCIsIFwiR29hbCBmb3IgJ2JvdGggZXhwbGFuYXRpb24gdHlwZXMnIGludGVydmVudGlvbiBzaG91bGQgYmUgJ21pdGlnYXRlX3VuZGVyYW5kb3ZlcnRydXN0J1wiKVxuICAgICAgICBpZiAodXNlcl9jdXJyZW50X3RydXN0X2xldmVsIDwgSW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBleHBsYW5hdGlvbiBpbnRlcnZlbnRpb24gZm9yIHVuZGVydHJ1c3RcIilcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBleHBsYW5hdGlvblwiKVxuICAgICAgICAgICAgbGV0IGV4cGxhbmF0aW9uX3Nob3duOiBzdHJpbmcgPSAhcXVlc3Rpb24hW1wiYWlfZXhwbGFuYXRpb25cIl0gPyBcIk5vIGV4cGxhbmF0aW9uIHByb3ZpZGVkXCIgOiBxdWVzdGlvbiFbXCJhaV9leHBsYW5hdGlvblwiXVxuICAgICAgICAgICAgJChcIiNhaV9leHBsYW5hdGlvbl9zcGFuXCIpLmh0bWwoZXhwbGFuYXRpb25fc2hvd24pXG4gICAgICAgICAgICAkKFwiI2FpX2V4cGxhbmF0aW9uX2RpdlwiKS5zaG93KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJleHBsYW5hdGlvbl9zaG93blwiXSA9IGV4cGxhbmF0aW9uX3Nob3duXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICBjb25zdCBhaV9leHBsYW5hdGlvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2V4cGxhbmF0aW9uX2RpdlwiKVxuICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICBzdGFydFRpbWVyKDE1LCBhaV9leHBsYW5hdGlvbl9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHJlYWQgdGhlIGV4cGxhbmF0aW9uLlwiKVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvbk92ZXJ0cnVzdFRocmVzaG9sZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBjb250cmFzdGl2ZSBleHBsYW5hdGlvbiBpbnRlcnZlbnRpb24gZm9yIG92ZXJ0cnVzdFwiKVxuICAgICAgICAgICAgbGV0IGV4cGxhbmF0aW9uX3Nob3duOiBzdHJpbmcgPSAhcXVlc3Rpb24hW1wiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIl0gPyBcIk5vIGV4cGxhbmF0aW9uIHByb3ZpZGVkXCIgOiBxdWVzdGlvbiFbXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvblwiXVxuICAgICAgICAgICAgJChcIiNhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9zcGFuXCIpLmh0bWwoZXhwbGFuYXRpb25fc2hvd24pXG4gICAgICAgICAgICAkKFwiI2FpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdlwiKS5zaG93KClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJleHBsYW5hdGlvbl9zaG93blwiXSA9IGV4cGxhbmF0aW9uX3Nob3duXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICBjb25zdCBhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdlwiKVxuICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICBzdGFydFRpbWVyKDEwLCBhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHJlYWQgdGhlIGV4cGxhbmF0aW9uLlwiKVxuXG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYWlfdGhpbmtpbmdcIikge1xuICAgICAgICAvLyBBZGQgQUkgdGhpbmtpbmdcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm5vbmVcIikgfHxcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV91bmRlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsIDwgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfb3ZlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBBSSB0aGlua2luZyBpbnRlcnZlbnRpb24uXCIpXG4gICAgICAgICAgICBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImZpeGVkXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNob3dpbmcgQUkgdGhpbmtpbmdcIilcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgJChcIiNhaV90aGlua2luZ19kaXZcIikuc2hvdygpXG4gICAgICAgICAgICAgICAgYXdhaXQgd2FpdCgxMDAwMClcbiAgICAgICAgICAgICAgICAkKFwiI2FpX3RoaW5raW5nX2RpdlwiKS5oaWRlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJhZGFwdGl2ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJhaV9mb3JjZWRfcGF1c2VcIikge1xuICAgICAgICAvLyBBZGQgQUkgZm9yY2VkIHBhdXNlXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJub25lXCIpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHlpbmcgQUkgZm9yY2VkIHBhdXNlIGludGVydmVudGlvbi5cIilcbiAgICAgICAgICAgIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiZml4ZWRcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBBSSBmb3JjZWQgcGF1c2VcIilcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuXG4gICAgICAgICAgICAgICAgY29uc3QgYWlfYXNzaXN0YW5jZV9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2Fzc2lzdGFuY2VfZGl2XCIpXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKSxcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKSxcbiAgICAgICAgICAgICAgICBdICAgIFxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZXIoMTAsIGFpX2Fzc2lzdGFuY2VfZGl2LCBidXR0b25zLCBudWxsLCBcIlBsZWFzZSB0YWtlIHNvbWUgdGltZSB0byBjYXJlZnVsbHkgY29uc2lkZXIgdGhlIEFJJ3Mgc3VnZ2VzdGlvbi5cIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJhZGFwdGl2ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy9UT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gXG4gICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25UeXBlID09IFwiYm90aF9wYXVzZV90eXBlc1wiKSB7XG4gICAgICAgIGFzc2VydCAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJhbmRvdmVydHJ1c3RcIiwgXCJHb2FsIGZvciAnYm90aCBwYXVzZSB0eXBlcycgaW50ZXJ2ZW50aW9uIHNob3VsZCBiZSAnbWl0aWdhdGVfdW5kZXJhbmRvdmVydHJ1c3QnXCIpXG4gICAgICAgIGlmICh1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWwgPCBJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFwcGx5aW5nIEFJIHRoaW5raW5nIGludGVydmVudGlvbiBmb3IgdW5kZXJ0cnVzdFwiKVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIEFJIHRoaW5raW5nXCIpXG4gICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuICAgICAgICAgICAgJChcIiNhaV90aGlua2luZ19kaXZcIikuc2hvdygpXG4gICAgICAgICAgICBhd2FpdCB3YWl0KDEwMDAwKVxuICAgICAgICAgICAgJChcIiNhaV90aGlua2luZ19kaXZcIikuaGlkZSgpXG4gICAgICAgIH0gXG4gICAgICAgIGVsc2UgaWYgKHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvbk92ZXJ0cnVzdFRocmVzaG9sZCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBBSSBmb3JjZWQgcGF1c2UgaW50ZXJ2ZW50aW9uIGZvciBvdmVydHJ1c3RcIilcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2hvd2luZyBBSSBmb3JjZWQgcGF1c2VcIilcbiAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgIGNvbnN0IGFpX2Fzc2lzdGFuY2VfZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhaV9hc3Npc3RhbmNlX2RpdlwiKVxuICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJ1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgICAgICAgICBdICAgIFxuICAgICAgICAgICAgc3RhcnRUaW1lcigxMCwgYWlfYXNzaXN0YW5jZV9kaXYsIGJ1dHRvbnMsIG51bGwsIFwiUGxlYXNlIHRha2Ugc29tZSB0aW1lIHRvIGNhcmVmdWxseSBjb25zaWRlciB0aGUgQUkncyBzdWdnZXN0aW9uLlwiKVxuICAgICAgICB9XG4gICAgfVxuXG5cblxuXG4gICAgLy9pbnRlcnZlbnRpb25fZGV0YWlsc1snYWN0dWFsX2FpX2NvbmZpZGVuY2UnXSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAvL2ludGVydmVudGlvbl9kZXRhaWxzWydkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSddID0gZGlzcGxheWVkX2FpX2NvbmZpZGVuY2VcbiAgICBjb25zb2xlLmxvZyhcIkFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uIERldGFpbHM6IFwiLCBpbnRlcnZlbnRpb25fZGV0YWlscylcblxuICAgICQoXCIjYWlfcHJlZGljdGlvbl9zcGFuXCIpLmh0bWwoXCJPcHRpb24gXCIgKyBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgICQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwoZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UpXG5cbiAgICAkKFwiI2FpX2Fzc2lzdGFuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjZmluYWxfdXNlcl9kZWNpc2lvbl9kaXZcIikuc2hvdygpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldF90cnVzdF9lZmZlY3QoKSB7XG4gICAgLy8gR2V0IHRydXN0IGVmZmVjdCBmb3IgdGhpcyBpbnRlcmFjdGlvblxuICAgIGxldCBpbml0aWFsX3VzZXJfY29ycmVjdG5lc3MgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBhaV9jb3JyZWN0bmVzcyA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBmaW5hbF91c2VyX2NvcnJlY3RuZXNzID0gTnVtYmVyKGZpbmFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0pXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdHJ1c3RfZWZmZWN0X2lucHV0cyA9IHtcbiAgICAgICAgXCJpbml0aWFsX3VzZXJfY29ycmVjdG5lc3NcIjogaW5pdGlhbF91c2VyX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImFpX2NvcnJlY3RuZXNzXCI6IGFpX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImZpbmFsX3VzZXJfY29ycmVjdG5lc3NcIjogZmluYWxfdXNlcl9jb3JyZWN0bmVzcyxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJUcnVzdCBlZmZlY3QgaW5wdXRzOiBcIiwgdHJ1c3RfZWZmZWN0X2lucHV0cylcbiAgICAvL2xldCB0cnVzdF9lZmZlY3QgPSBnZXRfdXNlcl90cnVzdF9lZmZlY3QodHJ1c3RfZWZmZWN0X2lucHV0cylcbiAgICBsZXQgcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJnZXRfdHJ1c3RfZWZmZWN0XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHRydXN0X2VmZmVjdF9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkodHJ1c3RfZWZmZWN0X2lucHV0cyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJUcnVzdCBlZmZlY3QgcHJlZGljdGlvbiByZXN1bHQ6IFwiLCByZXN1bHQpXG4gICAgbGV0IHRydXN0X2VmZmVjdCA9IGF3YWl0IHJlc3VsdFtcInRydXN0X2VmZmVjdFwiXVxuXG4gICAgdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwgKyB0cnVzdF9lZmZlY3RcbiAgICB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0ge1xuICAgICAgICBcIm1vZGVsX2lucHV0c1wiOiB0cnVzdF9lZmZlY3RfaW5wdXRzLFxuICAgICAgICBcInByZWRpY3RlZF90cnVzdF9lZmZlY3RcIjogdHJ1c3RfZWZmZWN0LFxuICAgICAgICBcInVzZXJfbmV3X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgfVxuICAgIHJldHVybiB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhXG59XG5cbmZ1bmN0aW9uIG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbihvcHRpb24pIHtcbiAgICB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgZmluYWxfdXNlcl9kZWNpc2lvbiA9IG9wdGlvblxuICAgIGFzc2VydChvcHRpb24gPT0gMSB8fCBvcHRpb24gPT0gMiwgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICBpZiAob3B0aW9uID09IDEpIHtcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgICQoXCIjZmluYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbn1cbiQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24oMSkpXG4kKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9maW5hbF91c2VyX2RlY2lzaW9uKDIpKVxuXG5mdW5jdGlvbiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKGNvbmZfbGV2ZWwpIHtcbiAgICB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIGZpbmFsX3VzZXJfY29uZmlkZW5jZSA9IGNvbmZfbGV2ZWxcbiAgICBhc3NlcnQoY29uZl9sZXZlbCA9PSAxIHx8IGNvbmZfbGV2ZWwgPT0gMiB8fCBjb25mX2xldmVsID09IDMsIFwiSW52YWxpZCBvcHRpb24hXCIpXG4gICAgaWYgKGNvbmZfbGV2ZWwgPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2UgaWYgKGNvbmZfbGV2ZWwgPT0gMikge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG5cbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICBzaG93X3Jlc3VsdCgpXG59XG4kKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKDEpKVxuJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSgyKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoMykpXG5cblxuYXN5bmMgZnVuY3Rpb24gc2hvd19yZXN1bHQoKSB7XG5cbiAgICBsZXQgY29ycmVjdF9vcHRpb246IG51bWJlciA9IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdXG4gICAgbGV0IHVzZXJfaXNfY29ycmVjdDogYm9vbGVhbiA9IGNvcnJlY3Rfb3B0aW9uID09IGZpbmFsX3VzZXJfZGVjaXNpb25cblxuICAgIGxldCBhaV9pc19jb3JyZWN0OiBib29sZWFuID0gcXVlc3Rpb24hW1wiYWlfaXNfY29ycmVjdFwiXVxuICAgIGxldCBtZXNzYWdlID0gXCJDb3JyZWN0IGFuc3dlcjogPGI+T3B0aW9uIFwiICsgY29ycmVjdF9vcHRpb24gKyBcIjwvYj4uPGJyPlwiXG4gICAgaWYgKHVzZXJfaXNfY29ycmVjdCkge1xuICAgICAgICBtZXNzYWdlICs9IFwiWW91IHBpY2tlZCBPcHRpb24gXCIgKyBmaW5hbF91c2VyX2RlY2lzaW9uICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+Y29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIllvdSBwaWNrZWQgT3B0aW9uIFwiICsgZmluYWxfdXNlcl9kZWNpc2lvbiArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+aW5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGlmIChhaV9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5jb3JyZWN0PGI+PC9zcGFuPi48YnI+XCJcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPmluY29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+WW91IHJlY2VpdmUgYSByZXdhcmQgb2YgJDAuMTAuPC9iPjwvc3Bhbj5cIlxuICAgICAgICBiYWxhbmNlICs9IDAuMVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIjxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPllvdSBkbyBub3QgcmVjZWl2ZSBhbnkgcmV3YXJkLjwvYj48L3NwYW4+XCJcbiAgICB9XG5cbiAgICBtZXNzYWdlICs9IFwiPGJyPlwiXG4gICAgLy9pZiAoc3VjY2Vzcykge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gYFlvdSBnYWluICQkeyhiZXRfdmFsKmJldF92YWxfcmF0aW8pLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlICs9IGJldF92YWwqYmV0X3ZhbF9yYXRpb1xuICAgIC8vfSBlbHNlIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IGBZb3UgbG9zZSAkJHsoYmV0X3ZhbC8xLjApLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlIC09IGJldF92YWwvMS4wXG4gICAgLy8gICAgYmFsYW5jZSA9IE1hdGgubWF4KDAsIGJhbGFuY2UpXG4gICAgLy99XG4gICAgJChcIiNiYWxhbmNlXCIpLnRleHQoYEJhbGFuY2U6ICQke2JhbGFuY2UudG9GaXhlZCgyKX0gKyAkMS4wYClcbiAgICAkKFwiI3Jlc3VsdF9zcGFuXCIpLmh0bWwobWVzc2FnZSlcbiAgICAvLyQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5zaG93KClcbiAgICAvLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICBpZiAoc2tpcF90cnVzdF9yZXBvcnRpbmcpICAge1xuICAgICAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLnNob3coKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgJChcIiN1c2VyX3RydXN0X3JlcG9ydF9kaXZcIikuc2hvdygpXG4gICAgfVxuXG4gICAgLy90cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0gYXdhaXQgZ2V0X3RydXN0X2VmZmVjdCgpXG4gICAgdXBkYXRlX3VzZXJfdHJ1c3RfbGV2ZWxfZXN0aW1hdGUoKVxuXG4gICAgLy8kKCcjcmFuZ2VfdmFsJykuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxufVxuXG5mdW5jdGlvbiB1cGRhdGVfdXNlcl90cnVzdF9sZXZlbF9lc3RpbWF0ZSgpIHtcbiAgICBpZiAodXNlclRydXN0SGV1cmlzdGljID09IFwic21vb3RoZWRfY29uZndlaWdodGVkX3RydXN0XCIpIHtcbiAgICAgICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICAgICAgbGV0IHRydXN0X2VmZmVjdCA9IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0gPyBhaV9jb25maWRlbmNlIDogLWFpX2NvbmZpZGVuY2VcbiAgICAgICAgbGV0IHByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgICAgICB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsID0gc21vb3RoaW5nUGFyYW0gKiB0cnVzdF9lZmZlY3QgKyAoMS1zbW9vdGhpbmdQYXJhbSkgKiB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgICAgIHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEgPSB7XG4gICAgICAgICAgICBcInByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsXCI6IHByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsLFxuICAgICAgICAgICAgXCJ0cnVzdF9lZmZlY3RcIjogdHJ1c3RfZWZmZWN0LFxuICAgICAgICAgICAgXCJuZXdfZXN0aW1hdGVkX3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJPbGQgZXN0aW1hdGVkIHRydXN0IGxldmVsOiBcIiArIHByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsICsgXCIsIHRydXN0IGVmZmVjdDogXCIgKyB0cnVzdF9lZmZlY3QgKyBcIiwgbmV3IGVzdGltYXRlZCB0cnVzdCBsZXZlbDogXCIgKyB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsKVxuICAgIH1cbn1cblxuLy8kKFwiI2J1dHRvbl9wbGFjZV9iZXRcIikub24oXCJjbGlja1wiLCBzaG93X3Jlc3VsdClcblxuZnVuY3Rpb24gc3RhcnRfdGltZXJfZm9yX2luaXRpYWxfZGVjaXNpb24oKSB7XG4gICAgY29uc3QgaW5pdGlhbF91c2VyX2RlY2lzaW9uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5pdGlhbF91c2VyX2RlY2lzaW9uX2RpdlwiKVxuICAgIGNvbnN0IGJ1dHRvbnMgPSBbXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKSxcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLFxuICAgIF1cbiAgICBzdGFydFRpbWVyKDEwLCBpbml0aWFsX3VzZXJfZGVjaXNpb25fZGl2LCBidXR0b25zLCBudWxsLCBcIlBsZWFzZSByZWFkIHRoZSBxdWVzdGlvbiBhbmQgb3B0aW9ucyBjbG9zZWx5LlwiKVxufVxuXG5mdW5jdGlvbiBuZXh0X3F1ZXN0aW9uKCkge1xuICAgIC8vIHJlc3RvcmUgcHJldmlvdXMgc3RhdGUgb2YgVUlcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG5cbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG5cbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYWlfYXNzaXN0YW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNhaV9leHBsYW5hdGlvbl9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNhaV90aGlua2luZ19kaXZcIikuaGlkZSgpXG4gICAgJChcIiNpbml0aWFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNmaW5hbF91c2VyX2RlY2lzaW9uX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2ZpbmFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJCgnI3JhbmdlX3ZhbCcpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjdXNlcl90cnVzdF9yZXBvcnRfZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLmhpZGUoKVxuICAgICQoXCIjcmVzdWx0X3NwYW5cIikuaGlkZSgpXG4gICAgaWYgKHF1ZXN0aW9uX2kgPT0gLTEpIHtcbiAgICAgICAgJChcIiNyYW5nZV90ZXh0XCIpLnRleHQoXCItXCIpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChgQmVmb3JlIHRoaXMgaW50ZXJhY3Rpb24sIHlvdXIgdHJ1c3QgaW4gdGhlIEFJOiAke3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgKiAxMH0gLyAxMDAuYClcbiAgICB9XG4gICAgJChcIiNyYW5nZV92YWxcIikudmFsKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwpXG4gICAgcHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsID0gdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbFxuICAgIFxuICAgIHF1ZXN0aW9uX2kgKz0gMVxuICAgIGlmIChxdWVzdGlvbl9pID49IGRhdGEubGVuZ3RoKSB7XG4gICAgICAgICQoXCIjbWFpbl9ib3hfZXhwZXJpbWVudFwiKS5oaWRlKClcbiAgICAgICAgaWYgKE1PQ0tNT0RFKSB7XG4gICAgICAgICAgICAkKFwiI21haW5fYm94X2VuZF9tb2NrXCIpLnNob3coKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcIiNtYWluX2JveF9lbmRcIikuc2hvdygpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHF1ZXN0aW9uID0gZGF0YVtxdWVzdGlvbl9pXVxuICAgIFxuICAgICQoXCIjcXVlc3Rpb25fc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcInF1ZXN0aW9uXCJdKVxuICAgICQoXCIjb3B0aW9uMV9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wib3B0aW9uMVwiXSlcbiAgICAkKFwiI29wdGlvbjJfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcIm9wdGlvbjJcIl0pXG4gICAgLy8kKFwiI2FpX3ByZWRpY3Rpb25fc3BhblwiKS5odG1sKFwiT3B0aW9uIFwiICsgcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICAvLyQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSlcblxuICAgIC8vIHNldCBiZXQgdmFsdWUgcmF0aW9cbiAgICBpZihxdWVzdGlvbi5oYXNPd25Qcm9wZXJ0eShcInJld2FyZF9yYXRpb1wiKSkge1xuICAgICAgICBsZXQgW3JhdGlvMSwgcmF0aW8yXSA9IHF1ZXN0aW9uW1wicmV3YXJkX3JhdGlvXCJdXG4gICAgICAgIHJhdGlvMSA9IE51bWJlcihyYXRpbzEpXG4gICAgICAgIHJhdGlvMiA9IE51bWJlcihyYXRpbzIpXG4gICAgICAgIGJldF92YWxfcmF0aW8gPSByYXRpbzEvcmF0aW8yXG4gICAgfSBlbHNlIHtcbiAgICAgICAgYmV0X3ZhbF9yYXRpbyA9IDFcbiAgICB9XG5cbiAgICB0aW1lX3F1ZXN0aW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgICQoXCIjcHJvZ3Jlc3NcIikudGV4dChgUHJvZ3Jlc3M6ICR7cXVlc3Rpb25faSArIDF9IC8gJHtkYXRhLmxlbmd0aH1gKVxuXG4gICAgc3RhcnRfdGltZXJfZm9yX2luaXRpYWxfZGVjaXNpb24oKVxufVxuXG4vLyBnZXQgdXNlciBpZCBhbmQgbG9hZCBxdWV1ZVxuLy8gdHJ5IHRvIHNlZSBpZiBzdGFydCBvdmVycmlkZSB3YXMgcGFzc2VkXG5jb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuY29uc3Qgc3RhcnRPdmVycmlkZSA9IHVybFBhcmFtcy5nZXQoJ3N0YXJ0Jyk7XG5jb25zdCBVSURGcm9tVVJMID0gdXJsUGFyYW1zLmdldChcInVpZFwiKVxuZ2xvYmFsVGhpcy51cmxfZGF0YSA9IHBhcmFtc1RvT2JqZWN0KHVybFBhcmFtcy5lbnRyaWVzKCkpXG5cbmlmIChVSURGcm9tVVJMICE9IG51bGwpIHtcbiAgICBnbG9iYWxUaGlzLnVpZCA9IFVJREZyb21VUkwgYXMgc3RyaW5nXG4gICAgaWYgKGdsb2JhbFRoaXMudWlkID09IFwicHJvbGlmaWNfcmFuZG9tXCIpIHtcbiAgICAgICAgbGV0IHF1ZXVlX2lkID0gYCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApfWAucGFkU3RhcnQoMywgXCIwXCIpXG4gICAgICAgIGdsb2JhbFRoaXMudWlkID0gYCR7dXJsUGFyYW1zLmdldChcInByb2xpZmljX3F1ZXVlX25hbWVcIil9LyR7cXVldWVfaWR9YFxuICAgIH1cbn0gZWxzZSBpZiAoREVWTU9ERSkge1xuICAgIGdsb2JhbFRoaXMudWlkID0gXCJkZW1vXCJcbn0gZWxzZSB7XG4gICAgbGV0IFVJRF9tYXliZTogYW55ID0gbnVsbFxuICAgIHdoaWxlIChVSURfbWF5YmUgPT0gbnVsbCkge1xuICAgICAgICBVSURfbWF5YmUgPSBwcm9tcHQoXCJFbnRlciB5b3VyIHVzZXIgaWQuIFBsZWFzZSBnZXQgaW4gdG91Y2ggaWYgeW91IHdlcmUgbm90IGFzc2lnbmVkIGFuIGlkIGJ1dCB3aXNoIHRvIHBhcnRpY2lwYXRlIGluIHRoaXMgZXhwZXJpbWVudC5cIilcbiAgICB9XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBVSURfbWF5YmUhXG59XG5cbmxldCBpbnRlcnZlbnRpb25fYWxsb3dlZF90aW1lc3RlcHM6IG51bWJlcltdID0gW11cbmlmIChnbG9iYWxUaGlzLnVpZC5pbmNsdWRlcyhcIjM0M1wiKSkge1xuICAgIGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwcyA9IFs3LCA4LCA5LCAxNywgMTgsIDE5LCAyNywgMjgsIDI5XVxufSBlbHNlIGlmIChnbG9iYWxUaGlzLnVpZC5pbmNsdWRlcyhcIjQzNFwiKSkge1xuICAgIGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwcyA9IFs3LCA4LCA5LCAxNywgMTgsIDE5LCAyNywgMjgsIDI5XVxufSBlbHNlIGlmIChnbG9iYWxUaGlzLnVpZC5pbmNsdWRlcyhcIjczNVwiKSkge1xuICAgIGludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwcyA9IFsxMCwgMTEsIDEyLCAxMywgMTQsIDI1LCAyNiwgMjcsIDI4LCAyOV1cbn1cblxuLy9jb25zdCB2YWxpZEFJSW50ZXJ2ZW50aW9ucyA9IFtcIm5vbmVcIiwgXCJkdW1teVwiLCBcImNvbmZpZGVuY2VfaW5mbGF0aW9uXCIsIFwiY29uZmlkZW5jZV9pbmZsYXRpb25fZml4ZWRcIiwgXCJjb25maWRlbmNlX2RlZmxhdGlvblwiXVxuLy9sZXQgQUlJbnRlcnZlbnRpb25UeXBlID0gdXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90eXBlXCIpXG4vL2xldCBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90aHJlc2hvbGRcIikpXG4vL2xldCBJbnRlcnZlbnRpb25GaXhlZENvbmZJbmNyZWFzZSA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX2ZpeGVkY29uZmluY3JlYXNlXCIpKVxuY29uc3QgdmFsaWRJbnRlcnZlbnRpb25Hb2FscyA9IFtcIm5vbmVcIiwgXCJtaXRpZ2F0ZV91bmRlcnRydXN0XCIsIFwibWl0aWdhdGVfb3ZlcnRydXN0XCIsIFwibWl0aWdhdGVfdW5kZXJhbmRvdmVydHJ1c3RcIl1cbmxldCBBSUludGVydmVudGlvbkdvYWwgPSB1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX2dvYWxcIilcbmlmIChBSUludGVydmVudGlvbkdvYWwgPT0gbnVsbCkge0FJSW50ZXJ2ZW50aW9uR29hbCA9IFwibm9uZVwifVxuaWYgKCF2YWxpZEludGVydmVudGlvbkdvYWxzLmluY2x1ZGVzKEFJSW50ZXJ2ZW50aW9uR29hbCEpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBSSBBc3Npc3RhbmNlIEludGVydmVudGlvbiBHb2FsOiBcIiArIEFJSW50ZXJ2ZW50aW9uR29hbClcbn1cblxuY29uc3QgdmFsaWRJbnRlcnZlbnRpb25UeXBlcyA9IFtcIm5vbmVcIiwgXCJkdW1teVwiLCBcImNvbmZpZGVuY2VfbWFuaXBcIiwgXCJhaV9leHBsYW5hdGlvblwiLCBcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uXCIsIFwiYm90aF9leHBsYW5hdGlvbl90eXBlc1wiLCBcImFpX3RoaW5raW5nXCIsIFwiYWlfZm9yY2VkX3BhdXNlXCIsIFwiYm90aF9wYXVzZV90eXBlc1wiXVxubGV0IEFJSW50ZXJ2ZW50aW9uVHlwZSA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdHlwZVwiKVxuaWYgKEFJSW50ZXJ2ZW50aW9uVHlwZSA9PSBudWxsKSB7QUlJbnRlcnZlbnRpb25UeXBlID0gXCJub25lXCJ9IFxuaWYgKCF2YWxpZEludGVydmVudGlvblR5cGVzLmluY2x1ZGVzKEFJSW50ZXJ2ZW50aW9uVHlwZSEpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBSSBBc3Npc3RhbmNlIEludGVydmVudGlvbjogXCIgKyBBSUludGVydmVudGlvblR5cGUpXG59XG5cbmNvbnN0IHZhbGlkSW50ZXJ2ZW50aW9uU3RyYXRlZ2llcyA9IFtcImR1bW15XCIsIFwiZml4ZWRcIiwgXCJhZGFwdGl2ZVwiXVxubGV0IEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPSB1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3N0cmF0ZWd5XCIpXG5pZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBudWxsKSB7QUlJbnRlcnZlbnRpb25TdHJhdGVneSA9IFwiZHVtbXlcIn1cbmlmICghdmFsaWRJbnRlcnZlbnRpb25TdHJhdGVnaWVzLmluY2x1ZGVzKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3khKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQUkgQXNzaXN0YW5jZSBJbnRlcnZlbnRpb24gU3RyYXRlZ3k6IFwiICsgQUlJbnRlcnZlbnRpb25TdHJhdGVneSlcbn1cblxuLy8gSW50ZXJ2ZW50aW9uLXNwZWNpZmljIHBhcmFtZXRlcnNcbmxldCBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90aHJlc2hvbGRcIikpXG5pZiAoSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkID09IG51bGwpIHtJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQgPSAtMX1cbmxldCBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3RydXN0X3RocmVzaG9sZFwiKSlcbmlmIChJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCA9PSBudWxsKSB7SW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQgPSAwfVxubGV0IEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX2ZpeGVkY29uZmNoYW5nZVwiKSlcbmlmIChJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgPT0gbnVsbCkge0ludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA9IDB9XG5sZXQgSW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZCA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3VuZGVydHJ1c3RfdGhyZXNob2xkXCIpKVxuaWYgKEludGVydmVudGlvblVuZGVydHJ1c3RUaHJlc2hvbGQgPT0gbnVsbCkge0ludGVydmVudGlvblVuZGVydHJ1c3RUaHJlc2hvbGQgPSBJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZH1cbmxldCBJbnRlcnZlbnRpb25PdmVydHJ1c3RUaHJlc2hvbGQgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl9vdmVydHJ1c3RfdGhyZXNob2xkXCIpKVxuaWYgKEludGVydmVudGlvbk92ZXJ0cnVzdFRocmVzaG9sZCA9PSBudWxsKSB7SW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkID0gSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGR9XG5cbmxldCB1c2VyVHJ1c3RIZXVyaXN0aWMgPSB1cmxQYXJhbXMuZ2V0KFwidXNlcl90cnVzdF9oZXVyaXN0aWNcIilcbmlmICh1c2VyVHJ1c3RIZXVyaXN0aWMgPT0gbnVsbCkge3VzZXJUcnVzdEhldXJpc3RpYyA9IFwidXNlcl9yZXBvcnRlZFwifVxubGV0IHNtb290aGluZ1BhcmFtID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJzbW9vdGhpbmdfcGFyYW1cIikpXG5pZiAoc21vb3RoaW5nUGFyYW0gPT0gbnVsbCkge3Ntb290aGluZ1BhcmFtID0gMX1cblxubGV0IHNraXBfdHJ1c3RfcmVwb3J0aW5nID0gdXJsUGFyYW1zLmdldChcInNraXBfdHJ1c3RfcmVwb3J0aW5nXCIpID09IFwidHJ1ZVwiXG5pZiAoc2tpcF90cnVzdF9yZXBvcnRpbmcgPT0gbnVsbCkge3NraXBfdHJ1c3RfcmVwb3J0aW5nID0gZmFsc2V9XG5cbmxldCB1c2VMTE1Bc3Npc3RhbnQgPSB1cmxQYXJhbXMuZ2V0KFwidXNlX2xsbV9hc3Npc3RhbnRcIikgPT0gXCJ0cnVlXCJcbmlmICh1c2VMTE1Bc3Npc3RhbnQgPT0gbnVsbCkge3VzZUxMTUFzc2lzdGFudCA9IGZhbHNlfVxuXG5jb25zb2xlLmxvZyhcIkFJSW50ZXJ2ZW50aW9uR29hbDogXCIsIEFJSW50ZXJ2ZW50aW9uR29hbClcbmNvbnNvbGUubG9nKFwiQUlJbnRlcnZlbnRpb25UeXBlOiBcIiwgQUlJbnRlcnZlbnRpb25UeXBlKVxuY29uc29sZS5sb2coXCJBSUludGVydmVudGlvblN0cmF0ZWd5OiBcIiwgQUlJbnRlcnZlbnRpb25TdHJhdGVneSlcbmNvbnNvbGUubG9nKFwiSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkOiBcIiwgSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkKVxuY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZDogXCIsIEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb25VbmRlcnRydXN0VGhyZXNob2xkOiBcIiwgSW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZClcbmNvbnNvbGUubG9nKFwiSW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkOiBcIiwgSW50ZXJ2ZW50aW9uT3ZlcnRydXN0VGhyZXNob2xkKVxuY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2U6IFwiLCBJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UpXG5jb25zb2xlLmxvZyhcInVzZXJUcnVzdEhldXJpc3RpYzogXCIsIHVzZXJUcnVzdEhldXJpc3RpYylcbmNvbnNvbGUubG9nKFwic2tpcF90cnVzdF9yZXBvcnRpbmc6IFwiLCBza2lwX3RydXN0X3JlcG9ydGluZylcbmNvbnNvbGUubG9nKFwidXNlTExNQXNzaXN0YW50OiBcIiwgdXNlTExNQXNzaXN0YW50KVxuXG5pZiAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiKSB7XG4gICAgYXNzZXJ0KEludGVydmVudGlvblRydXN0VGhyZXNob2xkIDw9IDAsIFwiVHJ1c3QgdGhyZXNob2xkIGZvciBtaXRpZ2F0aW5nIHVuZGVydHJ1c3QgY2Fubm90IGJlIHBvc2l0aXZlLlwiKVxuICAgIGFzc2VydChJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgPj0gMCwgXCJDb25maWRlbmNlIGNoYW5nZSBmb3IgbWl0aWdhdGluZyB1bmRlcnRydXN0IGNhbm5vdCBiZSBuZWdhdGl2ZS5cIilcbn0gZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfb3ZlcnRydXN0XCIpIHtcbiAgICBhc3NlcnQoSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQgPj0gMCwgXCJUcnVzdCB0aHJlc2hvbGQgZm9yIG1pdGlnYXRpbmcgb3ZlcnRydXN0IGNhbm5vdCBiZSBuZWdhdGl2ZS5cIilcbiAgICBhc3NlcnQoSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlIDw9IDAsIFwiQ29uZmlkZW5jZSBjaGFuZ2UgZm9yIG1pdGlnYXRpbmcgb3ZlcnRydXN0IGNhbm5vdCBiZSBwb3NpdGl2ZS5cIilcbn1cblxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl9nb2FsXCJdID0gQUlJbnRlcnZlbnRpb25Hb2FsXG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX3R5cGVcIl0gPSBBSUludGVydmVudGlvblR5cGVcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fc3RyYXRlZ3lcIl0gPSBBSUludGVydmVudGlvblN0cmF0ZWd5XG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX3RocmVzaG9sZFwiXSA9IEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZFxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl9maXhlZGNvbmZjaGFuZ2VcIl0gPSBJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2Vcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJ1c2VyX3RydXN0X2hldXJpc3RpY1wiXSA9IHVzZXJUcnVzdEhldXJpc3RpY1xuZ2xvYmFsVGhpcy51cmxfZGF0YVtcInNraXBfdHJ1c3RfcmVwb3J0aW5nXCJdID0gc2tpcF90cnVzdF9yZXBvcnRpbmdcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJzbW9vdGhpbmdfcGFyYW1cIl0gPSBzbW9vdGhpbmdQYXJhbVxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcInVzZV9sbG1fYXNzaXN0YW50XCJdID0gdXNlTExNQXNzaXN0YW50XG5cbi8vIHZlcnNpb24gZm9yIHBhcGVyXG5pZiAoZ2xvYmFsVGhpcy51aWQuc3RhcnRzV2l0aChcImRlbW9fcGFwZXJcIikpIHtcbiAgICBNT0NLTU9ERSA9IHRydWVcbn0gZWxzZSB7XG5cbn1cbmNvbnNvbGUubG9nKFwiUnVubmluZyB3aXRoIFVJRFwiLCBnbG9iYWxUaGlzLnVpZClcbmxvYWRfZGF0YSgpLmNhdGNoKChfZXJyb3IpID0+IHtcbiAgICAvL2FsZXJ0KFwiSW52YWxpZCB1c2VyIGlkLlwiKVxuICAgIGNvbnNvbGUubG9nKFwiSW52YWxpZCB1c2VyIGlkLlwiKVxuICAgIGNvbnNvbGUubG9nKGdsb2JhbFRoaXMudWlkISlcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbn1cbikudGhlbigobmV3X2RhdGEpID0+IHtcbiAgICBkYXRhID0gbmV3X2RhdGFcbiAgICBpZiAoc3RhcnRPdmVycmlkZSAhPSBudWxsKSB7XG4gICAgICAgIHF1ZXN0aW9uX2kgPSBwYXJzZUludChzdGFydE92ZXJyaWRlKSAtIDFcbiAgICAgICAgY29uc29sZS5sb2coXCJTdGFydGluZyBmcm9tXCIsIHF1ZXN0aW9uX2kpXG4gICAgfVxuICAgIC8vIG5leHRfcXVlc3Rpb24oKVxuICAgIG5leHRfaW5zdHJ1Y3Rpb25zKDApXG4gICAgJChcIiNtYWluX2JveF9pbnN0cnVjdGlvbnNcIikuc2hvdygpXG4gICAgJChcIiNpbnN0cnVjdGlvbnNfYW5kX2RlY29yYXRpb25zXCIpLmhpZGUoKVxufSlcblxuY29uc29sZS5sb2coXCJTdGFydGluZyBzZXNzaW9uIHdpdGggVUlEOlwiLCBnbG9iYWxUaGlzLnVpZCEpXG5cbmxldCBhbGVydF9hY3RpdmUgPSBmYWxzZVxuZG9jdW1lbnQub252aXNpYmlsaXR5Y2hhbmdlID0gKCkgPT4ge1xuICAgIGlmICghYWxlcnRfYWN0aXZlKSB7XG4gICAgICAgIGNvdW50X2V4aXRlZF9wYWdlICs9IDFcbiAgICAgICAgYWxlcnRfYWN0aXZlID0gdHJ1ZVxuICAgICAgICBpZiAoIShnbG9iYWxUaGlzLnVpZCEuc3RhcnRzV2l0aChcImRlbW9cIikpICYmICEoREVWTU9ERSkpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiUGxlYXNlIGRvbid0IGxlYXZlIHRoZSBwYWdlLiBJZiB5b3UgZG8gc28gYWdhaW4sIHdlIG1heSByZXN0cmljdCBwYXlpbmcgeW91LlwiKVxuICAgICAgICB9XG4gICAgICAgIGFsZXJ0X2FjdGl2ZSA9IGZhbHNlXG4gICAgfVxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlNFUlZFUl9MT0dfUk9PVCIsImFzeW5jIiwibG9nX2RhdGEiLCJkYXRhIiwiTU9DS01PREUiLCJjb25zb2xlIiwibG9nIiwiZ2xvYmFsVGhpcyIsInVybF9kYXRhIiwidWlkIiwiJCIsImFqYXgiLCJKU09OIiwic3RyaW5naWZ5IiwicHJvamVjdCIsInJlcGxhY2UiLCJwYXlsb2FkIiwidHlwZSIsImNvbnRlbnRUeXBlIiwiZSIsImFjdGl2ZVRpbWVyIiwic3RhcnRUaW1lciIsImR1cmF0aW9uIiwic3RlcERpdiIsImJ1dHRvbnMiLCJjYWxsYmFjayIsIm1lc3NhZ2UiLCJzaG93VGltZVJlbWFpbmluZyIsImNsZWFySW50ZXJ2YWwiLCJmb3JFYWNoIiwiYnV0dG9uIiwic2V0QXR0cmlidXRlIiwidGltZXJEaXNwbGF5IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJzdHlsZSIsImZvbnRXZWlnaHQiLCJtYXJnaW5Ub3AiLCJhcHBlbmRDaGlsZCIsInJlbWFpbmluZ1RpbWUiLCJ0ZXh0Q29udGVudCIsInNldEludGVydmFsIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ3YWl0IiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJ0aW1lX3F1ZXN0aW9uX3N0YXJ0IiwidGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCIsInRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQiLCJ0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCIsInRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCIsInF1ZXN0aW9uX2kiLCJxdWVzdGlvbiIsImluaXRpYWxfdXNlcl9kZWNpc2lvbiIsImZpbmFsX3VzZXJfZGVjaXNpb24iLCJpbml0aWFsX3VzZXJfY29uZmlkZW5jZSIsImZpbmFsX3VzZXJfY29uZmlkZW5jZSIsImJhbGFuY2UiLCJ1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIiwicHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIiwiYmV0X3ZhbF9yYXRpbyIsImluc3RydWN0aW9uX2kiLCJjb3VudF9leGl0ZWRfcGFnZSIsInVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwiLCJpbnRlcnZlbnRpb25fZGV0YWlscyIsInRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEiLCJsbG1fcHJlZGljdGlvbl9yZXN1bHQiLCJwcmVfc3VydmV5X2Fuc3dlcjEiLCJwcmVfc3VydmV5X2Fuc3dlcjIiLCJhc3NlcnQiLCJjb25kaXRpb24iLCJuZXh0X2luc3RydWN0aW9ucyIsImluY3JlbWVudCIsInNraXBfdHJ1c3RfcmVwb3J0aW5nIiwiYXR0ciIsInJlbW92ZUF0dHIiLCJzaG93IiwidmFsIiwiaGlkZSIsIm5leHRfcXVlc3Rpb24iLCJjaGlsZHJlbiIsImVhY2giLCJfIiwiZWwiLCJtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbiIsIm9wdGlvbiIsIkRhdGUiLCJub3ciLCJnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UiLCJjb25mX2xldmVsIiwidXNlTExNQXNzaXN0YW50IiwiaHRtbCIsImxsbV9pbnB1dHMiLCJVU0VSX01PREVMU19ST09UIiwibW9kZWxfbmFtZSIsInByZXBhcmVfbGxtX2Fzc2lzdGFuY2UiLCJkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSIsInVzZXJfY3VycmVudF90cnVzdF9sZXZlbCIsInVzZXJUcnVzdEhldXJpc3RpYyIsIkFJSW50ZXJ2ZW50aW9uVHlwZSIsIkFJSW50ZXJ2ZW50aW9uR29hbCIsIkludGVydmVudGlvblRydXN0VGhyZXNob2xkIiwiQUlJbnRlcnZlbnRpb25TdHJhdGVneSIsImFpX2NvbmZpZGVuY2UiLCJOdW1iZXIiLCJuZXdfY29uZmlkZW5jZSIsIk1hdGgiLCJtaW4iLCJJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UiLCJtYXgiLCJTdHJpbmciLCJ0b0ZpeGVkIiwiY29uZmlkZW5jZV9jaGFuZ2UiLCJleHBsYW5hdGlvbl9zaG93biIsImdldEVsZW1lbnRCeUlkIiwiSW50ZXJ2ZW50aW9uVW5kZXJ0cnVzdFRocmVzaG9sZCIsIkludGVydmVudGlvbk92ZXJ0cnVzdFRocmVzaG9sZCIsImdldF9haV9hc3Npc3RhbmNlIiwibWFrZV9maW5hbF91c2VyX2RlY2lzaW9uIiwiZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSIsImNvcnJlY3Rfb3B0aW9uIiwidXNlcl9pc19jb3JyZWN0IiwiYWlfaXNfY29ycmVjdCIsInRleHQiLCJ0cnVzdF9lZmZlY3QiLCJwcmV2X2VzdGltYXRlZF90cnVzdF9sZXZlbCIsInNtb290aGluZ1BhcmFtIiwidXBkYXRlX3VzZXJfdHJ1c3RfbGV2ZWxfZXN0aW1hdGUiLCJzaG93X3Jlc3VsdCIsImxlbmd0aCIsInJhdGlvMSIsInJhdGlvMiIsIm9uIiwibG9nZ2VkX2RhdGEiLCJ0aGlzIiwidXJsUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJzdGFydE92ZXJyaWRlIiwiVUlERnJvbVVSTCIsImVudHJpZXMiLCJyZXN1bHQiLCJ2YWx1ZSIsInBhcmFtc1RvT2JqZWN0IiwicXVldWVfaWQiLCJmbG9vciIsInJhbmRvbSIsInBhZFN0YXJ0IiwiVUlEX21heWJlIiwicHJvbXB0IiwiaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzIiwiaW5jbHVkZXMiLCJFcnJvciIsIkludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCIsInN0YXJ0c1dpdGgiLCJnZXRKU09OIiwibG9hZF9kYXRhIiwiY2F0Y2giLCJfZXJyb3IiLCJyZWxvYWQiLCJ0aGVuIiwibmV3X2RhdGEiLCJwYXJzZUludCIsImFsZXJ0X2FjdGl2ZSIsIm9udmlzaWJpbGl0eWNoYW5nZSIsImFsZXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==