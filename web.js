(()=>{"use strict";var t={d:(i,n)=>{for(var e in n)t.o(n,e)&&!t.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:n[e]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};t.d({},{o:()=>o});let i="https://tejassrinivasan.pythonanywhere.com/",n=null;function e(t,i,e,o,a){n&&(clearInterval(n),n=null),e.forEach((t=>t.setAttribute("disabled","true")));let r=document.createElement("div");r.id=`timer_${i.id}`,r.style.fontWeight="bold",r.style.marginTop="10px",i.appendChild(r);let l=t;r.textContent=a+` You can make your selection in ${l} second(s).`,n=setInterval((()=>{l--,l>=0?r.textContent=a+` You can make your selection in ${l} second(s).`:(null!==n&&(clearInterval(n),n=null),n=null,i.removeChild(r),e.forEach((t=>t.removeAttribute("disabled"))),o&&o())}),1e3)}var o=!1,a=[];let r,l,c,_,s,d=-1,u=null,p=-1,f=-1,b=-1,v=-1,g=0,h=5,m=-1,A=1,x=0,w=0,y=0;var I={},T={};function k(t,i){if(!t)throw i||"Assertion failed"}function E(t){x+=t,R&&5==x&&(x+=t),0==x?$("#button_instructions_prev").attr("disabled","true"):$("#button_instructions_prev").removeAttr("disabled"),x>=6?($("#instructions_and_decorations").show(),$("#button_instructions_next").val("Start study")):($("#instructions_and_decorations").hide(),$("#button_instructions_next").val("Next")),7==x&&($("#main_box_instructions").hide(),$("#main_box_experiment").show(),D()),$("#main_box_instructions").children(":not(input)").each(((t,i)=>{$(i).hide()})),$(`#instructions_${x}`).show()}function N(t){_=Date.now(),p=t,k(1==t||2==t,"Invalid option!"),1==t?($("#button_initial_decision_option1").attr("activedecision","true"),$("#button_initial_decision_option2").removeAttr("activedecision")):($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").attr("activedecision","true")),$("#initial_user_confidence_div").show(),$("#button_initial_decision_option1").attr("disabled","true"),$("#button_initial_decision_option2").attr("disabled","true"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled")}function O(t){l=Date.now(),b=t,k(1==t||2==t||3==t,"Invalid option!"),1==t?($("#button_initial_confidence_option1").attr("activedecision","true"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision")):2==t?($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").attr("activedecision","true"),$("#button_initial_confidence_option3").removeAttr("activedecision")):($("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").attr("activedecision","true")),$("#button_initial_confidence_option1").attr("disabled","true"),$("#button_initial_confidence_option2").attr("disabled","true"),$("#button_initial_confidence_option3").attr("disabled","true"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),async function(){console.log("Getting AI assistance...");let t=u.ai_confidence,i=y;if("user_reported"==L&&(i=(h-5)/2.5,console.log("Using user reported trust value: ",h)),I={intervention_applied:!1,trust_level_at_start_of_interaction:i},"none"==F||p==u.ai_prediction)console.log("Not applying any intervention."),t=u.ai_confidence;else if("confidence_manip"==F)if("none"==Y||"mitigate_undertrust"==Y&&i<G||"mitigate_overtrust"==Y&&i>G){if(console.log("Applying AI confidence manipulation intervention."),"fixed"==M){let i=Number(u.ai_confidence.replace("%",""))/100,n=Math.min(1,i+J);n=Math.max(.5,n),t=String((100*n).toFixed(0))+"%";let e=(n-i).toFixed(2);console.log("Actual AI confidence: ",u.ai_confidence,", Confidence shown to user: ",t),I.conf_actual=u.ai_confidence,I.conf_displayed=t,I.conf_change=e,I.intervention_applied=!0}}else console.log("Conditions for applying 'confidence manipulation' intervention not satisfied.");else if("ai_explanation"==F)if("none"==Y||"mitigate_undertrust"==Y&&i<G||"mitigate_overtrust"==Y&&i>G){if(console.log("Applying AI explanation intervention."),"fixed"==M){console.log("Showing explanation");let t=u.ai_explanation?u.ai_explanation:"No explanation provided";$("#ai_explanation_span").html(t),$("#ai_explanation_div").show(),I.explanation_shown=t,I.intervention_applied=!0,e(15,document.getElementById("ai_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else console.log("Conditions for applying 'AI explanation' intervention not satisfied.");else if("ai_contrastive_explanation"==F)if("none"==Y||"mitigate_undertrust"==Y&&i<G||"mitigate_overtrust"==Y&&i>G){if(console.log("Applying AI explanation intervention."),"fixed"==M){console.log("Showing explanation");let t=u.ai_contrastive_explanation?u.ai_contrastive_explanation:"No explanation provided";$("#ai_contrastive_explanation_span").html(t),$("#ai_contrastive_explanation_div").show(),I.explanation_shown=t,I.intervention_applied=!0,e(10,document.getElementById("ai_contrastive_explanation_div"),[document.getElementById("button_final_decision_option1"),document.getElementById("button_final_decision_option2")],null,"Please read the explanation.")}}else console.log("Conditions for applying 'AI explanation' intervention not satisfied.");console.log("AI Assistance Intervention Details: ",I),$("#ai_prediction_span").html("Option "+u.ai_prediction),$("#ai_confidence_span").html(t),$("#ai_assistance_div").show(),$("#final_user_decision_div").show()}()}function S(t){s=Date.now(),f=t,k(1==t||2==t,"Invalid option!"),1==t?($("#button_final_decision_option1").attr("activedecision","true"),$("#button_final_decision_option2").removeAttr("activedecision")):($("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").attr("activedecision","true")),$("#final_user_confidence_div").show(),$("#button_final_decision_option1").attr("disabled","true"),$("#button_final_decision_option2").attr("disabled","true"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled")}function C(t){c=Date.now(),v=t,k(1==t||2==t||3==t,"Invalid option!"),1==t?($("#button_final_confidence_option1").attr("activedecision","true"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision")):2==t?($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").attr("activedecision","true"),$("#button_final_confidence_option3").removeAttr("activedecision")):($("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").attr("activedecision","true")),$("#button_final_confidence_option1").attr("disabled","true"),$("#button_final_confidence_option2").attr("disabled","true"),$("#button_final_confidence_option3").attr("disabled","true"),async function(){let t=u.correct_option,i=t==f,n=u.ai_is_correct,e="Correct answer: <b>Option "+t+"</b>.<br>";e+=i?"You picked Option "+f+", which was <span class='color_correct'><b>correct</b></span>.<br>":"You picked Option "+f+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",e+=n?"The AI picked Option "+u.ai_prediction+", which was <span class='color_correct'><b>correct<b></span>.<br>":"The AI picked Option "+u.ai_prediction+", which was <span class='color_incorrect'><b>incorrect</b></span>.<br>",i?(e+="<span class='color_correct'><b>You receive a reward of $0.10.</b></span>",g+=.1):e+="<span class='color_incorrect'><b>You do not receive any reward.</b></span>",e+="<br>",$("#balance").text(`Balance: $${g.toFixed(2)} + $1.0`),$("#result_span").html(e),$("#result_span").show(),R?$("#button_next").show():$("#user_trust_report_div").show(),function(){if("smoothed_confweighted_trust"==L){let t=Number(u.ai_confidence.replace("%",""))/100,i=u.ai_prediction==u.correct_option?t:-t,n=y;y=W*i+(1-W)*y,T={prev_estimated_trust_level:n,trust_effect:i,new_estimated_trust_level:y},console.log("Old estimated trust level: "+n+", trust effect: "+i+", new estimated trust level: "+y)}}()}()}function D(){if($("#button_initial_decision_option1").removeAttr("activedecision"),$("#button_initial_decision_option2").removeAttr("activedecision"),$("#button_initial_decision_option1").removeAttr("disabled"),$("#button_initial_decision_option2").removeAttr("disabled"),$("#button_initial_confidence_option1").removeAttr("activedecision"),$("#button_initial_confidence_option2").removeAttr("activedecision"),$("#button_initial_confidence_option3").removeAttr("activedecision"),$("#button_initial_confidence_option1").removeAttr("disabled"),$("#button_initial_confidence_option2").removeAttr("disabled"),$("#button_initial_confidence_option3").removeAttr("disabled"),$("#button_final_decision_option1").removeAttr("activedecision"),$("#button_final_decision_option2").removeAttr("activedecision"),$("#button_final_decision_option1").removeAttr("disabled"),$("#button_final_decision_option2").removeAttr("disabled"),$("#button_final_confidence_option1").removeAttr("activedecision"),$("#button_final_confidence_option2").removeAttr("activedecision"),$("#button_final_confidence_option3").removeAttr("activedecision"),$("#button_final_confidence_option1").removeAttr("disabled"),$("#button_final_confidence_option2").removeAttr("disabled"),$("#button_final_confidence_option3").removeAttr("disabled"),$("#ai_assistance_div").hide(),$("#ai_explanation_div").hide(),$("#ai_contrastive_explanation_div").hide(),$("#initial_user_confidence_div").hide(),$("#final_user_decision_div").hide(),$("#final_user_confidence_div").hide(),$("#range_val").removeAttr("disabled"),$("#user_trust_report_div").hide(),$("#button_place_bet").hide(),$("#button_next").hide(),$("#result_span").hide(),-1==d?$("#range_text").text("-"):$("#range_text").text(`Before this interaction, your trust in the AI: ${10*h} / 100.`),$("#range_val").val(h),m=h,d+=1,d>=a.length)return $("#main_box_experiment").hide(),void(o?$("#main_box_end_mock").show():$("#main_box_end").show());if(u=a[d],$("#question_span").html(u.question),$("#option1_span").html(u.option1),$("#option2_span").html(u.option2),u.hasOwnProperty("reward_ratio")){let[t,i]=u.reward_ratio;t=Number(t),i=Number(i),A=t/i}else A=1;r=Date.now(),$("#progress").text(`Progress: ${d+1} / ${a.length}`),e(10,document.getElementById("initial_user_decision_div"),[document.getElementById("button_initial_decision_option1"),document.getElementById("button_initial_decision_option2")],null,"Please read the question and options closely.")}$("#button_instructions_next").on("click",(()=>E(1))),$("#button_instructions_prev").on("click",(()=>E(-1))),$("#button_next").on("click",(()=>{if(-1!=d){let t={question_i:d,user_balance_post_interaction:g,user_trust_val_before:m,user_trust_val_after:h,initial_user_decision:p,final_user_decision:f,initial_user_confidence:b,final_user_confidence:v};t.times={initial_decision:_-r,initial_confidence:l-_,final_decision:s-l,final_confidence:c-s,trust_decision:Date.now()-c},t.question=u,t.count_exited_page=w,t.intervention_details=I,t.trust_effect_prediction_data=T,async function(t){if(o)console.log("logged (mock)",t);else{t.url_data=globalThis.url_data,console.log("Data"),"study_id"in t.url_data||(t.url_data.study_id="trialrun_studies"),t.url_data.queue_id=globalThis.uid,console.log("logged",t),console.log("Logging to",i+"log");try{return await $.ajax(i+"log",{data:JSON.stringify({project:"2step-trust-study-interventions/"+t.url_data.study_id,uid:globalThis.uid.replace("/","_")+"_"+t.url_data.prolific_id,payload:JSON.stringify(t)}),type:"POST",contentType:"application/json"})}catch(t){console.log(t)}}}(t),w=0}D()})),$("#range_val").on("input change",(function(){h=$(this).val(),$("#range_text").text(`After this interaction, your current trust in the AI: ${10*h} / 100.`),$("#button_next").show()})),$("#button_initial_decision_option1").on("click",(()=>N(1))),$("#button_initial_decision_option2").on("click",(()=>N(2))),$("#button_initial_confidence_option1").on("click",(()=>O(1))),$("#button_initial_confidence_option2").on("click",(()=>O(2))),$("#button_initial_confidence_option3").on("click",(()=>O(3))),$("#button_final_decision_option1").on("click",(()=>S(1))),$("#button_final_decision_option2").on("click",(()=>S(2))),$("#button_final_confidence_option1").on("click",(()=>C(1))),$("#button_final_confidence_option2").on("click",(()=>C(2))),$("#button_final_confidence_option3").on("click",(()=>C(3)));const B=new URLSearchParams(window.location.search),P=B.get("start"),q=B.get("uid");if(globalThis.url_data=function(t){const i={};for(const[n,e]of t)i[n]=e;return i}(B.entries()),null!=q){if(globalThis.uid=q,"prolific_random"==globalThis.uid){let t=`${Math.floor(10*Math.random())}`.padStart(3,"0");globalThis.uid=`${B.get("prolific_queue_name")}/${t}`}}else{let t=null;for(;null==t;)t=prompt("Enter your user id. Please get in touch if you were not assigned an id but wish to participate in this experiment.");globalThis.uid=t}let j=null;globalThis.uid.includes("343")||globalThis.uid.includes("434")?j=[7,8,9,17,18,19,27,28,29]:globalThis.uid.includes("735")&&(j=[10,11,12,13,14,25,26,27,28,29]);let Y=B.get("intervention_goal");if(null==Y&&(Y="none"),!["none","mitigate_undertrust","mitigate_overtrust"].includes(Y))throw new Error("Invalid AI Assistance Intervention Goal: "+Y);let F=B.get("intervention_type");if(null==F&&(F="none"),!["none","dummy","confidence_manip","ai_explanation","ai_contrastive_explanation"].includes(F))throw new Error("Invalid AI Assistance Intervention: "+F);let M=B.get("intervention_strategy");if(null==M&&(M="dummy"),!["dummy","fixed","adaptive"].includes(M))throw new Error("Invalid AI Assistance Intervention Strategy: "+M);let U=Number(B.get("intervention_threshold"));null==U&&(U=-1);let G=Number(B.get("intervention_trust_threshold"));null==G&&(G=0);let J=Number(B.get("intervention_fixedconfchange"));null==J&&(J=0);let L=B.get("user_trust_heuristic");null==L&&(L="user_reported");let W=Number(B.get("smoothing_param"));null==W&&(W=1);let R="true"==B.get("skip_trust_reporting");null==R&&(R=!1),console.log("AIInterventionGoal: ",Y),console.log("AIInterventionType: ",F),console.log("AIInterventionStrategy: ",M),console.log("InterventionALDiffThreshold: ",U),console.log("InterventionTrustThreshold: ",G),console.log("InterventionFixedConfChange: ",J),console.log("userTrustHeuristic: ",L),console.log("skip_trust_reporting: ",R),"mitigate_undertrust"==Y?(k(G<=0,"Trust threshold for mitigating undertrust cannot be positive."),k(J>=0,"Confidence change for mitigating undertrust cannot be negative.")):"mitigate_overtrust"==Y&&(k(G>=0,"Trust threshold for mitigating overtrust cannot be negative."),k(J<=0,"Confidence change for mitigating overtrust cannot be positive.")),globalThis.url_data.intervention_goal=Y,globalThis.url_data.intervention_type=F,globalThis.url_data.intervention_strategy=M,globalThis.url_data.intervention_threshold=U,globalThis.url_data.intervention_fixedconfchange=J,globalThis.url_data.user_trust_heuristic=L,globalThis.url_data.skip_trust_reporting=R,globalThis.url_data.smoothing_param=W,globalThis.uid.startsWith("demo_paper")&&(o=!0),console.log("Running with UID",globalThis.uid),async function(){return await $.getJSON(`baked_queues/${globalThis.uid}.json?t=${Date.now()}`)}().catch((t=>{console.log("Invalid user id."),console.log(globalThis.uid),window.location.reload()})).then((t=>{a=t,null!=P&&(d=parseInt(P)-1,console.log("Starting from",d)),E(0),$("#main_box_instructions").show(),$("#instructions_and_decorations").hide()})),console.log("Starting session with UID:",globalThis.uid);let H=!1;document.onvisibilitychange=()=>{H||(w+=1,H=!0,globalThis.uid.startsWith("demo")||alert("Please don't leave the page. If you do so again, we may restrict paying you."),H=!1)}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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akMsV0FBV0MsU0FBdUMsNkJBQUkxQixFQUN0RHlCLFdBQVdDLFNBQStCLHFCQUFJckMsRUFDOUNvQyxXQUFXQyxTQUErQixxQkFBSTVELEVBQzlDMkQsV0FBV0MsU0FBMEIsZ0JBQUlULEVBR3JDUSxXQUFXRSxJQUFJZ0MsV0FBVyxnQkFDMUJ2SCxHQUFXLEdBSWY2QyxRQUFRQyxJQUFJLG1CQUFvQnVDLFdBQVdFLEtGendCcEMzQyxpQkFLSCxhQUhtQmpCLEVBQUU2RixRQUNqQixnQkFBZ0JuQyxXQUFXRSxjQUFjL0MsS0FBS0MsUUFHdEQsQ0Vvd0JBZ0YsR0FBWUMsT0FBT0MsSUFFZjlFLFFBQVFDLElBQUksb0JBQ1pELFFBQVFDLElBQUl1QyxXQUFXRSxLQUN2QmEsT0FBT0MsU0FBU3VCLFFBQVEsSUFFMUJDLE1BQU1DLElBQ0o3SCxFQUFPNkgsRUFDYyxNQUFqQnZCLElBQ0FoRyxFQUFhd0gsU0FBU3hCLEdBQWlCLEVBQ3ZDMUQsUUFBUUMsSUFBSSxnQkFBaUJ2QyxJQUdqQ2lCLEVBQWtCLEdBQ2xCRyxFQUFFLDBCQUEwQkcsT0FDNUJILEVBQUUsaUNBQWlDSyxNQUFNLElBRzdDYSxRQUFRQyxJQUFJLDZCQUE4QnVDLFdBQVdFLEtBRXJELElBQUl5QyxHQUFlLEVBQ25CNUksU0FBUzZJLG1CQUFxQixLQUNyQkQsSUFDRDlHLEdBQXFCLEVBQ3JCOEcsR0FBZSxFQUNUM0MsV0FBV0UsSUFBS2dDLFdBQVcsU0FDN0JXLE1BQU0sZ0ZBRVZGLEdBQWUsRSIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovLy8uL3NyYy9jb25uZWN0b3IudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLnRzIiwid2VicGFjazovLy8uL3NyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiaW1wb3J0IHsgREVWTU9ERSB9IGZyb20gJy4vZ2xvYmFscydcbmltcG9ydCB7IE1PQ0tNT0RFIH0gZnJvbSAnLi9tYWluJ1xuXG5sZXQgU0VSVkVSX0xPR19ST09UID0gREVWTU9ERSA/IFwiaHR0cDovLzEyNy4wLjAuMTo1MDAwL1wiIDogXCJodHRwczovL3RlamFzc3Jpbml2YXNhbi5weXRob25hbnl3aGVyZS5jb20vXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRfZGF0YSgpOiBQcm9taXNlPGFueT4ge1xuICAgIC8vIGluY2x1ZGUgdGltZXN0YW1wIHNvIHRoYXQgdGhpbmdzIGRvbid0IGdldCBjYWNoZWRcbiAgICBsZXQgcmVzdWx0ID0gYXdhaXQgJC5nZXRKU09OKFxuICAgICAgICBgYmFrZWRfcXVldWVzLyR7Z2xvYmFsVGhpcy51aWR9Lmpzb24/dD0ke0RhdGUubm93KCl9YCxcbiAgICApXG4gICAgcmV0dXJuIHJlc3VsdFxufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ19kYXRhKGRhdGEpOiBQcm9taXNlPGFueT4ge1xuICAgIGlmIChNT0NLTU9ERSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImxvZ2dlZCAobW9jaylcIiwgZGF0YSlcbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgZGF0YVtcInVybF9kYXRhXCJdID0gZ2xvYmFsVGhpcy51cmxfZGF0YVxuICAgIGNvbnNvbGUubG9nKFwiRGF0YVwiKVxuICAgIGlmICghKFwic3R1ZHlfaWRcIiBpbiBkYXRhWyd1cmxfZGF0YSddKSkge1xuICAgICAgICBkYXRhWyd1cmxfZGF0YSddW1wic3R1ZHlfaWRcIl0gPSBcInRyaWFscnVuX3N0dWRpZXNcIlxuICAgIH1cbiAgICBkYXRhW1widXJsX2RhdGFcIl1bXCJxdWV1ZV9pZFwiXSA9IGdsb2JhbFRoaXMudWlkXG4gICAgY29uc29sZS5sb2coXCJsb2dnZWRcIiwgZGF0YSlcbiAgICBjb25zb2xlLmxvZyhcIkxvZ2dpbmcgdG9cIiwgU0VSVkVSX0xPR19ST09UICsgXCJsb2dcIilcblxuICAgIHRyeSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBTRVJWRVJfTE9HX1JPT1QgKyBcImxvZ1wiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCIyc3RlcC10cnVzdC1zdHVkeS1pbnRlcnZlbnRpb25zL1wiICsgZGF0YVsndXJsX2RhdGEnXVsnc3R1ZHlfaWQnXSxcbiAgICAgICAgICAgICAgICAgICAgdWlkOiBnbG9iYWxUaGlzLnVpZC5yZXBsYWNlKFwiL1wiLCBcIl9cIikgKyBcIl9cIiArIGRhdGFbJ3VybF9kYXRhJ11bJ3Byb2xpZmljX2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQ6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxufSIsImltcG9ydCB7IEVOQUJMRV9USU1FUiB9IGZyb20gJy4vZ2xvYmFscyc7XG5cbmZ1bmN0aW9uIHBhcmFtc1RvT2JqZWN0KGVudHJpZXMpIHtcbiAgY29uc3QgcmVzdWx0ID0ge31cbiAgLy8gZWFjaCAnZW50cnknIGlzIGEgW2tleSwgdmFsdWVdIHR1cHBsZVxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBlbnRyaWVzKSB7XG4gICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5sZXQgYWN0aXZlVGltZXI6IFJldHVyblR5cGU8dHlwZW9mIHNldEludGVydmFsPiB8IG51bGwgPSBudWxsOyAvLyBUaW1lciBpbnRlcnZhbFxuXG5mdW5jdGlvbiBzdGFydFRpbWVyKGR1cmF0aW9uLCBzdGVwRGl2LCBidXR0b25zLCBjYWxsYmFjaywgbWVzc2FnZSkge1xuICBpZiAoIUVOQUJMRV9USU1FUikge1xuICAgICAgLy8gSWYgdGhlIHRpbWVyIGlzIGRpc2FibGVkLCBlbmFibGUgdGhlIGJ1dHRvbnMgaW1tZWRpYXRlbHlcbiAgICAgIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpKTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIENsZWFyIGFueSBleGlzdGluZyB0aW1lciB0byBwcmV2ZW50IG11bHRpcGxlIGludGVydmFsc1xuICBpZiAoYWN0aXZlVGltZXIpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoYWN0aXZlVGltZXIpO1xuICAgICAgYWN0aXZlVGltZXIgPSBudWxsO1xuICB9XG5cbiAgLy8gRGlzYWJsZSBidXR0b25zXG4gIGJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4gYnV0dG9uLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKSk7XG4gIFxuICAvLyBTaG93IHRpbWVyIHZpc3VhbGx5XG4gIGxldCB0aW1lckRpc3BsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdGltZXJEaXNwbGF5LmlkID0gYHRpbWVyXyR7c3RlcERpdi5pZH1gO1xuICB0aW1lckRpc3BsYXkuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgdGltZXJEaXNwbGF5LnN0eWxlLm1hcmdpblRvcCA9ICcxMHB4JztcbiAgc3RlcERpdi5hcHBlbmRDaGlsZCh0aW1lckRpc3BsYXkpO1xuXG4gIGxldCByZW1haW5pbmdUaW1lID0gZHVyYXRpb247XG5cbiAgLy8gSW5pdGlhbCBkaXNwbGF5XG4gIHRpbWVyRGlzcGxheS50ZXh0Q29udGVudCA9IG1lc3NhZ2UgKyBgIFlvdSBjYW4gbWFrZSB5b3VyIHNlbGVjdGlvbiBpbiAke3JlbWFpbmluZ1RpbWV9IHNlY29uZChzKS5gO1xuXG4gIGFjdGl2ZVRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgcmVtYWluaW5nVGltZS0tO1xuICAgICAgaWYgKHJlbWFpbmluZ1RpbWUgPj0gMCkge1xuICAgICAgICAgIHRpbWVyRGlzcGxheS50ZXh0Q29udGVudCA9IG1lc3NhZ2UgKyBgIFlvdSBjYW4gbWFrZSB5b3VyIHNlbGVjdGlvbiBpbiAke3JlbWFpbmluZ1RpbWV9IHNlY29uZChzKS5gO1xuICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIGlmIChhY3RpdmVUaW1lciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBjbGVhckludGVydmFsKGFjdGl2ZVRpbWVyKTsgLy8gU3RvcCB0aGUgdGltZXJcbiAgICAgICAgICAgICAgYWN0aXZlVGltZXIgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhY3RpdmVUaW1lciA9IG51bGw7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgdGltZXIgZGlzcGxheVxuICAgICAgICAgIHN0ZXBEaXYucmVtb3ZlQ2hpbGQodGltZXJEaXNwbGF5KTtcblxuICAgICAgICAgIC8vIEVuYWJsZSBidXR0b25zXG4gICAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpO1xuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuICAgICAgfVxuICB9LCAxMDAwKTtcbn1cblxuZXhwb3J0IHsgcGFyYW1zVG9PYmplY3QsIHN0YXJ0VGltZXIgfTsiLCJpbXBvcnQgeyBERVZNT0RFIH0gZnJvbSBcIi4vZ2xvYmFsc1wiXG5leHBvcnQgdmFyIFVJRDogc3RyaW5nXG5leHBvcnQgdmFyIE1PQ0tNT0RFOiBib29sZWFuID0gZmFsc2VcbmltcG9ydCB7IGxvYWRfZGF0YSwgbG9nX2RhdGEgfSBmcm9tICcuL2Nvbm5lY3RvcidcbmltcG9ydCB7IHBhcmFtc1RvT2JqZWN0LCBzdGFydFRpbWVyIH0gZnJvbSBcIi4vdXRpbHNcIlxuLy9pbXBvcnQgeyBnZXRfdXNlcl90cnVzdF9lZmZlY3QsIGdldF9hZGp1c3RlZF9haV9jb25maWRlbmNlfSBmcm9tIFwiLi9ydW5fdXNlcl9tb2RlbHNcIlxuXG5sZXQgVVNFUl9NT0RFTFNfUk9PVCA9IFwiaHR0cHM6Ly90ZWphc3NyaW5pdmFzYW4ucHl0aG9uYW55d2hlcmUuY29tL1wiXG5sZXQgdXNlcl9kZWNpc2lvbl9tb2RlbCA9IFwidXNlcl9hY2NlcHRhbmNlX21vZGVsLWxvZ2lzdGljcmVncmVzc2lvbi0wLjkzNDd0ZXN0ZjFcIlxubGV0IHRydXN0X2VmZmVjdF9tb2RlbCA9IFwidHJ1c3RfZWZmZWN0X21vZGVsLXN2bV9saW5lYXItMC40NjQ0dGVzdG1hZS0wLjkwOTV0ZXN0dGVkYVwiXG5cbnZhciBkYXRhOiBhbnlbXSA9IFtdXG5sZXQgcXVlc3Rpb25faSA9IC0xXG5sZXQgcXVlc3Rpb246IGFueSA9IG51bGxcbmxldCBpbml0aWFsX3VzZXJfZGVjaXNpb246IG51bWJlciA9IC0xXG5sZXQgZmluYWxfdXNlcl9kZWNpc2lvbjogbnVtYmVyID0gLTFcbmxldCBpbml0aWFsX3VzZXJfY29uZmlkZW5jZTogbnVtYmVyID0gLTFcbmxldCBmaW5hbF91c2VyX2NvbmZpZGVuY2U6IG51bWJlciA9IC0xXG5sZXQgYmFsYW5jZSA9IDBcblxubGV0IHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWw6IG51bWJlciA9IDVcbmxldCBwcmV2X3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWw6IG51bWJlciA9IC0xXG5cbmxldCBiZXRfdmFsX3JhdGlvOiBudW1iZXIgPSAxXG5sZXQgdGltZV9xdWVzdGlvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV90cnVzdF9kZWNpc2lvbl9zdGFydDogbnVtYmVyXG5sZXQgdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQ6IG51bWJlclxubGV0IHRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydDogbnVtYmVyXG5sZXQgaW5zdHJ1Y3Rpb25faTogbnVtYmVyID0gMFxubGV0IGNvdW50X2V4aXRlZF9wYWdlOiBudW1iZXIgPSAwXG5cbmxldCBpbnRlcnZlbnRpb25fY29uZGl0aW9uX3NhdGlzZmllZDogYm9vbGVhbiA9IGZhbHNlXG5sZXQgaW50ZXJ2ZW50aW9uX2FwcGxpZWQ6IGJvb2xlYW4gPSBmYWxzZVxuXG5sZXQgdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbDogbnVtYmVyID0gMFxuXG52YXIgYWxsX3VzZXJfaW50ZXJhY3Rpb25zID0gW11cbnZhciBpbnRlcnZlbnRpb25fZGV0YWlscyA9IHt9XG52YXIgdHJ1c3RfZWZmZWN0X3ByZWRpY3Rpb25fZGF0YSA9IHt9XG5sZXQgZmluZG5ld2NvbmZfcmVzdWx0OiBhbnlcblxuZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICAgIHRocm93IG1lc3NhZ2UgfHwgXCJBc3NlcnRpb24gZmFpbGVkXCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBuZXh0X2luc3RydWN0aW9ucyhpbmNyZW1lbnQ6IG51bWJlcikge1xuICAgIGluc3RydWN0aW9uX2kgKz0gaW5jcmVtZW50XG4gICAgaWYgKHNraXBfdHJ1c3RfcmVwb3J0aW5nICYmIGluc3RydWN0aW9uX2kgPT0gNSkge1xuICAgICAgICBpbnN0cnVjdGlvbl9pICs9IGluY3JlbWVudFxuICAgIH1cblxuICAgIGlmIChpbnN0cnVjdGlvbl9pID09IDApIHtcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX3ByZXZcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgIH1cbiAgICBpZiAoaW5zdHJ1Y3Rpb25faSA+PSA2KSB7XG4gICAgICAgICQoXCIjaW5zdHJ1Y3Rpb25zX2FuZF9kZWNvcmF0aW9uc1wiKS5zaG93KClcbiAgICAgICAgJChcIiNidXR0b25faW5zdHJ1Y3Rpb25zX25leHRcIikudmFsKFwiU3RhcnQgc3R1ZHlcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG4gICAgICAgICQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19uZXh0XCIpLnZhbChcIk5leHRcIilcbiAgICB9XG4gICAgaWYgKGluc3RydWN0aW9uX2kgPT0gNykge1xuICAgICAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5oaWRlKClcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLnNob3coKVxuICAgICAgICBuZXh0X3F1ZXN0aW9uKClcbiAgICB9XG5cbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5jaGlsZHJlbihcIjpub3QoaW5wdXQpXCIpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgICQoZWwpLmhpZGUoKVxuICAgIH0pXG4gICAgJChgI2luc3RydWN0aW9uc18ke2luc3RydWN0aW9uX2l9YCkuc2hvdygpXG59XG4kKFwiI2J1dHRvbl9pbnN0cnVjdGlvbnNfbmV4dFwiKS5vbihcImNsaWNrXCIsICgpID0+IG5leHRfaW5zdHJ1Y3Rpb25zKCsxKSlcbiQoXCIjYnV0dG9uX2luc3RydWN0aW9uc19wcmV2XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbmV4dF9pbnN0cnVjdGlvbnMoLTEpKVxuXG4kKFwiI2J1dHRvbl9uZXh0XCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGlmIChxdWVzdGlvbl9pICE9IC0xKSB7XG4gICAgICAgIGxldCBsb2dnZWRfZGF0YSA9IHtcbiAgICAgICAgICAgIFwicXVlc3Rpb25faVwiOiBxdWVzdGlvbl9pLFxuICAgICAgICAgICAgXCJ1c2VyX2JhbGFuY2VfcG9zdF9pbnRlcmFjdGlvblwiOiBiYWxhbmNlLFxuICAgICAgICAgICAgXCJ1c2VyX3RydXN0X3ZhbF9iZWZvcmVcIjogcHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsLFxuICAgICAgICAgICAgXCJ1c2VyX3RydXN0X3ZhbF9hZnRlclwiOiB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsLFxuICAgICAgICAgICAgXCJpbml0aWFsX3VzZXJfZGVjaXNpb25cIjogaW5pdGlhbF91c2VyX2RlY2lzaW9uLFxuICAgICAgICAgICAgXCJmaW5hbF91c2VyX2RlY2lzaW9uXCI6IGZpbmFsX3VzZXJfZGVjaXNpb24sXG4gICAgICAgICAgICBcImluaXRpYWxfdXNlcl9jb25maWRlbmNlXCI6IGluaXRpYWxfdXNlcl9jb25maWRlbmNlLFxuICAgICAgICAgICAgXCJmaW5hbF91c2VyX2NvbmZpZGVuY2VcIjogZmluYWxfdXNlcl9jb25maWRlbmNlLFxuICAgICAgICB9XG5cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ3RpbWVzJ10gPSB7XG4gICAgICAgICAgICBcImluaXRpYWxfZGVjaXNpb25cIjogdGltZV9pbml0aWFsX2NvbmZpZGVuY2Vfc3RhcnQgLSB0aW1lX3F1ZXN0aW9uX3N0YXJ0LFxuICAgICAgICAgICAgXCJpbml0aWFsX2NvbmZpZGVuY2VcIjogdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCAtIHRpbWVfaW5pdGlhbF9jb25maWRlbmNlX3N0YXJ0LFxuICAgICAgICAgICAgXCJmaW5hbF9kZWNpc2lvblwiOiB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgLSB0aW1lX2ZpbmFsX2RlY2lzaW9uX3N0YXJ0LFxuICAgICAgICAgICAgXCJmaW5hbF9jb25maWRlbmNlXCI6IHRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQgLSB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQsXG4gICAgICAgICAgICBcInRydXN0X2RlY2lzaW9uXCI6IERhdGUubm93KCkgLSB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0LFxuICAgICAgICB9XG4gICAgICAgIGxvZ2dlZF9kYXRhWydxdWVzdGlvbiddID0gcXVlc3Rpb25cbiAgICAgICAgbG9nZ2VkX2RhdGFbJ2NvdW50X2V4aXRlZF9wYWdlJ10gPSBjb3VudF9leGl0ZWRfcGFnZVxuICAgICAgICBsb2dnZWRfZGF0YVsnaW50ZXJ2ZW50aW9uX2RldGFpbHMnXSA9IGludGVydmVudGlvbl9kZXRhaWxzXG4gICAgICAgIGxvZ2dlZF9kYXRhWyd0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhJ10gPSB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhXG4gICAgICAgIGxvZ19kYXRhKGxvZ2dlZF9kYXRhKVxuICAgICAgICBjb3VudF9leGl0ZWRfcGFnZSA9IDBcblxuICAgIH1cbiAgICBuZXh0X3F1ZXN0aW9uKClcbn0pO1xuXG4kKCcjcmFuZ2VfdmFsJykub24oJ2lucHV0IGNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICB1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsID0gKCQodGhpcykudmFsKCkhIGFzIG51bWJlcilcbiAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChgQWZ0ZXIgdGhpcyBpbnRlcmFjdGlvbiwgeW91ciBjdXJyZW50IHRydXN0IGluIHRoZSBBSTogJHt1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsICogMTB9IC8gMTAwLmApXG4gICAgJChcIiNidXR0b25fbmV4dFwiKS5zaG93KClcbn0pO1xuXG5mdW5jdGlvbiBtYWtlX2luaXRpYWxfdXNlcl9kZWNpc2lvbihvcHRpb24pIHtcbiAgICB0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCA9IERhdGUubm93KClcbiAgICBpbml0aWFsX3VzZXJfZGVjaXNpb24gPSBvcHRpb25cbiAgICBhc3NlcnQob3B0aW9uID09IDEgfHwgb3B0aW9uID09IDIsIFwiSW52YWxpZCBvcHRpb24hXCIpXG4gICAgaWYgKG9wdGlvbiA9PSAxKSB7XG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgICQoXCIjaW5pdGlhbF91c2VyX2NvbmZpZGVuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbn1cbiQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5vbihcImNsaWNrXCIsICgpID0+IG1ha2VfaW5pdGlhbF91c2VyX2RlY2lzaW9uKDEpKVxuJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24oMikpXG5cbmZ1bmN0aW9uIGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZShjb25mX2xldmVsKSB7XG4gICAgdGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCA9IERhdGUubm93KClcbiAgICBpbml0aWFsX3VzZXJfY29uZmlkZW5jZSA9IGNvbmZfbGV2ZWxcbiAgICBhc3NlcnQoY29uZl9sZXZlbCA9PSAxIHx8IGNvbmZfbGV2ZWwgPT0gMiB8fCBjb25mX2xldmVsID09IDMsIFwiSW52YWxpZCBvcHRpb24hXCIpXG4gICAgaWYgKGNvbmZfbGV2ZWwgPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2UgaWYgKGNvbmZfbGV2ZWwgPT0gMikge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG5cbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjJcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpICAgIFxuXG4gICAgZ2V0X2FpX2Fzc2lzdGFuY2UoKVxufVxuJChcIiNidXR0b25faW5pdGlhbF9jb25maWRlbmNlX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfaW5pdGlhbF91c2VyX2NvbmZpZGVuY2UoMSkpXG4kKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9pbml0aWFsX3VzZXJfY29uZmlkZW5jZSgyKSlcbiQoXCIjYnV0dG9uX2luaXRpYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlKDMpKVxuXG5cblxuYXN5bmMgZnVuY3Rpb24gZ2V0X3VzZXJfZGVjaXNpb25fcHJvYigpIHtcbiAgICAvLyBQcmVwYXJlIGlucHV0cyBmb3IgdGhlIHVzZXIgZGVjaXNpb24gbW9kZWxcbiAgICBsZXQgdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCA9IE51bWJlcihpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICBsZXQgdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UgPSBpbml0aWFsX3VzZXJfY29uZmlkZW5jZVxuICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgbGV0IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICBpZiAodXNlclRydXN0SGV1cmlzdGljID09IFwidXNlcl9yZXBvcnRlZFwiKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzID0ge1xuICAgICAgICBcInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnRcIjogdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCxcbiAgICAgICAgXCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZVwiOiB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgIH1cblxuICAgIGxldCByZXN1bHQ6IGFueVxuICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImdldF91c2VyX2RlY2lzaW9uX3Byb2JcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwiMnN0ZXAtdHJ1c3Qtc3R1ZHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxfbmFtZTogdXNlcl9kZWNpc2lvbl9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkodXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfVxuICAgICAgICApXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SIVwiKVxuICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBcInVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzXCI6IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzLCBcbiAgICAgICAgXCJ1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZFwiOiByZXN1bHRbXCJwcmVkX3Byb2JzXCJdWzBdWzFdXG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBleGFtaW5lX2VmZmVjdF9vZl90cnVzdF9vbl9kZWNpc2lvbl9tYWtpbmcoKSB7XG4gICAgLy8gUHJlcGFyZSBpbnB1dCB2YXJpYWJsZXMgZm9yIHVzZXIgZGVjaXNpb24gbW9kZWxcbiAgICBsZXQgdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCA9IE51bWJlcihpbml0aWFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiYWlfcHJlZGljdGlvblwiXSlcbiAgICBsZXQgdXNlcl9pbml0aWFsX2NvbmZpZGVuY2UgPSBpbml0aWFsX3VzZXJfY29uZmlkZW5jZVxuICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgbGV0IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICBpZiAodXNlclRydXN0SGV1cmlzdGljID09IFwidXNlcl9yZXBvcnRlZFwiKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICB9XG4gICAgbGV0IHVzZXJfZGVjaXNpb25fbW9kZWxfaW5wdXRzID0ge1xuICAgICAgICBcInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnRcIjogdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCxcbiAgICAgICAgXCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZVwiOiB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCxcbiAgICAgICAgXCJ0aW1lc3RlcFwiOiBxdWVzdGlvbl9pLFxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIlVzZXIgZGVjaXNpb24gbW9kZWwgaW5wdXRzOiBcIiwgdXNlcl9kZWNpc2lvbl9tb2RlbF9pbnB1dHMpXG5cbiAgICBsZXQgYWxkaWZmX3Jlc3VsdDogYW55XG4gICAgdHJ5IHtcbiAgICAgICAgYWxkaWZmX3Jlc3VsdCA9IGF3YWl0ICQuYWpheChcbiAgICAgICAgICAgIFVTRVJfTU9ERUxTX1JPT1QgKyBcImV4YW1pbmVfZWZmZWN0X29mX3RydXN0X29uX2RlY2lzaW9uX21ha2luZ1wiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdDogXCIyc3RlcC10cnVzdC1zdHVkeVwiLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbF9uYW1lOiB1c2VyX2RlY2lzaW9uX21vZGVsLFxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBKU09OLnN0cmluZ2lmeSh1c2VyX2RlY2lzaW9uX21vZGVsX2lucHV0cyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGFsZGlmZl9yZXN1bHRcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmluZF9iZXN0X2FpY29uZl90b19kaXNwbGF5KHVzZXJfYWNjZXB0YW5jZV9saWtlbGlob29kX25ldXRyYWxfdHJ1c3QpIHtcbiAgICAvLyBQcmVwYXJlIGlucHV0IHZhcmlhYmxlcyBmb3IgdXNlciBkZWNpc2lvbiBtb2RlbFxuICAgIGxldCB1c2VyX2FpX2luaXRpYWxfYWdyZWVtZW50ID0gTnVtYmVyKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgIGxldCB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSA9IGluaXRpYWxfdXNlcl9jb25maWRlbmNlXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgIGlmICh1c2VyVHJ1c3RIZXVyaXN0aWMgPT0gXCJ1c2VyX3JlcG9ydGVkXCIpIHtcbiAgICAgICAgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID0gKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgLSA1KSAvIDIuNVxuICAgIH1cbiAgICBsZXQgZmluZG5ld2NvbmZfaW5wdXRfdmFyaWFibGVzID0ge1xuICAgICAgICBcInVzZXJfYWlfaW5pdGlhbF9hZ3JlZW1lbnRcIjogdXNlcl9haV9pbml0aWFsX2FncmVlbWVudCxcbiAgICAgICAgXCJ1c2VyX2luaXRpYWxfY29uZmlkZW5jZVwiOiB1c2VyX2luaXRpYWxfY29uZmlkZW5jZSxcbiAgICAgICAgXCJ1c2VyX2N1cnJlbnRfdHJ1c3RfbGV2ZWxcIjogdXNlcl9jdXJyZW50X3RydXN0X2xldmVsLFxuICAgICAgICBcInRpbWVzdGVwXCI6IHF1ZXN0aW9uX2ksXG4gICAgICAgIFwidXNlcl9hY2NlcHRhbmNlX2xpa2VsaWhvb2RfbmV1dHJhbF90cnVzdFwiOiB1c2VyX2FjY2VwdGFuY2VfbGlrZWxpaG9vZF9uZXV0cmFsX3RydXN0LFxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBmaW5kbmV3Y29uZl9yZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJmaW5kX2Jlc3RfYWljb25mX3RvX2Rpc3BsYXlcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Q6IFwiMnN0ZXAtdHJ1c3Qtc3R1ZHlcIixcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxfbmFtZTogdXNlcl9kZWNpc2lvbl9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkoZmluZG5ld2NvbmZfaW5wdXRfdmFyaWFibGVzKSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUiFcIilcbiAgICAgICAgY29uc29sZS5sb2coZSlcbiAgICB9XG5cbiAgICByZXR1cm4gZmluZG5ld2NvbmZfcmVzdWx0XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldF9haV9hc3Npc3RhbmNlKCkge1xuICAgIGNvbnNvbGUubG9nKFwiR2V0dGluZyBBSSBhc3Npc3RhbmNlLi4uXCIpXG5cbiAgICBsZXQgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBxdWVzdGlvbiFbXCJhaV9jb25maWRlbmNlXCJdXG4gICAgbGV0IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWxcbiAgICBpZiAodXNlclRydXN0SGV1cmlzdGljID09IFwidXNlcl9yZXBvcnRlZFwiKSB7XG4gICAgICAgIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA9ICh1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIC0gNSkgLyAyLjVcbiAgICAgICAgY29uc29sZS5sb2coXCJVc2luZyB1c2VyIHJlcG9ydGVkIHRydXN0IHZhbHVlOiBcIiwgdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbClcbiAgICB9XG4gICAgaW50ZXJ2ZW50aW9uX2RldGFpbHMgPSB7XG4gICAgICAgIFwiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIjogZmFsc2UsIFxuICAgICAgICBcInRydXN0X2xldmVsX2F0X3N0YXJ0X29mX2ludGVyYWN0aW9uXCI6IHVzZXJfY3VycmVudF90cnVzdF9sZXZlbFxuICAgIFxuICAgIH1cblxuICAgIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJub25lXCIgfHwgKGluaXRpYWxfdXNlcl9kZWNpc2lvbiA9PSBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKSkge1xuICAgICAgICAvLyBObyBpbnRlcnZlbnRpb24sIGp1c3Qgc2hvdyB0aGUgQUkgYXNzaXN0YW5jZSB0aGF0IGlzIGFscmVhZHkgcG9wdWxhdGVkIGluIHRoZSBzcGFuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm90IGFwcGx5aW5nIGFueSBpbnRlcnZlbnRpb24uXCIpXG4gICAgICAgIGRpc3BsYXllZF9haV9jb25maWRlbmNlID0gcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXVxuICAgIH1cbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJjb25maWRlbmNlX21hbmlwXCIpIHtcbiAgICAgICAgLy8gTW9kaWZ5IEFJIGNvbmZpZGVuY2VcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibm9uZVwiKSB8fCBcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJtaXRpZ2F0ZV91bmRlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsIDwgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfb3ZlcnRydXN0XCIgJiYgdXNlcl9jdXJyZW50X3RydXN0X2xldmVsID4gSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQpXG4gICAgICAgICkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcHBseWluZyBBSSBjb25maWRlbmNlIG1hbmlwdWxhdGlvbiBpbnRlcnZlbnRpb24uXCIpXG4gICAgICAgICAgICBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImZpeGVkXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlIHRvIEFJJ3MgY29uZmlkZW5jZVxuICAgICAgICAgICAgICAgIC8vIChJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgY2FuIGJlIG5lZ2F0aXZlKVxuICAgICAgICAgICAgICAgIGxldCBhaV9jb25maWRlbmNlID0gTnVtYmVyKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0ucmVwbGFjZShcIiVcIiwgXCJcIikpIC8gMTAwXG4gICAgICAgICAgICAgICAgbGV0IG5ld19jb25maWRlbmNlID0gTWF0aC5taW4oMSwgYWlfY29uZmlkZW5jZSArIEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSlcbiAgICAgICAgICAgICAgICBuZXdfY29uZmlkZW5jZSA9IE1hdGgubWF4KDAuNSwgbmV3X2NvbmZpZGVuY2UpXG4gICAgICAgICAgICAgICAgZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UgPSBTdHJpbmcoKCBuZXdfY29uZmlkZW5jZSAqIDEwMCkudG9GaXhlZCgwKSkgKyBcIiVcIlxuICAgICAgICAgICAgICAgIGxldCBjb25maWRlbmNlX2NoYW5nZSA9IChuZXdfY29uZmlkZW5jZSAtIGFpX2NvbmZpZGVuY2UpLnRvRml4ZWQoMilcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFjdHVhbCBBSSBjb25maWRlbmNlOiBcIiwgcXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXSwgXCIsIENvbmZpZGVuY2Ugc2hvd24gdG8gdXNlcjogXCIsIGRpc3BsYXllZF9haV9jb25maWRlbmNlKVxuXG4gICAgICAgICAgICAgICAgaW50ZXJ2ZW50aW9uX2RldGFpbHNbXCJjb25mX2FjdHVhbFwiXSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImNvbmZfZGlzcGxheWVkXCJdID0gZGlzcGxheWVkX2FpX2NvbmZpZGVuY2VcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImNvbmZfY2hhbmdlXCJdID0gY29uZmlkZW5jZV9jaGFuZ2VcbiAgICAgICAgICAgICAgICBpbnRlcnZlbnRpb25fZGV0YWlsc1tcImludGVydmVudGlvbl9hcHBsaWVkXCJdID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQUlJbnRlcnZlbnRpb25TdHJhdGVneSA9PSBcImFkYXB0aXZlXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgYWRhcHRpdmUgc3RyYXRlZ3lcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ29uZGl0aW9ucyBmb3IgYXBwbHlpbmcgJ2NvbmZpZGVuY2UgbWFuaXB1bGF0aW9uJyBpbnRlcnZlbnRpb24gbm90IHNhdGlzZmllZC5cIilcbiAgICAgICAgfVxuXG4gICAgfSBcbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJhaV9leHBsYW5hdGlvblwiKSB7XG4gICAgICAgIC8vIEFkZCBBSSBleHBsYW5hdGlvblxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJub25lXCIpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHlpbmcgQUkgZXhwbGFuYXRpb24gaW50ZXJ2ZW50aW9uLlwiKVxuICAgICAgICAgICAgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJmaXhlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIGV4cGxhbmF0aW9uXCIpXG4gICAgICAgICAgICAgICAgbGV0IGV4cGxhbmF0aW9uX3Nob3duOiBzdHJpbmcgPSAhcXVlc3Rpb24hW1wiYWlfZXhwbGFuYXRpb25cIl0gPyBcIk5vIGV4cGxhbmF0aW9uIHByb3ZpZGVkXCIgOiBxdWVzdGlvbiFbXCJhaV9leHBsYW5hdGlvblwiXVxuICAgICAgICAgICAgICAgICQoXCIjYWlfZXhwbGFuYXRpb25fc3BhblwiKS5odG1sKGV4cGxhbmF0aW9uX3Nob3duKVxuICAgICAgICAgICAgICAgICQoXCIjYWlfZXhwbGFuYXRpb25fZGl2XCIpLnNob3coKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiZXhwbGFuYXRpb25fc2hvd25cIl0gPSBleHBsYW5hdGlvbl9zaG93blxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgICAgICBjb25zdCBhaV9leHBsYW5hdGlvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2V4cGxhbmF0aW9uX2RpdlwiKVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIiksXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZXIoMTUsIGFpX2V4cGxhbmF0aW9uX2RpdiwgYnV0dG9ucywgbnVsbCwgXCJQbGVhc2UgcmVhZCB0aGUgZXhwbGFuYXRpb24uXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiYWRhcHRpdmVcIikge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEltcGxlbWVudCBhZGFwdGl2ZSBzdHJhdGVneVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbmRpdGlvbnMgZm9yIGFwcGx5aW5nICdBSSBleHBsYW5hdGlvbicgaW50ZXJ2ZW50aW9uIG5vdCBzYXRpc2ZpZWQuXCIpXG4gICAgICAgIH1cblxuICAgIH1cbiAgICBlbHNlIGlmIChBSUludGVydmVudGlvblR5cGUgPT0gXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvblwiKSB7XG4gICAgICAgIC8vIEFkZCBBSSBleHBsYW5hdGlvblxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIChBSUludGVydmVudGlvbkdvYWwgPT0gXCJub25lXCIpIHx8XG4gICAgICAgICAgICAoQUlJbnRlcnZlbnRpb25Hb2FsID09IFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA8IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKSB8fFxuICAgICAgICAgICAgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiICYmIHVzZXJfY3VycmVudF90cnVzdF9sZXZlbCA+IEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXBwbHlpbmcgQUkgZXhwbGFuYXRpb24gaW50ZXJ2ZW50aW9uLlwiKVxuICAgICAgICAgICAgaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gXCJmaXhlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaG93aW5nIGV4cGxhbmF0aW9uXCIpXG4gICAgICAgICAgICAgICAgbGV0IGV4cGxhbmF0aW9uX3Nob3duOiBzdHJpbmcgPSAhcXVlc3Rpb24hW1wiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIl0gPyBcIk5vIGV4cGxhbmF0aW9uIHByb3ZpZGVkXCIgOiBxdWVzdGlvbiFbXCJhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvblwiXVxuICAgICAgICAgICAgICAgICQoXCIjYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fc3BhblwiKS5odG1sKGV4cGxhbmF0aW9uX3Nob3duKVxuICAgICAgICAgICAgICAgICQoXCIjYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25fZGl2XCIpLnNob3coKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiZXhwbGFuYXRpb25fc2hvd25cIl0gPSBleHBsYW5hdGlvbl9zaG93blxuICAgICAgICAgICAgICAgIGludGVydmVudGlvbl9kZXRhaWxzW1wiaW50ZXJ2ZW50aW9uX2FwcGxpZWRcIl0gPSB0cnVlXG5cbiAgICAgICAgICAgICAgICBjb25zdCBhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdlwiKVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIiksXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIiksXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZXIoMTAsIGFpX2NvbnRyYXN0aXZlX2V4cGxhbmF0aW9uX2RpdiwgYnV0dG9ucywgbnVsbCwgXCJQbGVhc2UgcmVhZCB0aGUgZXhwbGFuYXRpb24uXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChBSUludGVydmVudGlvblN0cmF0ZWd5ID09IFwiYWRhcHRpdmVcIikge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEltcGxlbWVudCBhZGFwdGl2ZSBzdHJhdGVneVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbmRpdGlvbnMgZm9yIGFwcGx5aW5nICdBSSBleHBsYW5hdGlvbicgaW50ZXJ2ZW50aW9uIG5vdCBzYXRpc2ZpZWQuXCIpXG4gICAgICAgIH1cblxuICAgIH1cblxuXG4gICAgLy9pbnRlcnZlbnRpb25fZGV0YWlsc1snYWN0dWFsX2FpX2NvbmZpZGVuY2UnXSA9IHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl1cbiAgICAvL2ludGVydmVudGlvbl9kZXRhaWxzWydkaXNwbGF5ZWRfYWlfY29uZmlkZW5jZSddID0gZGlzcGxheWVkX2FpX2NvbmZpZGVuY2VcbiAgICBjb25zb2xlLmxvZyhcIkFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uIERldGFpbHM6IFwiLCBpbnRlcnZlbnRpb25fZGV0YWlscylcblxuICAgICQoXCIjYWlfcHJlZGljdGlvbl9zcGFuXCIpLmh0bWwoXCJPcHRpb24gXCIgKyBxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdKVxuICAgICQoXCIjYWlfY29uZmlkZW5jZV9zcGFuXCIpLmh0bWwoZGlzcGxheWVkX2FpX2NvbmZpZGVuY2UpXG5cbiAgICAkKFwiI2FpX2Fzc2lzdGFuY2VfZGl2XCIpLnNob3coKVxuICAgICQoXCIjZmluYWxfdXNlcl9kZWNpc2lvbl9kaXZcIikuc2hvdygpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldF90cnVzdF9lZmZlY3QoKSB7XG4gICAgLy8gR2V0IHRydXN0IGVmZmVjdCBmb3IgdGhpcyBpbnRlcmFjdGlvblxuICAgIGxldCBpbml0aWFsX3VzZXJfY29ycmVjdG5lc3MgPSBOdW1iZXIoaW5pdGlhbF91c2VyX2RlY2lzaW9uID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBhaV9jb3JyZWN0bmVzcyA9IE51bWJlcihxdWVzdGlvbiFbXCJhaV9wcmVkaWN0aW9uXCJdID09IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdKVxuICAgIGxldCBmaW5hbF91c2VyX2NvcnJlY3RuZXNzID0gTnVtYmVyKGZpbmFsX3VzZXJfZGVjaXNpb24gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0pXG4gICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICBsZXQgdHJ1c3RfZWZmZWN0X2lucHV0cyA9IHtcbiAgICAgICAgXCJpbml0aWFsX3VzZXJfY29ycmVjdG5lc3NcIjogaW5pdGlhbF91c2VyX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImFpX2NvcnJlY3RuZXNzXCI6IGFpX2NvcnJlY3RuZXNzLFxuICAgICAgICBcImZpbmFsX3VzZXJfY29ycmVjdG5lc3NcIjogZmluYWxfdXNlcl9jb3JyZWN0bmVzcyxcbiAgICAgICAgXCJhaV9jb25maWRlbmNlXCI6IGFpX2NvbmZpZGVuY2UsXG4gICAgICAgIFwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIFwidGltZXN0ZXBcIjogcXVlc3Rpb25faSxcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJUcnVzdCBlZmZlY3QgaW5wdXRzOiBcIiwgdHJ1c3RfZWZmZWN0X2lucHV0cylcbiAgICAvL2xldCB0cnVzdF9lZmZlY3QgPSBnZXRfdXNlcl90cnVzdF9lZmZlY3QodHJ1c3RfZWZmZWN0X2lucHV0cylcbiAgICBsZXQgcmVzdWx0OiBhbnlcbiAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBhd2FpdCAkLmFqYXgoXG4gICAgICAgICAgICBVU0VSX01PREVMU19ST09UICsgXCJnZXRfdHJ1c3RfZWZmZWN0XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0OiBcIjJzdGVwLXRydXN0LXN0dWR5XCIsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsX25hbWU6IHRydXN0X2VmZmVjdF9tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZDogSlNPTi5zdHJpbmdpZnkodHJ1c3RfZWZmZWN0X2lucHV0cyksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IhXCIpXG4gICAgICAgIGNvbnNvbGUubG9nKGUpXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJUcnVzdCBlZmZlY3QgcHJlZGljdGlvbiByZXN1bHQ6IFwiLCByZXN1bHQpXG4gICAgbGV0IHRydXN0X2VmZmVjdCA9IGF3YWl0IHJlc3VsdFtcInRydXN0X2VmZmVjdFwiXVxuXG4gICAgdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbCA9IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwgKyB0cnVzdF9lZmZlY3RcbiAgICB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0ge1xuICAgICAgICBcIm1vZGVsX2lucHV0c1wiOiB0cnVzdF9lZmZlY3RfaW5wdXRzLFxuICAgICAgICBcInByZWRpY3RlZF90cnVzdF9lZmZlY3RcIjogdHJ1c3RfZWZmZWN0LFxuICAgICAgICBcInVzZXJfbmV3X3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgfVxuICAgIHJldHVybiB0cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhXG59XG5cbmZ1bmN0aW9uIG1ha2VfZmluYWxfdXNlcl9kZWNpc2lvbihvcHRpb24pIHtcbiAgICB0aW1lX2ZpbmFsX2NvbmZpZGVuY2Vfc3RhcnQgPSBEYXRlLm5vdygpXG4gICAgZmluYWxfdXNlcl9kZWNpc2lvbiA9IG9wdGlvblxuICAgIGFzc2VydChvcHRpb24gPT0gMSB8fCBvcHRpb24gPT0gMiwgXCJJbnZhbGlkIG9wdGlvbiFcIilcbiAgICBpZiAob3B0aW9uID09IDEpIHtcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgfVxuICAgICQoXCIjZmluYWxfdXNlcl9jb25maWRlbmNlX2RpdlwiKS5zaG93KClcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbn1cbiQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBtYWtlX2ZpbmFsX3VzZXJfZGVjaXNpb24oMSkpXG4kKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gbWFrZV9maW5hbF91c2VyX2RlY2lzaW9uKDIpKVxuXG5mdW5jdGlvbiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKGNvbmZfbGV2ZWwpIHtcbiAgICB0aW1lX3RydXN0X2RlY2lzaW9uX3N0YXJ0ID0gRGF0ZS5ub3coKVxuICAgIGZpbmFsX3VzZXJfY29uZmlkZW5jZSA9IGNvbmZfbGV2ZWxcbiAgICBhc3NlcnQoY29uZl9sZXZlbCA9PSAxIHx8IGNvbmZfbGV2ZWwgPT0gMiB8fCBjb25mX2xldmVsID09IDMsIFwiSW52YWxpZCBvcHRpb24hXCIpXG4gICAgaWYgKGNvbmZfbGV2ZWwgPT0gMSkge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImFjdGl2ZWRlY2lzaW9uXCIsIFwidHJ1ZVwiKVxuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2UgaWYgKGNvbmZfbGV2ZWwgPT0gMikge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiYWN0aXZlZGVjaXNpb25cIiwgXCJ0cnVlXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAgICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJhY3RpdmVkZWNpc2lvblwiLCBcInRydWVcIilcbiAgICB9XG5cbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24zXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICBzaG93X3Jlc3VsdCgpXG59XG4kKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikub24oXCJjbGlja1wiLCAoKSA9PiBnZXRfZmluYWxfdXNlcl9jb25maWRlbmNlKDEpKVxuJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLm9uKFwiY2xpY2tcIiwgKCkgPT4gZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSgyKSlcbiQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5vbihcImNsaWNrXCIsICgpID0+IGdldF9maW5hbF91c2VyX2NvbmZpZGVuY2UoMykpXG5cblxuYXN5bmMgZnVuY3Rpb24gc2hvd19yZXN1bHQoKSB7XG5cbiAgICBsZXQgY29ycmVjdF9vcHRpb246IG51bWJlciA9IHF1ZXN0aW9uIVtcImNvcnJlY3Rfb3B0aW9uXCJdXG4gICAgbGV0IHVzZXJfaXNfY29ycmVjdDogYm9vbGVhbiA9IGNvcnJlY3Rfb3B0aW9uID09IGZpbmFsX3VzZXJfZGVjaXNpb25cblxuICAgIGxldCBhaV9pc19jb3JyZWN0OiBib29sZWFuID0gcXVlc3Rpb24hW1wiYWlfaXNfY29ycmVjdFwiXVxuICAgIGxldCBtZXNzYWdlID0gXCJDb3JyZWN0IGFuc3dlcjogPGI+T3B0aW9uIFwiICsgY29ycmVjdF9vcHRpb24gKyBcIjwvYj4uPGJyPlwiXG4gICAgaWYgKHVzZXJfaXNfY29ycmVjdCkge1xuICAgICAgICBtZXNzYWdlICs9IFwiWW91IHBpY2tlZCBPcHRpb24gXCIgKyBmaW5hbF91c2VyX2RlY2lzaW9uICsgXCIsIHdoaWNoIHdhcyA8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+Y29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIllvdSBwaWNrZWQgT3B0aW9uIFwiICsgZmluYWxfdXNlcl9kZWNpc2lvbiArIFwiLCB3aGljaCB3YXMgPHNwYW4gY2xhc3M9J2NvbG9yX2luY29ycmVjdCc+PGI+aW5jb3JyZWN0PC9iPjwvc3Bhbj4uPGJyPlwiXG4gICAgfVxuICAgIGlmIChhaV9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9jb3JyZWN0Jz48Yj5jb3JyZWN0PGI+PC9zcGFuPi48YnI+XCJcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCJUaGUgQUkgcGlja2VkIE9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gKyBcIiwgd2hpY2ggd2FzIDxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPmluY29ycmVjdDwvYj48L3NwYW4+Ljxicj5cIlxuICAgIH1cbiAgICBpZiAodXNlcl9pc19jb3JyZWN0KSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCI8c3BhbiBjbGFzcz0nY29sb3JfY29ycmVjdCc+PGI+WW91IHJlY2VpdmUgYSByZXdhcmQgb2YgJDAuMTAuPC9iPjwvc3Bhbj5cIlxuICAgICAgICBiYWxhbmNlICs9IDAuMVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSArPSBcIjxzcGFuIGNsYXNzPSdjb2xvcl9pbmNvcnJlY3QnPjxiPllvdSBkbyBub3QgcmVjZWl2ZSBhbnkgcmV3YXJkLjwvYj48L3NwYW4+XCJcbiAgICB9XG5cbiAgICBtZXNzYWdlICs9IFwiPGJyPlwiXG4gICAgLy9pZiAoc3VjY2Vzcykge1xuICAgIC8vICAgIG1lc3NhZ2UgKz0gYFlvdSBnYWluICQkeyhiZXRfdmFsKmJldF92YWxfcmF0aW8pLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlICs9IGJldF92YWwqYmV0X3ZhbF9yYXRpb1xuICAgIC8vfSBlbHNlIHtcbiAgICAvLyAgICBtZXNzYWdlICs9IGBZb3UgbG9zZSAkJHsoYmV0X3ZhbC8xLjApLnRvRml4ZWQoMil9LmBcbiAgICAvLyAgICBiYWxhbmNlIC09IGJldF92YWwvMS4wXG4gICAgLy8gICAgYmFsYW5jZSA9IE1hdGgubWF4KDAsIGJhbGFuY2UpXG4gICAgLy99XG4gICAgJChcIiNiYWxhbmNlXCIpLnRleHQoYEJhbGFuY2U6ICQke2JhbGFuY2UudG9GaXhlZCgyKX0gKyAkMS4wYClcbiAgICAkKFwiI3Jlc3VsdF9zcGFuXCIpLmh0bWwobWVzc2FnZSlcbiAgICAvLyQoXCIjYnV0dG9uX25leHRcIikuc2hvdygpXG4gICAgJChcIiNyZXN1bHRfc3BhblwiKS5zaG93KClcbiAgICAvLyQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICBpZiAoc2tpcF90cnVzdF9yZXBvcnRpbmcpICAge1xuICAgICAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLnNob3coKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgJChcIiN1c2VyX3RydXN0X3JlcG9ydF9kaXZcIikuc2hvdygpXG4gICAgfVxuXG4gICAgLy90cnVzdF9lZmZlY3RfcHJlZGljdGlvbl9kYXRhID0gYXdhaXQgZ2V0X3RydXN0X2VmZmVjdCgpXG4gICAgdXBkYXRlX3VzZXJfdHJ1c3RfbGV2ZWxfZXN0aW1hdGUoKVxuXG4gICAgLy8kKCcjcmFuZ2VfdmFsJykuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxufVxuXG5mdW5jdGlvbiB1cGRhdGVfdXNlcl90cnVzdF9sZXZlbF9lc3RpbWF0ZSgpIHtcbiAgICBpZiAodXNlclRydXN0SGV1cmlzdGljID09IFwic21vb3RoZWRfY29uZndlaWdodGVkX3RydXN0XCIpIHtcbiAgICAgICAgbGV0IGFpX2NvbmZpZGVuY2UgPSBOdW1iZXIocXVlc3Rpb24hW1wiYWlfY29uZmlkZW5jZVwiXS5yZXBsYWNlKFwiJVwiLCBcIlwiKSkgLyAxMDBcbiAgICAgICAgbGV0IHRydXN0X2VmZmVjdCA9IHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0gPT0gcXVlc3Rpb24hW1wiY29ycmVjdF9vcHRpb25cIl0gPyBhaV9jb25maWRlbmNlIDogLWFpX2NvbmZpZGVuY2VcbiAgICAgICAgbGV0IHByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsID0gdXNlcl9jdXJyZW50X2VzdGltYXRlZF90cnVzdF9sZXZlbFxuICAgICAgICB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsID0gc21vb3RoaW5nUGFyYW0gKiB0cnVzdF9lZmZlY3QgKyAoMS1zbW9vdGhpbmdQYXJhbSkgKiB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsXG4gICAgICAgIHRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEgPSB7XG4gICAgICAgICAgICBcInByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsXCI6IHByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsLFxuICAgICAgICAgICAgXCJ0cnVzdF9lZmZlY3RcIjogdHJ1c3RfZWZmZWN0LFxuICAgICAgICAgICAgXCJuZXdfZXN0aW1hdGVkX3RydXN0X2xldmVsXCI6IHVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwsXG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJPbGQgZXN0aW1hdGVkIHRydXN0IGxldmVsOiBcIiArIHByZXZfZXN0aW1hdGVkX3RydXN0X2xldmVsICsgXCIsIHRydXN0IGVmZmVjdDogXCIgKyB0cnVzdF9lZmZlY3QgKyBcIiwgbmV3IGVzdGltYXRlZCB0cnVzdCBsZXZlbDogXCIgKyB1c2VyX2N1cnJlbnRfZXN0aW1hdGVkX3RydXN0X2xldmVsKVxuICAgIH1cbn1cblxuLy8kKFwiI2J1dHRvbl9wbGFjZV9iZXRcIikub24oXCJjbGlja1wiLCBzaG93X3Jlc3VsdClcblxuZnVuY3Rpb24gc3RhcnRfdGltZXJfZm9yX2luaXRpYWxfZGVjaXNpb24oKSB7XG4gICAgY29uc3QgaW5pdGlhbF91c2VyX2RlY2lzaW9uX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5pdGlhbF91c2VyX2RlY2lzaW9uX2RpdlwiKVxuICAgIGNvbnN0IGJ1dHRvbnMgPSBbXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKSxcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLFxuICAgIF1cbiAgICBzdGFydFRpbWVyKDEwLCBpbml0aWFsX3VzZXJfZGVjaXNpb25fZGl2LCBidXR0b25zLCBudWxsLCBcIlBsZWFzZSByZWFkIHRoZSBxdWVzdGlvbiBhbmQgb3B0aW9ucyBjbG9zZWx5LlwiKVxufVxuXG5mdW5jdGlvbiBuZXh0X3F1ZXN0aW9uKCkge1xuICAgIC8vIHJlc3RvcmUgcHJldmlvdXMgc3RhdGUgb2YgVUlcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25faW5pdGlhbF9kZWNpc2lvbl9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2luaXRpYWxfZGVjaXNpb25fb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG5cbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcbiAgICAkKFwiI2J1dHRvbl9pbml0aWFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfZGVjaXNpb25fb3B0aW9uMlwiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9kZWNpc2lvbl9vcHRpb24xXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2RlY2lzaW9uX29wdGlvbjJcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG5cbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImFjdGl2ZWRlY2lzaW9uXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJhY3RpdmVkZWNpc2lvblwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiYWN0aXZlZGVjaXNpb25cIilcbiAgICAkKFwiI2J1dHRvbl9maW5hbF9jb25maWRlbmNlX29wdGlvbjFcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpXG4gICAgJChcIiNidXR0b25fZmluYWxfY29uZmlkZW5jZV9vcHRpb24yXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjYnV0dG9uX2ZpbmFsX2NvbmZpZGVuY2Vfb3B0aW9uM1wiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIilcblxuICAgICQoXCIjYWlfYXNzaXN0YW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNhaV9leHBsYW5hdGlvbl9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNhaV9jb250cmFzdGl2ZV9leHBsYW5hdGlvbl9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNpbml0aWFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJChcIiNmaW5hbF91c2VyX2RlY2lzaW9uX2RpdlwiKS5oaWRlKClcbiAgICAkKFwiI2ZpbmFsX3VzZXJfY29uZmlkZW5jZV9kaXZcIikuaGlkZSgpXG4gICAgJCgnI3JhbmdlX3ZhbCcpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKVxuICAgICQoXCIjdXNlcl90cnVzdF9yZXBvcnRfZGl2XCIpLmhpZGUoKVxuICAgICQoXCIjYnV0dG9uX3BsYWNlX2JldFwiKS5oaWRlKClcbiAgICAkKFwiI2J1dHRvbl9uZXh0XCIpLmhpZGUoKVxuICAgICQoXCIjcmVzdWx0X3NwYW5cIikuaGlkZSgpXG4gICAgaWYgKHF1ZXN0aW9uX2kgPT0gLTEpIHtcbiAgICAgICAgJChcIiNyYW5nZV90ZXh0XCIpLnRleHQoXCItXCIpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAkKFwiI3JhbmdlX3RleHRcIikudGV4dChgQmVmb3JlIHRoaXMgaW50ZXJhY3Rpb24sIHlvdXIgdHJ1c3QgaW4gdGhlIEFJOiAke3VzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwgKiAxMH0gLyAxMDAuYClcbiAgICB9XG4gICAgJChcIiNyYW5nZV92YWxcIikudmFsKHVzZXJfcmVwb3J0ZWRfdHJ1c3RfbGV2ZWwpXG4gICAgcHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsID0gdXNlcl9yZXBvcnRlZF90cnVzdF9sZXZlbFxuXG4gICAgcXVlc3Rpb25faSArPSAxXG4gICAgaWYgKHF1ZXN0aW9uX2kgPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgJChcIiNtYWluX2JveF9leHBlcmltZW50XCIpLmhpZGUoKVxuICAgICAgICBpZiAoTU9DS01PREUpIHtcbiAgICAgICAgICAgICQoXCIjbWFpbl9ib3hfZW5kX21vY2tcIikuc2hvdygpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiI21haW5fYm94X2VuZFwiKS5zaG93KClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG4gICAgcXVlc3Rpb24gPSBkYXRhW3F1ZXN0aW9uX2ldXG5cbiAgICAkKFwiI3F1ZXN0aW9uX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJxdWVzdGlvblwiXSlcbiAgICAkKFwiI29wdGlvbjFfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcIm9wdGlvbjFcIl0pXG4gICAgJChcIiNvcHRpb24yX3NwYW5cIikuaHRtbChxdWVzdGlvbiFbXCJvcHRpb24yXCJdKVxuICAgIC8vJChcIiNhaV9wcmVkaWN0aW9uX3NwYW5cIikuaHRtbChcIk9wdGlvbiBcIiArIHF1ZXN0aW9uIVtcImFpX3ByZWRpY3Rpb25cIl0pXG4gICAgLy8kKFwiI2FpX2NvbmZpZGVuY2Vfc3BhblwiKS5odG1sKHF1ZXN0aW9uIVtcImFpX2NvbmZpZGVuY2VcIl0pXG5cbiAgICAvLyBzZXQgYmV0IHZhbHVlIHJhdGlvXG4gICAgaWYocXVlc3Rpb24uaGFzT3duUHJvcGVydHkoXCJyZXdhcmRfcmF0aW9cIikpIHtcbiAgICAgICAgbGV0IFtyYXRpbzEsIHJhdGlvMl0gPSBxdWVzdGlvbltcInJld2FyZF9yYXRpb1wiXVxuICAgICAgICByYXRpbzEgPSBOdW1iZXIocmF0aW8xKVxuICAgICAgICByYXRpbzIgPSBOdW1iZXIocmF0aW8yKVxuICAgICAgICBiZXRfdmFsX3JhdGlvID0gcmF0aW8xL3JhdGlvMlxuICAgIH0gZWxzZSB7XG4gICAgICAgIGJldF92YWxfcmF0aW8gPSAxXG4gICAgfVxuXG4gICAgdGltZV9xdWVzdGlvbl9zdGFydCA9IERhdGUubm93KClcbiAgICAkKFwiI3Byb2dyZXNzXCIpLnRleHQoYFByb2dyZXNzOiAke3F1ZXN0aW9uX2kgKyAxfSAvICR7ZGF0YS5sZW5ndGh9YClcblxuICAgIHN0YXJ0X3RpbWVyX2Zvcl9pbml0aWFsX2RlY2lzaW9uKClcbn1cblxuLy8gZ2V0IHVzZXIgaWQgYW5kIGxvYWQgcXVldWVcbi8vIHRyeSB0byBzZWUgaWYgc3RhcnQgb3ZlcnJpZGUgd2FzIHBhc3NlZFxuY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbmNvbnN0IHN0YXJ0T3ZlcnJpZGUgPSB1cmxQYXJhbXMuZ2V0KCdzdGFydCcpO1xuY29uc3QgVUlERnJvbVVSTCA9IHVybFBhcmFtcy5nZXQoXCJ1aWRcIilcbmdsb2JhbFRoaXMudXJsX2RhdGEgPSBwYXJhbXNUb09iamVjdCh1cmxQYXJhbXMuZW50cmllcygpKVxuXG5pZiAoVUlERnJvbVVSTCAhPSBudWxsKSB7XG4gICAgZ2xvYmFsVGhpcy51aWQgPSBVSURGcm9tVVJMIGFzIHN0cmluZ1xuICAgIGlmIChnbG9iYWxUaGlzLnVpZCA9PSBcInByb2xpZmljX3JhbmRvbVwiKSB7XG4gICAgICAgIGxldCBxdWV1ZV9pZCA9IGAke01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKX1gLnBhZFN0YXJ0KDMsIFwiMFwiKVxuICAgICAgICBnbG9iYWxUaGlzLnVpZCA9IGAke3VybFBhcmFtcy5nZXQoXCJwcm9saWZpY19xdWV1ZV9uYW1lXCIpfS8ke3F1ZXVlX2lkfWBcbiAgICB9XG59IGVsc2UgaWYgKERFVk1PREUpIHtcbiAgICBnbG9iYWxUaGlzLnVpZCA9IFwiZGVtb1wiXG59IGVsc2Uge1xuICAgIGxldCBVSURfbWF5YmU6IGFueSA9IG51bGxcbiAgICB3aGlsZSAoVUlEX21heWJlID09IG51bGwpIHtcbiAgICAgICAgVUlEX21heWJlID0gcHJvbXB0KFwiRW50ZXIgeW91ciB1c2VyIGlkLiBQbGVhc2UgZ2V0IGluIHRvdWNoIGlmIHlvdSB3ZXJlIG5vdCBhc3NpZ25lZCBhbiBpZCBidXQgd2lzaCB0byBwYXJ0aWNpcGF0ZSBpbiB0aGlzIGV4cGVyaW1lbnQuXCIpXG4gICAgfVxuICAgIGdsb2JhbFRoaXMudWlkID0gVUlEX21heWJlIVxufVxuXG5sZXQgaW50ZXJ2ZW50aW9uX2FsbG93ZWRfdGltZXN0ZXBzOiBudW1iZXJbXSA9IFtdXG5pZiAoZ2xvYmFsVGhpcy51aWQuaW5jbHVkZXMoXCIzNDNcIikpIHtcbiAgICBpbnRlcnZlbnRpb25fYWxsb3dlZF90aW1lc3RlcHMgPSBbNywgOCwgOSwgMTcsIDE4LCAxOSwgMjcsIDI4LCAyOV1cbn0gZWxzZSBpZiAoZ2xvYmFsVGhpcy51aWQuaW5jbHVkZXMoXCI0MzRcIikpIHtcbiAgICBpbnRlcnZlbnRpb25fYWxsb3dlZF90aW1lc3RlcHMgPSBbNywgOCwgOSwgMTcsIDE4LCAxOSwgMjcsIDI4LCAyOV1cbn0gZWxzZSBpZiAoZ2xvYmFsVGhpcy51aWQuaW5jbHVkZXMoXCI3MzVcIikpIHtcbiAgICBpbnRlcnZlbnRpb25fYWxsb3dlZF90aW1lc3RlcHMgPSBbMTAsIDExLCAxMiwgMTMsIDE0LCAyNSwgMjYsIDI3LCAyOCwgMjldXG59XG5cbi8vY29uc3QgdmFsaWRBSUludGVydmVudGlvbnMgPSBbXCJub25lXCIsIFwiZHVtbXlcIiwgXCJjb25maWRlbmNlX2luZmxhdGlvblwiLCBcImNvbmZpZGVuY2VfaW5mbGF0aW9uX2ZpeGVkXCIsIFwiY29uZmlkZW5jZV9kZWZsYXRpb25cIl1cbi8vbGV0IEFJSW50ZXJ2ZW50aW9uVHlwZSA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdHlwZVwiKVxuLy9sZXQgSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdGhyZXNob2xkXCIpKVxuLy9sZXQgSW50ZXJ2ZW50aW9uRml4ZWRDb25mSW5jcmVhc2UgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl9maXhlZGNvbmZpbmNyZWFzZVwiKSlcbmNvbnN0IHZhbGlkSW50ZXJ2ZW50aW9uR29hbHMgPSBbXCJub25lXCIsIFwibWl0aWdhdGVfdW5kZXJ0cnVzdFwiLCBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiXVxubGV0IEFJSW50ZXJ2ZW50aW9uR29hbCA9IHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fZ29hbFwiKVxuaWYgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBudWxsKSB7QUlJbnRlcnZlbnRpb25Hb2FsID0gXCJub25lXCJ9XG5pZiAoIXZhbGlkSW50ZXJ2ZW50aW9uR29hbHMuaW5jbHVkZXMoQUlJbnRlcnZlbnRpb25Hb2FsISkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uIEdvYWw6IFwiICsgQUlJbnRlcnZlbnRpb25Hb2FsKVxufVxuXG5jb25zdCB2YWxpZEludGVydmVudGlvblR5cGVzID0gW1wibm9uZVwiLCBcImR1bW15XCIsIFwiY29uZmlkZW5jZV9tYW5pcFwiLCBcImFpX2V4cGxhbmF0aW9uXCIsIFwiYWlfY29udHJhc3RpdmVfZXhwbGFuYXRpb25cIl1cbmxldCBBSUludGVydmVudGlvblR5cGUgPSB1cmxQYXJhbXMuZ2V0KFwiaW50ZXJ2ZW50aW9uX3R5cGVcIilcbmlmIChBSUludGVydmVudGlvblR5cGUgPT0gbnVsbCkge0FJSW50ZXJ2ZW50aW9uVHlwZSA9IFwibm9uZVwifSBcbmlmICghdmFsaWRJbnRlcnZlbnRpb25UeXBlcy5pbmNsdWRlcyhBSUludGVydmVudGlvblR5cGUhKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQUkgQXNzaXN0YW5jZSBJbnRlcnZlbnRpb246IFwiICsgQUlJbnRlcnZlbnRpb25UeXBlKVxufVxuXG5jb25zdCB2YWxpZEludGVydmVudGlvblN0cmF0ZWdpZXMgPSBbXCJkdW1teVwiLCBcImZpeGVkXCIsIFwiYWRhcHRpdmVcIl1cbmxldCBBSUludGVydmVudGlvblN0cmF0ZWd5ID0gdXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl9zdHJhdGVneVwiKVxuaWYgKEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPT0gbnVsbCkge0FJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kgPSBcImR1bW15XCJ9XG5pZiAoIXZhbGlkSW50ZXJ2ZW50aW9uU3RyYXRlZ2llcy5pbmNsdWRlcyhBSUludGVydmVudGlvblN0cmF0ZWd5ISkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFJIEFzc2lzdGFuY2UgSW50ZXJ2ZW50aW9uIFN0cmF0ZWd5OiBcIiArIEFJSW50ZXJ2ZW50aW9uU3RyYXRlZ3kpXG59XG5cbi8vIEludGVydmVudGlvbi1zcGVjaWZpYyBwYXJhbWV0ZXJzXG5sZXQgSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkID0gTnVtYmVyKHVybFBhcmFtcy5nZXQoXCJpbnRlcnZlbnRpb25fdGhyZXNob2xkXCIpKVxuaWYgKEludGVydmVudGlvbkFMRGlmZlRocmVzaG9sZCA9PSBudWxsKSB7SW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkID0gLTF9XG5sZXQgSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl90cnVzdF90aHJlc2hvbGRcIikpXG5pZiAoSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQgPT0gbnVsbCkge0ludGVydmVudGlvblRydXN0VGhyZXNob2xkID0gMH1cbmxldCBJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgPSBOdW1iZXIodXJsUGFyYW1zLmdldChcImludGVydmVudGlvbl9maXhlZGNvbmZjaGFuZ2VcIikpXG5pZiAoSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlID09IG51bGwpIHtJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UgPSAwfVxuXG5sZXQgdXNlclRydXN0SGV1cmlzdGljID0gdXJsUGFyYW1zLmdldChcInVzZXJfdHJ1c3RfaGV1cmlzdGljXCIpXG5pZiAodXNlclRydXN0SGV1cmlzdGljID09IG51bGwpIHt1c2VyVHJ1c3RIZXVyaXN0aWMgPSBcInVzZXJfcmVwb3J0ZWRcIn1cbmxldCBzbW9vdGhpbmdQYXJhbSA9IE51bWJlcih1cmxQYXJhbXMuZ2V0KFwic21vb3RoaW5nX3BhcmFtXCIpKVxuaWYgKHNtb290aGluZ1BhcmFtID09IG51bGwpIHtzbW9vdGhpbmdQYXJhbSA9IDF9XG5cbmxldCBza2lwX3RydXN0X3JlcG9ydGluZyA9IHVybFBhcmFtcy5nZXQoXCJza2lwX3RydXN0X3JlcG9ydGluZ1wiKSA9PSBcInRydWVcIlxuaWYgKHNraXBfdHJ1c3RfcmVwb3J0aW5nID09IG51bGwpIHtza2lwX3RydXN0X3JlcG9ydGluZyA9IGZhbHNlfVxuXG5jb25zb2xlLmxvZyhcIkFJSW50ZXJ2ZW50aW9uR29hbDogXCIsIEFJSW50ZXJ2ZW50aW9uR29hbClcbmNvbnNvbGUubG9nKFwiQUlJbnRlcnZlbnRpb25UeXBlOiBcIiwgQUlJbnRlcnZlbnRpb25UeXBlKVxuY29uc29sZS5sb2coXCJBSUludGVydmVudGlvblN0cmF0ZWd5OiBcIiwgQUlJbnRlcnZlbnRpb25TdHJhdGVneSlcbmNvbnNvbGUubG9nKFwiSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkOiBcIiwgSW50ZXJ2ZW50aW9uQUxEaWZmVGhyZXNob2xkKVxuY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZDogXCIsIEludGVydmVudGlvblRydXN0VGhyZXNob2xkKVxuY29uc29sZS5sb2coXCJJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2U6IFwiLCBJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UpXG5jb25zb2xlLmxvZyhcInVzZXJUcnVzdEhldXJpc3RpYzogXCIsIHVzZXJUcnVzdEhldXJpc3RpYylcbmNvbnNvbGUubG9nKFwic2tpcF90cnVzdF9yZXBvcnRpbmc6IFwiLCBza2lwX3RydXN0X3JlcG9ydGluZylcblxuaWYgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX3VuZGVydHJ1c3RcIikge1xuICAgIGFzc2VydChJbnRlcnZlbnRpb25UcnVzdFRocmVzaG9sZCA8PSAwLCBcIlRydXN0IHRocmVzaG9sZCBmb3IgbWl0aWdhdGluZyB1bmRlcnRydXN0IGNhbm5vdCBiZSBwb3NpdGl2ZS5cIilcbiAgICBhc3NlcnQoSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlID49IDAsIFwiQ29uZmlkZW5jZSBjaGFuZ2UgZm9yIG1pdGlnYXRpbmcgdW5kZXJ0cnVzdCBjYW5ub3QgYmUgbmVnYXRpdmUuXCIpXG59IGVsc2UgaWYgKEFJSW50ZXJ2ZW50aW9uR29hbCA9PSBcIm1pdGlnYXRlX292ZXJ0cnVzdFwiKSB7XG4gICAgYXNzZXJ0KEludGVydmVudGlvblRydXN0VGhyZXNob2xkID49IDAsIFwiVHJ1c3QgdGhyZXNob2xkIGZvciBtaXRpZ2F0aW5nIG92ZXJ0cnVzdCBjYW5ub3QgYmUgbmVnYXRpdmUuXCIpXG4gICAgYXNzZXJ0KEludGVydmVudGlvbkZpeGVkQ29uZkNoYW5nZSA8PSAwLCBcIkNvbmZpZGVuY2UgY2hhbmdlIGZvciBtaXRpZ2F0aW5nIG92ZXJ0cnVzdCBjYW5ub3QgYmUgcG9zaXRpdmUuXCIpXG59XG5cbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fZ29hbFwiXSA9IEFJSW50ZXJ2ZW50aW9uR29hbFxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl90eXBlXCJdID0gQUlJbnRlcnZlbnRpb25UeXBlXG5nbG9iYWxUaGlzLnVybF9kYXRhW1wiaW50ZXJ2ZW50aW9uX3N0cmF0ZWd5XCJdID0gQUlJbnRlcnZlbnRpb25TdHJhdGVneVxuZ2xvYmFsVGhpcy51cmxfZGF0YVtcImludGVydmVudGlvbl90aHJlc2hvbGRcIl0gPSBJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGRcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJpbnRlcnZlbnRpb25fZml4ZWRjb25mY2hhbmdlXCJdID0gSW50ZXJ2ZW50aW9uRml4ZWRDb25mQ2hhbmdlXG5nbG9iYWxUaGlzLnVybF9kYXRhW1widXNlcl90cnVzdF9oZXVyaXN0aWNcIl0gPSB1c2VyVHJ1c3RIZXVyaXN0aWNcbmdsb2JhbFRoaXMudXJsX2RhdGFbXCJza2lwX3RydXN0X3JlcG9ydGluZ1wiXSA9IHNraXBfdHJ1c3RfcmVwb3J0aW5nXG5nbG9iYWxUaGlzLnVybF9kYXRhW1wic21vb3RoaW5nX3BhcmFtXCJdID0gc21vb3RoaW5nUGFyYW1cblxuLy8gdmVyc2lvbiBmb3IgcGFwZXJcbmlmIChnbG9iYWxUaGlzLnVpZC5zdGFydHNXaXRoKFwiZGVtb19wYXBlclwiKSkge1xuICAgIE1PQ0tNT0RFID0gdHJ1ZVxufSBlbHNlIHtcblxufVxuY29uc29sZS5sb2coXCJSdW5uaW5nIHdpdGggVUlEXCIsIGdsb2JhbFRoaXMudWlkKVxubG9hZF9kYXRhKCkuY2F0Y2goKF9lcnJvcikgPT4ge1xuICAgIC8vYWxlcnQoXCJJbnZhbGlkIHVzZXIgaWQuXCIpXG4gICAgY29uc29sZS5sb2coXCJJbnZhbGlkIHVzZXIgaWQuXCIpXG4gICAgY29uc29sZS5sb2coZ2xvYmFsVGhpcy51aWQhKVxuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxufVxuKS50aGVuKChuZXdfZGF0YSkgPT4ge1xuICAgIGRhdGEgPSBuZXdfZGF0YVxuICAgIGlmIChzdGFydE92ZXJyaWRlICE9IG51bGwpIHtcbiAgICAgICAgcXVlc3Rpb25faSA9IHBhcnNlSW50KHN0YXJ0T3ZlcnJpZGUpIC0gMVxuICAgICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0aW5nIGZyb21cIiwgcXVlc3Rpb25faSlcbiAgICB9XG4gICAgLy8gbmV4dF9xdWVzdGlvbigpXG4gICAgbmV4dF9pbnN0cnVjdGlvbnMoMClcbiAgICAkKFwiI21haW5fYm94X2luc3RydWN0aW9uc1wiKS5zaG93KClcbiAgICAkKFwiI2luc3RydWN0aW9uc19hbmRfZGVjb3JhdGlvbnNcIikuaGlkZSgpXG59KVxuXG5jb25zb2xlLmxvZyhcIlN0YXJ0aW5nIHNlc3Npb24gd2l0aCBVSUQ6XCIsIGdsb2JhbFRoaXMudWlkISlcblxubGV0IGFsZXJ0X2FjdGl2ZSA9IGZhbHNlXG5kb2N1bWVudC5vbnZpc2liaWxpdHljaGFuZ2UgPSAoKSA9PiB7XG4gICAgaWYgKCFhbGVydF9hY3RpdmUpIHtcbiAgICAgICAgY291bnRfZXhpdGVkX3BhZ2UgKz0gMVxuICAgICAgICBhbGVydF9hY3RpdmUgPSB0cnVlXG4gICAgICAgIGlmICghKGdsb2JhbFRoaXMudWlkIS5zdGFydHNXaXRoKFwiZGVtb1wiKSkgJiYgIShERVZNT0RFKSkge1xuICAgICAgICAgICAgYWxlcnQoXCJQbGVhc2UgZG9uJ3QgbGVhdmUgdGhlIHBhZ2UuIElmIHlvdSBkbyBzbyBhZ2Fpbiwgd2UgbWF5IHJlc3RyaWN0IHBheWluZyB5b3UuXCIpXG4gICAgICAgIH1cbiAgICAgICAgYWxlcnRfYWN0aXZlID0gZmFsc2VcbiAgICB9XG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU0VSVkVSX0xPR19ST09UIiwiYWN0aXZlVGltZXIiLCJzdGFydFRpbWVyIiwiZHVyYXRpb24iLCJzdGVwRGl2IiwiYnV0dG9ucyIsImNhbGxiYWNrIiwibWVzc2FnZSIsImNsZWFySW50ZXJ2YWwiLCJmb3JFYWNoIiwiYnV0dG9uIiwic2V0QXR0cmlidXRlIiwidGltZXJEaXNwbGF5IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaWQiLCJzdHlsZSIsImZvbnRXZWlnaHQiLCJtYXJnaW5Ub3AiLCJhcHBlbmRDaGlsZCIsInJlbWFpbmluZ1RpbWUiLCJ0ZXh0Q29udGVudCIsInNldEludGVydmFsIiwicmVtb3ZlQ2hpbGQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJNT0NLTU9ERSIsImRhdGEiLCJ0aW1lX3F1ZXN0aW9uX3N0YXJ0IiwidGltZV9maW5hbF9kZWNpc2lvbl9zdGFydCIsInRpbWVfdHJ1c3RfZGVjaXNpb25fc3RhcnQiLCJ0aW1lX2luaXRpYWxfY29uZmlkZW5jZV9zdGFydCIsInRpbWVfZmluYWxfY29uZmlkZW5jZV9zdGFydCIsInF1ZXN0aW9uX2kiLCJxdWVzdGlvbiIsImluaXRpYWxfdXNlcl9kZWNpc2lvbiIsImZpbmFsX3VzZXJfZGVjaXNpb24iLCJpbml0aWFsX3VzZXJfY29uZmlkZW5jZSIsImZpbmFsX3VzZXJfY29uZmlkZW5jZSIsImJhbGFuY2UiLCJ1c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIiwicHJldl91c2VyX3JlcG9ydGVkX3RydXN0X2xldmVsIiwiYmV0X3ZhbF9yYXRpbyIsImluc3RydWN0aW9uX2kiLCJjb3VudF9leGl0ZWRfcGFnZSIsInVzZXJfY3VycmVudF9lc3RpbWF0ZWRfdHJ1c3RfbGV2ZWwiLCJpbnRlcnZlbnRpb25fZGV0YWlscyIsInRydXN0X2VmZmVjdF9wcmVkaWN0aW9uX2RhdGEiLCJhc3NlcnQiLCJjb25kaXRpb24iLCJuZXh0X2luc3RydWN0aW9ucyIsImluY3JlbWVudCIsInNraXBfdHJ1c3RfcmVwb3J0aW5nIiwiJCIsImF0dHIiLCJyZW1vdmVBdHRyIiwic2hvdyIsInZhbCIsImhpZGUiLCJuZXh0X3F1ZXN0aW9uIiwiY2hpbGRyZW4iLCJlYWNoIiwiXyIsImVsIiwibWFrZV9pbml0aWFsX3VzZXJfZGVjaXNpb24iLCJvcHRpb24iLCJEYXRlIiwibm93IiwiZ2V0X2luaXRpYWxfdXNlcl9jb25maWRlbmNlIiwiY29uZl9sZXZlbCIsImFzeW5jIiwiY29uc29sZSIsImxvZyIsImRpc3BsYXllZF9haV9jb25maWRlbmNlIiwidXNlcl9jdXJyZW50X3RydXN0X2xldmVsIiwidXNlclRydXN0SGV1cmlzdGljIiwiQUlJbnRlcnZlbnRpb25UeXBlIiwiQUlJbnRlcnZlbnRpb25Hb2FsIiwiSW50ZXJ2ZW50aW9uVHJ1c3RUaHJlc2hvbGQiLCJBSUludGVydmVudGlvblN0cmF0ZWd5IiwiYWlfY29uZmlkZW5jZSIsIk51bWJlciIsInJlcGxhY2UiLCJuZXdfY29uZmlkZW5jZSIsIk1hdGgiLCJtaW4iLCJJbnRlcnZlbnRpb25GaXhlZENvbmZDaGFuZ2UiLCJtYXgiLCJTdHJpbmciLCJ0b0ZpeGVkIiwiY29uZmlkZW5jZV9jaGFuZ2UiLCJleHBsYW5hdGlvbl9zaG93biIsImh0bWwiLCJnZXRFbGVtZW50QnlJZCIsImdldF9haV9hc3Npc3RhbmNlIiwibWFrZV9maW5hbF91c2VyX2RlY2lzaW9uIiwiZ2V0X2ZpbmFsX3VzZXJfY29uZmlkZW5jZSIsImNvcnJlY3Rfb3B0aW9uIiwidXNlcl9pc19jb3JyZWN0IiwiYWlfaXNfY29ycmVjdCIsInRleHQiLCJ0cnVzdF9lZmZlY3QiLCJwcmV2X2VzdGltYXRlZF90cnVzdF9sZXZlbCIsInNtb290aGluZ1BhcmFtIiwidXBkYXRlX3VzZXJfdHJ1c3RfbGV2ZWxfZXN0aW1hdGUiLCJzaG93X3Jlc3VsdCIsImxlbmd0aCIsInJhdGlvMSIsInJhdGlvMiIsIm9uIiwibG9nZ2VkX2RhdGEiLCJnbG9iYWxUaGlzIiwidXJsX2RhdGEiLCJ1aWQiLCJhamF4IiwiSlNPTiIsInN0cmluZ2lmeSIsInByb2plY3QiLCJwYXlsb2FkIiwidHlwZSIsImNvbnRlbnRUeXBlIiwiZSIsImxvZ19kYXRhIiwidGhpcyIsInVybFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3RhcnRPdmVycmlkZSIsIlVJREZyb21VUkwiLCJlbnRyaWVzIiwicmVzdWx0IiwidmFsdWUiLCJwYXJhbXNUb09iamVjdCIsInF1ZXVlX2lkIiwiZmxvb3IiLCJyYW5kb20iLCJwYWRTdGFydCIsIlVJRF9tYXliZSIsInByb21wdCIsImludGVydmVudGlvbl9hbGxvd2VkX3RpbWVzdGVwcyIsImluY2x1ZGVzIiwiRXJyb3IiLCJJbnRlcnZlbnRpb25BTERpZmZUaHJlc2hvbGQiLCJzdGFydHNXaXRoIiwiZ2V0SlNPTiIsImxvYWRfZGF0YSIsImNhdGNoIiwiX2Vycm9yIiwicmVsb2FkIiwidGhlbiIsIm5ld19kYXRhIiwicGFyc2VJbnQiLCJhbGVydF9hY3RpdmUiLCJvbnZpc2liaWxpdHljaGFuZ2UiLCJhbGVydCJdLCJzb3VyY2VSb290IjoiIn0=